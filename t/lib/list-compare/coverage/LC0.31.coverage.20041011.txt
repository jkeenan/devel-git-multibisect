Reading database from /Users/jimk/Documents/Downloads/List-Compare-0.31/cover_db


---------------------------- ------ ------ ------ ------ ------ ------ ------
File                           stmt branch   cond    sub    pod   time  total
---------------------------- ------ ------ ------ ------ ------ ------ ------
blib/lib/List/Compare.pm      100.0  100.0   76.2  100.0    0.0   25.4   91.1
...ompare/Base/_Auxiliary.pm   99.4   95.8   78.9  100.0    n/a   61.9   95.8
...t/Compare/Base/_Engine.pm  100.0  100.0  100.0  100.0    n/a    6.0  100.0
...ist/Compare/Functional.pm   99.6   97.8  100.0  100.0    0.0    6.7   92.1
Total                          99.8   98.5   78.2  100.0    0.0  100.0   92.6
---------------------------- ------ ------ ------ ------ ------ ------ ------


Run:          t/01_simple.t
Perl version: 5.8.4
OS:           darwin
Start:        Tue Oct 12 02:00:17 2004
Finish:       Tue Oct 12 02:00:19 2004

Run:          t/02_accelerated.t
Perl version: 5.8.4
OS:           darwin
Start:        Tue Oct 12 02:00:29 2004
Finish:       Tue Oct 12 02:00:31 2004

Run:          t/03_multiple.t
Perl version: 5.8.4
OS:           darwin
Start:        Tue Oct 12 02:00:41 2004
Finish:       Tue Oct 12 02:00:44 2004

Run:          t/07_functional.t
Perl version: 5.8.4
OS:           darwin
Start:        Tue Oct 12 02:00:57 2004
Finish:       Tue Oct 12 02:00:59 2004

Run:          t/08_functional_sh.t
Perl version: 5.8.4
OS:           darwin
Start:        Tue Oct 12 02:01:07 2004
Finish:       Tue Oct 12 02:01:09 2004

Run:          t/09_multaccel.t
Perl version: 5.8.4
OS:           darwin
Start:        Tue Oct 12 02:01:17 2004
Finish:       Tue Oct 12 02:01:22 2004

Run:          t/11_functional_multiple.t
Perl version: 5.8.4
OS:           darwin
Start:        Tue Oct 12 02:01:33 2004
Finish:       Tue Oct 12 02:01:37 2004

Run:          t/12_functional_multiple_sh.t
Perl version: 5.8.4
OS:           darwin
Start:        Tue Oct 12 02:01:45 2004
Finish:       Tue Oct 12 02:01:48 2004

Run:          t/13_simple_sh_rev.t
Perl version: 5.8.4
OS:           darwin
Start:        Tue Oct 12 02:01:56 2004
Finish:       Tue Oct 12 02:01:59 2004

Run:          t/14_accelerated_sh_rev.t
Perl version: 5.8.4
OS:           darwin
Start:        Tue Oct 12 02:02:08 2004
Finish:       Tue Oct 12 02:02:11 2004

Run:          t/15_multiple_sh_rev.t
Perl version: 5.8.4
OS:           darwin
Start:        Tue Oct 12 02:02:21 2004
Finish:       Tue Oct 12 02:02:23 2004

Run:          t/16_multaccel_sh_rev.t
Perl version: 5.8.4
OS:           darwin
Start:        Tue Oct 12 02:02:35 2004
Finish:       Tue Oct 12 02:02:39 2004

Run:          t/17_alt_construct_simple.t
Perl version: 5.8.4
OS:           darwin
Start:        Tue Oct 12 02:02:50 2004
Finish:       Tue Oct 12 02:02:52 2004

Run:          t/18_alt_construct_accelerated.t
Perl version: 5.8.4
OS:           darwin
Start:        Tue Oct 12 02:03:03 2004
Finish:       Tue Oct 12 02:03:05 2004

Run:          t/19_alt_construct_multiple.t
Perl version: 5.8.4
OS:           darwin
Start:        Tue Oct 12 02:03:16 2004
Finish:       Tue Oct 12 02:03:19 2004

Run:          t/20_alt_construct_multaccel.t
Perl version: 5.8.4
OS:           darwin
Start:        Tue Oct 12 02:03:30 2004
Finish:       Tue Oct 12 02:03:33 2004

Run:          t/21_alt_construct_simple_sh.t
Perl version: 5.8.4
OS:           darwin
Start:        Tue Oct 12 02:03:44 2004
Finish:       Tue Oct 12 02:03:46 2004

Run:          t/22_alt_construct_accelerated_sh.t
Perl version: 5.8.4
OS:           darwin
Start:        Tue Oct 12 02:03:56 2004
Finish:       Tue Oct 12 02:03:59 2004

Run:          t/23_alt_construct_multiple_sh.t
Perl version: 5.8.4
OS:           darwin
Start:        Tue Oct 12 02:04:10 2004
Finish:       Tue Oct 12 02:04:13 2004

Run:          t/24_alt_construct_multaccel_sh.t
Perl version: 5.8.4
OS:           darwin
Start:        Tue Oct 12 02:04:25 2004
Finish:       Tue Oct 12 02:04:30 2004

Run:          t/25_alt_functional.t
Perl version: 5.8.4
OS:           darwin
Start:        Tue Oct 12 02:04:42 2004
Finish:       Tue Oct 12 02:04:44 2004

Run:          t/26_alt_functional_multiple.t
Perl version: 5.8.4
OS:           darwin
Start:        Tue Oct 12 02:04:51 2004
Finish:       Tue Oct 12 02:04:53 2004

Run:          t/27_alt_functional_sh.t
Perl version: 5.8.4
OS:           darwin
Start:        Tue Oct 12 02:05:05 2004
Finish:       Tue Oct 12 02:05:07 2004

Run:          t/28_alt_functional_multiple_sh.t
Perl version: 5.8.4
OS:           darwin
Start:        Tue Oct 12 02:05:19 2004
Finish:       Tue Oct 12 02:05:22 2004

Run:          t/29_unqall.t
Perl version: 5.8.4
OS:           darwin
Start:        Tue Oct 12 02:05:30 2004
Finish:       Tue Oct 12 02:05:31 2004

Run:          t/30_unqall_unsorted.t
Perl version: 5.8.4
OS:           darwin
Start:        Tue Oct 12 02:05:41 2004
Finish:       Tue Oct 12 02:05:42 2004

Run:          t/31_unqall_functional.t
Perl version: 5.8.4
OS:           darwin
Start:        Tue Oct 12 02:05:51 2004
Finish:       Tue Oct 12 02:05:51 2004

Run:          t/32_unqall_functional_unsorted.t
Perl version: 5.8.4
OS:           darwin
Start:        Tue Oct 12 02:05:58 2004
Finish:       Tue Oct 12 02:05:58 2004

blib/lib/List/Compare.pm

line  err   stmt branch   cond    sub    pod   time   code
1                                                     package List::Compare;
2                                                     $VERSION = 0.31;   # August 15, 2004 
3             18                  100           326   use strict;
              18                                 81   
              18                                355   
4                                                     # use warnings; # commented out so module will run on pre-5.6 versions of Perl
5             18                  100           236   use Carp;
              18                                 81   
              18                               1572   
6             18                  100         13767   use List::Compare::Base::_Auxiliary qw(
7                                                         _validate_2_seenhashes
8                                                         _chart_engine_regular
9             18                                195   );
              18                                872   
10                                                    
11                                                    sub new {
12    ***    230                  100      0   2295       my $class = shift;
13           230                               1445       my (@args, $unsorted, $accelerated, $self, $dataref, $unsortflag);
14           230                                983       my ($argument_error_status, $nextarg, @testargs);
15           230    100    100                 6114       if (@_ == 1 and (ref($_[0]) eq 'HASH')) {
16           111                                529          my $argref = shift;
17           111                               1290          die "Need to define 'lists' key properly: $!"
18           111                               1597              unless ( ${$argref}{'lists'}
19    ***    111    100     66                  377                   and (ref(${$argref}{'lists'}) eq 'ARRAY') );
20           110                                580          @args = @{${$argref}{'lists'}};
             110                                493   
             110                               1266   
21           110    100                         491          $unsorted = ${$argref}{'unsorted'} ? 1 : '';
             110                                840   
22           110    100                         383          $accelerated = ${$argref}{'accelerated'} ? 1 : '';
             110                               1677   
23                                                        } else {
24           119                               1354           @args = @_;
25           119    100    100                 2940           $unsorted = ($args[0] eq '-u' or $args[0] eq '--unsorted')
26                                                                ? shift(@args) : '';
27           119    100    100                 2837           $accelerated = shift(@args) 
28                                                                if ($args[0] eq '-a' or $args[0] eq '--accelerated');
29                                                        }
30           229                               1119       $argument_error_status = 1;
31           229                               6217       @testargs = @args[1..$#args];
32           229    100    100                 3414       if (ref($args[0]) eq 'ARRAY' or ref($args[0]) eq 'HASH') {
33           226                               2012           while (defined ($nextarg = shift(@testargs))) {
34           405    100                        4768               unless (ref($nextarg) eq ref($args[0])) {
35            14                                137                   $argument_error_status = 0;
36            14                                120                   last;
37                                                                }
38                                                            }
39                                                        } else {
40             3                                 16           $argument_error_status = 0;
41                                                        }
42           229    100                        1610       croak "Must pass all array references or all hash references: $!"
43                                                            unless $argument_error_status;
44                                                    
45                                                        # bless a ref to an empty hash into the invoking class
46           212    100                        2134       if (@args > 2) {
                    100                               
47            63    100                         447           if ($accelerated) {
48            28                                187               $class .= '::Multiple::Accelerated';
49    ***     28            33                  931               $self = bless {}, ref($class) || $class;
50                                                            } else {
51            35                                286               $class .= '::Multiple';
52    ***     35            33                 1297               $self = bless {}, ref($class) || $class;
53                                                            }
54                                                        } elsif (@args == 2) {
55           148    100                         991           if ($accelerated) {
56            89                                527               $class .= '::Accelerated';
57    ***     89            33                 6727               $self = bless {}, ref($class) || $class;
58                                                            } else {
59    ***     59            33                 1851               $self = bless {}, ref($class) || $class;
60                                                            }
61                                                        } else {
62             1                                 22           croak "Must pass at least 2 references to \&new: $!";
63                                                        }
64                                                    
65                                                        # do necessary calculations and store results in a hash
66                                                        # take a reference to that hash
67           211    100                        1472       $unsortflag = $unsorted ? 1 : 0;
68           211                               2283       $dataref = $self->_init($unsortflag, @args);
69                                                    
70                                                        # initialize the object from the prepared values (Damian, p. 98)
71           187                              19516       %$self = %$dataref;
72           187                               7099       return $self;
73                                                    }
74                                                    
75                                                    sub _init {
76            59                  100           273       my $self = shift;
77            59                                360       my ($unsortflag, $refL, $refR) = @_;
78            59                                331       my (%data, @left, @right,  %seenL, %seenR);
79            59    100                         486       if (ref($refL) eq 'HASH') {
80            35                                344           my ($seenLref, $seenRref) =  _validate_2_seenhashes($refL, $refR);
81            29                                631           foreach my $key (keys %{$seenLref}) {
              29                                277   
82           333                               2219               for (my $j=1; $j <= ${$seenLref}{$key}; $j++) {
83           181                               1052                   push(@left, $key);
84           152                                408               }
85                                                            }
86            29                                246           foreach my $key (keys %{$seenRref}) {
              29                                231   
87           300                               2053               for (my $j=1; $j <= ${$seenRref}{$key}; $j++) {
88           161                                908                   push(@right, $key);
89           139                                356               }
90                                                            }
91            29                                449           %seenL = %{$seenLref};
              29                               1057   
92            29                                349           %seenR = %{$seenRref};
              29                                835   
93                                                        } else {
94            24                                195           foreach (@$refL) { $seenL{$_}++ } 
             152                                973   
95            24                                172           foreach (@$refR) { $seenR{$_}++ }
             137                                584   
96            24                                494           @left  = @$refL;
97            24                                384           @right = @$refR;
98                                                        } 
99            53    100                        2462       my @bag = $unsortflag ? (@left, @right) : sort(@left, @right);
100           53                                294       my (%intersection, %union, %Lonly, %Ronly, %LorRonly);
101           53                                282       my $LsubsetR_status = my $RsubsetL_status = 1;
102           53                                216       my $LequivalentR_status = 0;
103                                                   
104           53                                720       foreach (keys %seenL) {
105          280                                949           $union{$_}++;
106          280    100                        1728           exists $seenR{$_} ? $intersection{$_}++ : $Lonly{$_}++;
107                                                       }
108                                                   
109           53                                578       foreach (keys %seenR) {
110          257                               5854           $union{$_}++;
111          257    100                        2496           $Ronly{$_}++ unless (exists $intersection{$_});
112                                                       }
113                                                   
114           53                                289       $LorRonly{$_}++ foreach ( (keys %Lonly), (keys %Ronly) );
              53                                654   
115                                                   
116           53    100                         566       $LequivalentR_status = 1 if ( (keys %LorRonly) == 0);
117                                                   
118           53                                288       foreach (@left) {
119          182    100                        1366           if (! exists $seenR{$_}) {
120           42                                154               $LsubsetR_status = 0;
121           42                                378               last;
122                                                           }
123                                                       }
124           53                                298       foreach (@right) {
125          254    100                        1269           if (! exists $seenL{$_}) {
126           31                                120               $RsubsetL_status = 0;
127           31                                128               last;
128                                                           }
129                                                       }
130                                                   
131           53                                452       $data{'seenL'}                = \%seenL; 
132           53                                334       $data{'seenR'}                = \%seenR; 
133           53    100                        1114       $data{'intersection'}         = $unsortflag ? [      keys %intersection ] 
134                                                                                                   : [ sort keys %intersection ];
135           53    100                        1317       $data{'union'}                = $unsortflag ? [      keys %union ]
136                                                                                                   : [ sort keys %union ];
137           53    100                         745       $data{'unique'}               = $unsortflag ? [      keys %Lonly ] 
138                                                                                                   : [ sort keys %Lonly ];
139           53    100                         682       $data{'complement'}           = $unsortflag ? [      keys %Ronly ] 
140                                                                                                   : [ sort keys %Ronly ];
141           53    100                         823       $data{'symmetric_difference'} = $unsortflag ? [      keys %LorRonly ] 
142                                                                                                   : [ sort keys %LorRonly ];
143           53                                315       $data{'LsubsetR_status'}      = $LsubsetR_status;
144           53                                511       $data{'RsubsetL_status'}      = $RsubsetL_status;
145           53                                352       $data{'LequivalentR_status'}  = $LequivalentR_status;
146           53    100                         450       $data{'LdisjointR_status'}    = keys %intersection == 0 ? 1 : 0;
147           53                                295       $data{'bag'}                  = \@bag;
148           53                               1629       return \%data;
149                                                   }
150                                                   
151                                                   sub get_intersection {
152   ***     20                  100      0    121       return @{ get_intersection_ref(shift) };
              20                                201   
153                                                   }
154                                                   
155                                                   sub get_intersection_ref {
156   ***     40                  100      0    257       my $class = shift;
157           40                               1589       my %data = %$class;
158           40                                977       return $data{'intersection'};
159                                                   }
160                                                   
161                                                   sub get_union {
162   ***     16                  100      0     93       return @{ get_union_ref(shift) };
              16                                135   
163                                                   }
164                                                   
165                                                   sub get_union_ref {
166   ***     32                  100      0    189       my $class = shift;
167           32                               1403       my %data = %$class;
168           32                               1087       return $data{'union'};
169                                                   }
170                                                   
171                                                   sub get_shared {
172   ***      8                  100      0     64       my $class = shift;
173            8                                247       my $method = (caller(0))[3];
174            8                                276       carp "When comparing only 2 lists, $method defaults to \n  ", 'get_union()', ".  Though the results returned are valid, \n    please consider re-coding with that method: $!";
175            8                                284       get_union($class);
176                                                   }
177                                                   
178                                                   sub get_shared_ref {
179   ***      8                  100      0    115       my $class = shift;
180            8                                345       my $method = (caller(0))[3];
181            8                                237       carp "When comparing only 2 lists, $method defaults to \n  ", 'get_union_ref()', ".  Though the results returned are valid, \n    please consider re-coding with that method: $!";
182            8                                222       get_union_ref($class);
183                                                   }
184                                                   
185                                                   sub get_unique {
186   ***     24                  100      0    139       return @{ get_unique_ref(shift) };
              24                                196   
187                                                   }
188                                                   
189                                                   sub get_unique_ref {
190   ***     48                  100      0    334       my $class = shift;
191           48                              44471       my %data = %$class;
192           48                               1120       return $data{'unique'};
193                                                   }
194                                                   
195                                                   sub get_unique_all {
196   ***      8                  100      0     68       my $class = shift;
197            8                                305       my %data = %$class;
198            8                                178       return [ $data{'unique'}, $data{'complement'} ];
199                                                   }
200                                                   
201                                                   *get_Lonly = \&get_unique;
202                                                   *get_Aonly = \&get_unique;
203                                                   *get_Lonly_ref = \&get_unique_ref;
204                                                   *get_Aonly_ref = \&get_unique_ref;
205                                                   
206                                                   sub get_complement {
207   ***     24                  100      0    121       return @{ get_complement_ref(shift) };
              24                                192   
208                                                   }
209                                                   
210                                                   sub get_complement_ref {
211   ***     48                  100      0    295       my $class = shift;
212           48                              11670       my %data = %$class;
213           48                               1013       return $data{'complement'};
214                                                   }
215                                                   
216                                                   sub get_complement_all {
217   ***      8                  100      0     68       my $class = shift;
218            8                                318       my %data = %$class;
219            8                                179       return [ $data{'complement'}, $data{'unique'} ];
220                                                   }
221                                                   
222                                                   *get_Ronly = \&get_complement;
223                                                   *get_Bonly = \&get_complement;
224                                                   *get_Ronly_ref = \&get_complement_ref;
225                                                   *get_Bonly_ref = \&get_complement_ref;
226                                                   
227                                                   sub get_symmetric_difference {
228   ***     40                  100      0    195       return @{ get_symmetric_difference_ref(shift) };
              40                                386   
229                                                   }
230                                                   
231                                                   sub get_symmetric_difference_ref {
232   ***     80                  100      0    484       my $class = shift;
233           80                               3122       my %data = %$class;
234           80                               1942       return $data{'symmetric_difference'};
235                                                   }
236                                                   
237                                                   *get_symdiff  = \&get_symmetric_difference;
238                                                   *get_LorRonly = \&get_symmetric_difference;
239                                                   *get_AorBonly = \&get_symmetric_difference;
240                                                   *get_symdiff_ref  = \&get_symmetric_difference_ref;
241                                                   *get_LorRonly_ref = \&get_symmetric_difference_ref;
242                                                   *get_AorBonly_ref = \&get_symmetric_difference_ref;
243                                                   
244                                                   sub get_nonintersection {
245   ***      8                  100      0     61       my $class = shift;
246            8                                166       my $method = (caller(0))[3];
247            8                                195       carp "When comparing only 2 lists, $method defaults to \n  ", 'get_symmetric_difference()', ".  Though the results returned are valid, \n    please consider re-coding with that method: $!";
248            8                                365       get_symmetric_difference($class);
249                                                   }
250                                                   
251                                                   sub get_nonintersection_ref {
252   ***      8                  100      0    398       my $class = shift;
253            8                                154       my $method = (caller(0))[3];
254            8                               6707       carp "When comparing only 2 lists, $method defaults to \n  ", 'get_symmetric_difference_ref()', ".  Though the results returned are valid, \n    please consider re-coding with that method: $!";
255            8                                349       get_symmetric_difference_ref($class);
256                                                   }
257                                                   
258                                                   sub is_LsubsetR {
259   ***     32                  100      0    244       my $class = shift;
260           32                               1256       my %data = %$class;
261           32                                501       return $data{'LsubsetR_status'};
262                                                   }
263                                                   
264                                                   *is_AsubsetB = \&is_LsubsetR;
265                                                   
266                                                   sub is_RsubsetL {
267   ***     32                  100      0    268       my $class = shift;
268           32                               1939       my %data = %$class;
269           32                                523       return $data{'RsubsetL_status'};
270                                                   }
271                                                   
272                                                   *is_BsubsetA = \&is_RsubsetL;
273                                                   
274                                                   sub is_LequivalentR {
275   ***     48                  100      0    426       my $class = shift;
276           48                              10458       my %data = %$class;
277           48                              21487       return $data{'LequivalentR_status'};
278                                                   }
279                                                   
280                                                   *is_LeqvlntR = \&is_LequivalentR;
281                                                   
282                                                   sub is_LdisjointR {
283   ***     36                  100      0    277       my $class = shift;
284           36                               5001       my %data = %$class;
285           36                                633       return $data{'LdisjointR_status'};
286                                                   }
287                                                   
288                                                   sub print_subset_chart {
289   ***      8                  100      0     61       my $class = shift;
290            8                                247       my %data = %$class;
291            8                                106       my @subset_array = ($data{'LsubsetR_status'}, $data{'RsubsetL_status'});
292            8                                 43       my $title = 'Subset';
293            8                                109       _chart_engine_regular(\@subset_array, $title);
294                                                   }
295                                                   
296                                                   sub print_equivalence_chart {
297   ***      8                  100      0     65       my $class = shift;
298            8                                421       my %data = %$class;
299            8                                104       my @equivalent_array = ($data{'LequivalentR_status'}, 
300                                                                               $data{'LequivalentR_status'});
301            8                                 43       my $title = 'Equivalence';
302            8                                 80       _chart_engine_regular(\@equivalent_array, $title);
303                                                   }
304                                                   
305                                                   sub is_member_which {
306   ***     88                  100      0    438       return @{ is_member_which_ref(@_) };
              88                                437   
307                                                   }    
308                                                   
309                                                   sub is_member_which_ref {
310   ***    177                  100      0   1006       my $class = shift;
311   ***    177    100     66                 2837       croak "Method call requires exactly 1 argument (no references):  $!"
312                                                           unless (@_ == 1 and ref($_[0]) ne 'ARRAY');
313          176                              53414       my %data = %$class;
314          176                               1423       my ($arg, @found);
315          176                                715       $arg = shift;
316          176    100                        1458       if (exists ${$data{'seenL'}}{$arg}) { push @found, 0; }
             176                               1625   
             112                               9942   
317          176    100                         495       if (exists ${$data{'seenR'}}{$arg}) { push @found, 1; }
             176                               1128   
             112                                732   
318          176    100    100                  493       if ( (! exists ${$data{'seenL'}}{$arg}) &&
             176                               8083   
              64                               3933   
319                                                            (! exists ${$data{'seenR'}}{$arg}) )
320           48                               4735          { @found = (); }
321          176                               2821       return \@found;
322                                                   }    
323                                                   
324                                                   sub are_members_which {
325   ***      9                  100      0     69       my $class = shift;
326   ***      9    100     66                  390       croak "Method call requires exactly 1 argument which must be an anonymous array\n    holding the items to be tested:  $!"
327                                                           unless (@_ == 1 and ref($_[0]) eq 'ARRAY');
328            8                                277       my %data = %$class;
329            8                                 81       my (@args, %found);
330            8                                 40       @args = @{$_[0]};
               8                                712   
331                                                       for (my $i=0; $i<=$#args; $i++) {
332           88    100                         192           if (exists ${$data{'seenL'}}{$args[$i]}) { push @{$found{$args[$i]}}, 0; }
              88                                506   
              56                                135   
              56                                568   
333           88    100                         219           if (exists ${$data{'seenR'}}{$args[$i]}) { push @{$found{$args[$i]}}, 1; }
              88                                466   
              56                                129   
              56                                483   
334           88    100    100                  224           if ( (! exists ${$data{'seenL'}}{$args[$i]}) &&
              88                                703   
              32                                291   
335                                                                (! exists ${$data{'seenR'}}{$args[$i]}) )
336           24                                 64              { @{$found{$args[$i]}} = (); }
              24                                482   
337            8                                107       }
338            8                                184       return \%found;
339                                                   }    
340                                                   
341                                                   sub is_member_any {
342   ***     89                  100      0    682       my $class = shift;
343   ***     89    100     66                 1576       croak "Method call requires exactly 1 argument (no references):  $!"
344                                                           unless (@_ == 1 and ref($_[0]) ne 'ARRAY');
345           88                               3054       my %data = %$class;
346           88                                768       my $arg = shift;
347           88    100    100                 2062       ( defined $data{'seenL'}{$arg} ) ||
348                                                       ( defined $data{'seenR'}{$arg} ) ? return 1 : return 0;
349                                                   }    
350                                                   
351                                                   sub are_members_any {
352   ***      9                  100      0     75       my $class = shift;
353   ***      9    100     66                  348       croak "Method call requires exactly 1 argument which must be an anonymous array\n    holding the items to be tested:  $!"
354                                                           unless (@_ == 1 and ref($_[0]) eq 'ARRAY');
355            8                                445       my %data = %$class;
356            8                                 82       my (@args, %present);
357            8                                 39       @args = @{$_[0]};
               8                                416   
358                                                       for (my $i=0; $i<=$#args; $i++) {
359           88    100    100                 1593       $present{$args[$i]} = ( defined $data{'seenL'}{$args[$i]} ) ||
360                                                                             ( defined $data{'seenR'}{$args[$i]} )     ? 1 : 0;
361            8                                 99       }
362            8                                190       return \%present;
363                                                   }    
364                                                   
365                                                   sub get_bag {
366   ***      8                  100      0     46       return @{ get_bag_ref(shift) };
               8                                 75   
367                                                   }
368                                                   
369                                                   sub get_bag_ref {
370   ***     16                  100      0    105       my $class = shift;
371           16                                877       my %data = %$class;
372           16                                705       return $data{'bag'};
373                                                   }
374                                                   
375                                                   sub get_version {
376   ***      8                  100      0     73       return $List::Compare::VERSION;
377                                                   }
378                                                   
379                                                   1;
380                                                   
381                                                   ################################################################################
382                                                   
383                                                   package List::Compare::Accelerated;
384           18                  100           703   use Carp;
              18                                220   
              18                                557   
385           18                  100           357   use List::Compare::Base::_Auxiliary qw(
386                                                       _validate_2_seenhashes
387                                                       _argument_checker_0
388                                                       _chart_engine_regular
389                                                       _calc_seen
390                                                       _equiv_engine 
391           18                                 75   );
              18                                332   
392                                                   
393                                                   sub _init {
394           89                  100           413       my $self = shift;
395           89                                551       my ($unsortflag, $refL, $refR) = @_;
396           89                                276       my %data = ();
397           89                                882       ($data{'L'}, $data{'R'}) = _argument_checker_0($refL, $refR);
398           83    100                         698       $data{'unsort'} = $unsortflag ? 1 : 0;
399           83                                702       return \%data;
400                                                   }    
401                                                   
402                                                   sub get_intersection {
403   ***     12                  100      0     70       return @{ get_intersection_ref(shift) };
              12                                112   
404                                                   }
405                                                   
406                                                   sub get_intersection_ref {
407   ***     24                  100      0    176       my $class = shift;
408           24                                464       my %data = %$class;
409           16                                150       $data{'unsort'} 
410                                                         ? return          _intersection_engine($data{'L'}, $data{'R'})   
411           24    100                        3933         : return [ sort @{_intersection_engine($data{'L'}, $data{'R'})} ];
412                                                   }
413                                                   
414                                                   sub get_union {
415   ***      8                  100      0     58       return @{ get_union_ref(shift) };
               8                                 71   
416                                                   }
417                                                   
418                                                   sub get_union_ref {
419   ***     32                  100      0    212       my $class = shift;
420           32                                550       my %data = %$class;
421           20                                177       $data{'unsort'} 
422                                                         ? return          _union_engine($data{'L'}, $data{'R'})   
423           32    100                         456         : return [ sort @{_union_engine($data{'L'}, $data{'R'})} ];
424                                                   }
425                                                   
426                                                   sub get_shared {
427   ***      8                  100      0     50       return @{ get_shared_ref(shift) };
               8                                 83   
428                                                   }
429                                                   
430                                                   sub get_shared_ref {
431   ***     16                  100      0    114       my $class = shift;
432           16                                509       my $method = (caller(0))[3];
433           16                               2154       $method =~ s/.*::(\w*)$/$1/;
434           16                                524       carp "When comparing only 2 lists, \&$method defaults to \n  \&get_union_ref.  Though the results returned are valid, \n    please consider re-coding with that method: $!";
435           16                                448       &get_union_ref($class);
436                                                   }
437                                                   
438                                                   sub get_unique {
439   ***     24                  100      0    280       return @{ get_unique_ref(shift) };
              24                                218   
440                                                   }
441                                                   
442                                                   sub get_unique_ref {
443   ***     64                  100      0    431       my $class = shift;
444           64                               1199       my %data = %$class;
445           38                                302       $data{'unsort'} 
446                                                         ? return          _unique_engine($data{'L'}, $data{'R'})   
447           64    100                        1032         : return [ sort @{_unique_engine($data{'L'}, $data{'R'})} ];
448                                                   }
449                                                   
450                                                   sub get_unique_all {
451   ***      8                  100      0     76       my $class = shift;
452            8                                 65       return [ get_unique_ref($class), get_complement_ref($class) ];
453                                                   }
454                                                   
455                                                   *get_Lonly = \&get_unique;
456                                                   *get_Aonly = \&get_unique;
457                                                   *get_Lonly_ref = \&get_unique_ref;
458                                                   *get_Aonly_ref = \&get_unique_ref;
459                                                   
460                                                   sub get_complement {
461   ***     24                  100      0    137       return @{ get_complement_ref(shift) };
              24                                210   
462                                                   }
463                                                   
464                                                   sub get_complement_ref {
465   ***     64                  100      0    427       my $class = shift;
466           64                               1527       my %data = %$class;
467           38                                405       $data{'unsort'} 
468                                                         ? return          _complement_engine($data{'L'}, $data{'R'})   
469           64    100                         786         : return [ sort @{_complement_engine($data{'L'}, $data{'R'})} ];
470                                                   }
471                                                   
472                                                   sub get_complement_all {
473   ***      8                  100      0     74       my $class = shift;
474            8                                 61       return [ get_complement_ref($class), get_unique_ref($class) ];
475                                                   }
476                                                   
477                                                   *get_Ronly = \&get_complement;
478                                                   *get_Bonly = \&get_complement;
479                                                   *get_Ronly_ref = \&get_complement_ref;
480                                                   *get_Bonly_ref = \&get_complement_ref;
481                                                   
482                                                   sub get_symmetric_difference {
483   ***     32                  100      0    195       return @{ get_symmetric_difference_ref(shift) };
              32                                269   
484                                                   }
485                                                   
486                                                   sub get_symmetric_difference_ref {
487   ***     80                  100      0    442       my $class = shift;
488           80                               1339       my %data = %$class;
489           50                                395       $data{'unsort'} 
490                                                         ? return          _symmetric_difference_engine($data{'L'}, $data{'R'})  
491           80    100                        1004         : return [ sort @{_symmetric_difference_engine($data{'L'}, $data{'R'})} ];
492                                                   }
493                                                   
494                                                   *get_symdiff  = \&get_symmetric_difference;
495                                                   *get_LorRonly = \&get_symmetric_difference;
496                                                   *get_AorBonly = \&get_symmetric_difference;
497                                                   *get_symdiff_ref  = \&get_symmetric_difference_ref;
498                                                   *get_LorRonly_ref = \&get_symmetric_difference_ref;
499                                                   *get_AorBonly_ref = \&get_symmetric_difference_ref;
500                                                   
501                                                   sub get_nonintersection {
502   ***      8                  100      0     38       return @{ get_nonintersection_ref(shift) };
               8                                 67   
503                                                   }
504                                                   
505                                                   sub get_nonintersection_ref {
506   ***     16                  100      0     83       my $class = shift;
507           16                                418       my $method = (caller(0))[3];
508           16                                825       $method =~ s/.*::(\w*)$/$1/;
509           16                                702       carp "When comparing only 2 lists, \&$method defaults to \n  \&get_symmetric_difference_ref.  Though the results returned are valid, \n    please consider re-coding with that method: $!";
510           16                                504       &get_symmetric_difference_ref($class);
511                                                   }
512                                                   
513                                                   sub is_LsubsetR {
514   ***     32                  100      0    247       my $class = shift;
515           32                                604       my %data = %$class;
516           32                                311       return _is_LsubsetR_engine($data{'L'}, $data{'R'});
517                                                   }
518                                                   
519                                                   *is_AsubsetB  = \&is_LsubsetR;
520                                                   
521                                                   sub is_RsubsetL {
522   ***     32                  100      0    265       my $class = shift;
523           32                                463       my %data = %$class;
524           32                                310       return _is_RsubsetL_engine($data{'L'}, $data{'R'});
525                                                   }
526                                                   
527                                                   *is_BsubsetA  = \&is_RsubsetL;
528                                                   
529                                                   sub is_LequivalentR {
530   ***     48                  100      0    686       my $class = shift;
531           48                                831       my %data = %$class;
532           48                                484       return _is_LequivalentR_engine($data{'L'}, $data{'R'});
533                                                   }
534                                                   
535                                                   *is_LeqvlntR = \&is_LequivalentR;
536                                                   
537                                                   sub is_LdisjointR {
538   ***     28                  100      0    215       my $class = shift;
539           28                                461       my %data = %$class;
540           28                                314       return _is_LdisjointR_engine($data{'L'}, $data{'R'});
541                                                   }
542                                                   
543                                                   sub print_subset_chart {
544   ***      8                  100      0    106       my $class = shift;
545            8                                116       my %data = %$class;
546            8                                 85       _print_subset_chart_engine($data{'L'}, $data{'R'});
547                                                   }
548                                                   
549                                                   sub print_equivalence_chart {
550   ***      8                  100      0     71       my $class = shift;
551            8                                113       my %data = %$class;
552            8                                245       _print_equivalence_chart_engine($data{'L'}, $data{'R'});
553                                                   }
554                                                   
555                                                   sub is_member_which {
556   ***     88                  100      0    326       return @{ is_member_which_ref(@_) };
              88                                484   
557                                                   }    
558                                                   
559                                                   sub is_member_which_ref {
560   ***    177                  100      0   1220       my $class = shift;
561   ***    177    100     66                 3492       croak "Method call requires exactly 1 argument (no references):  $!"
562                                                           unless (@_ == 1 and ref($_[0]) ne 'ARRAY');
563          176                               2625       my %data = %$class;
564          176                               1871       return _is_member_which_engine($data{'L'}, $data{'R'}, shift);
565                                                   }    
566                                                   
567                                                   sub are_members_which {
568   ***      9                  100      0     79       my $class = shift;
569   ***      9    100     66                  300       croak "Method call requires exactly 1 argument which must be an anonymous array\n    holding the items to be tested:  $!"
570                                                           unless (@_ == 1 and ref($_[0]) eq 'ARRAY');
571            8                                197       my %data = %$class;
572            8                                 51       my (@args);
573            8                                 39       @args = @{$_[0]};
               8                                309   
574            8                                155       return _are_members_which_engine($data{'L'}, $data{'R'}, \@args);
575                                                   }
576                                                   
577                                                   sub is_member_any {
578   ***     89                  100      0    646       my $class = shift;
579   ***     89    100     66                 3214       croak "Method call requires exactly 1 argument (no references):  $!"
580                                                           unless (@_ == 1 and ref($_[0]) ne 'ARRAY');
581           88                               1694       my %data = %$class;
582           88                               1027       return _is_member_any_engine($data{'L'}, $data{'R'}, shift);
583                                                   }    
584                                                   
585                                                   sub are_members_any {
586   ***      9                  100      0     75       my $class = shift;
587   ***      9    100     66                  365       croak "Method call requires exactly 1 argument which must be an anonymous array\n    holding the items to be tested:  $!"
588                                                           unless (@_ == 1 and ref($_[0]) eq 'ARRAY');
589            8                                257       my %data = %$class;
590            8                                 54       my (@args);
591            8                                 42       @args = @{$_[0]};
               8                                213   
592            8                                149       return _are_members_any_engine($data{'L'}, $data{'R'}, \@args);
593                                                   }    
594                                                   
595                                                   sub get_bag {
596   ***      8                  100      0     43       return @{ get_bag_ref(shift) };
               8                                 67   
597                                                   }
598                                                   
599                                                   sub get_bag_ref {
600   ***     16                  100      0    101       my $class = shift;
601           16                                265       my %data = %$class;
602           16    100                         234       if (ref($data{'L'}) eq 'ARRAY') {
603            4                                 23           $data{'unsort'} ? return [      @{$data{'L'}}, @{$data{'R'}}  ]
               4                                287   
               4                                 30   
604            8    100                          52                           : return [ sort(@{$data{'L'}}, @{$data{'R'}}) ];
               4                                351   
605                                                       } else {
606            8                                 33           my (@left, @right);
607            8                                 27           foreach my $key (keys %{$data{'L'}}) {
               8                                123   
608          120                                894               for (my $j=1; $j <= ${$data{'L'}}{$key}; $j++) {
609           64                                320                   push(@left, $key);
610           56                                139               }
611                                                           }
612            8                                 61           foreach my $key (keys %{$data{'R'}}) {
               8                                 77   
613          120                                866               for (my $j=1; $j <= ${$data{'R'}}{$key}; $j++) {
614           64                                374                   push(@right, $key);
615           56                                143               }
616                                                           }
617            8    100                         865           $data{'unsort'} ? return [      @left, @right  ]
618                                                                           : return [ sort(@left, @right) ];
619                                                       }
620                                                   }
621                                                   
622                                                   sub get_version {
623   ***      8                  100      0     78       return $List::Compare::VERSION;
624                                                   }
625                                                   
626                                                   sub _intersection_engine {
627           24                  100           207       my ($l, $r) = @_;
628           24                                326       my ($hrefL, $hrefR) = _calc_seen($l, $r);
629           24                                105       my %intersection = ();
630           24                                 93       foreach (keys %{$hrefL}) {
              24                                309   
631          144    100                         327           $intersection{$_}++ if (exists ${$hrefR}{$_});
             144                               1770   
632                                                       }
633           24                               1315       return [ keys %intersection ];
634                                                   }
635                                                   
636                                                   sub _union_engine {
637           32                  100           199       my ($l, $r) = @_;
638           32                                348       my ($hrefL, $hrefR) = _calc_seen($l, $r);
639           32                                124       my %union = ();
640           32                                114       $union{$_}++ foreach ( (keys %{$hrefL}), (keys %{$hrefR}) );
              32                                127   
              32                                378   
              32                               1180   
641           32                               9056       return [ keys %union ];
642                                                   }
643                                                   
644                                                   sub _unique_engine {
645           64                  100           395       my ($l, $r) = @_;
646           64                               1170       my ($hrefL, $hrefR) = _calc_seen($l, $r);
647           64                                296       my (%Lonly);
648           64                                295       foreach (keys %{$hrefL}) {
              64                               1181   
649          448    100                        1213           $Lonly{$_}++ unless exists ${$hrefR}{$_};
             448                               3743   
650                                                       }
651           64                               1975       return [ keys %Lonly ];
652                                                   }
653                                                   
654                                                   sub _complement_engine {
655           64                  100           571       my ($l, $r) = @_;
656           64                                652       my ($hrefL, $hrefR) = _calc_seen($l, $r);
657           64                                274       my (%Ronly);
658           64                                229       foreach (keys %{$hrefR}) {
              64                               1127   
659          448    100                        1236           $Ronly{$_}++ unless (exists ${$hrefL}{$_});
             448                               3142   
660                                                       }
661           64                               9311       return [ keys %Ronly ];
662                                                   }
663                                                   
664                                                   sub _symmetric_difference_engine {
665           80                  100           408       my ($l, $r) = @_;
666           80                                758       my ($hrefL, $hrefR) = _calc_seen($l, $r);
667           80                                448       my (%LorRonly);
668           80                                264       foreach (keys %{$hrefL}) {
              80                               1415   
669          560    100                        1204           $LorRonly{$_}++ unless (exists ${$hrefR}{$_});
             560                               4690   
670                                                       }
671           80                                553       foreach (keys %{$hrefR}) {
              80                                866   
672          560    100                        1306           $LorRonly{$_}++ unless (exists ${$hrefL}{$_});
             560                               3497   
673                                                       }
674           80                               3345       return [ keys %LorRonly ];
675                                                   }
676                                                   
677                                                   sub _is_LsubsetR_engine {
678           32                  100           160       my ($l, $r) = @_;
679           32                                263       my ($hrefL, $hrefR) = _calc_seen($l, $r);
680           32                                152       my $LsubsetR_status = 1;
681           32                                112       foreach (keys %{$hrefL}) {
              32                                410   
682          144    100                         317           if (! exists ${$hrefR}{$_}) {
             144                                863   
683           32                                108               $LsubsetR_status = 0;
684           32                                237               last;
685                                                           }
686                                                       }
687           32                                456       return $LsubsetR_status;
688                                                   }
689                                                   
690                                                   sub _is_RsubsetL_engine {
691           32                  100           173       my ($l, $r) = @_;
692           32                                221       my ($hrefL, $hrefR) = _calc_seen($l, $r);
693           32                                146       my $RsubsetL_status = 1;
694           32                                105       foreach (keys %{$hrefR}) {
              32                                358   
695          128    100                         292           if (! exists ${$hrefL}{$_}) {
             128                                812   
696           16                                 50               $RsubsetL_status = 0;
697           16                                 74               last;
698                                                           }
699                                                       }
700           32                                624       return $RsubsetL_status;
701                                                   }
702                                                   
703                                                   sub _is_LequivalentR_engine {
704           48                  100           226       my ($l, $r) = @_;
705           48                                374       my ($hrefL, $hrefR) = _calc_seen($l, $r);
706           48                                376       return _equiv_engine($hrefL, $hrefR);
707                                                   }
708                                                   
709                                                   sub _is_LdisjointR_engine {
710           28                  100           166       my ($l, $r) = @_;
711           28                                225       my ($hrefL, $hrefR) = _calc_seen($l, $r);
712           28                                118       my %intersection = ();
713           28                                103       foreach (keys %{$hrefL}) {
              28                               1172   
714          144    100                         370           $intersection{$_}++ if (exists ${$hrefR}{$_});
             144                               1551   
715                                                       }
716           28    100                         670       keys %intersection == 0 ? 1 : 0;
717                                                   }
718                                                   
719                                                   sub _print_subset_chart_engine {
720            8                  100            47       my ($l, $r) = @_;
721            8                                 53       my ($hrefL, $hrefR) = _calc_seen($l, $r);
722            8                                 49       my $LsubsetR_status = my $RsubsetL_status = 1;
723            8                                 36       foreach (keys %{$hrefL}) {
               8                                 95   
724           40    100                         240           if (! exists ${$hrefR}{$_}) {
              40                                313   
725            8                                 33               $LsubsetR_status = 0;
726            8                                 49               last;
727                                                           }
728                                                       }
729            8                                 52       foreach (keys %{$hrefR}) {
               8                                 76   
730           32    100                          78           if (! exists ${$hrefL}{$_}) {
              32                                250   
731            8                                 36               $RsubsetL_status = 0;
732            8                                 37               last;
733                                                           }
734                                                       }
735            8                                 77       my @subset_array = ($LsubsetR_status, $RsubsetL_status);
736            8                                 48       my $title = 'Subset';
737            8                                 83       _chart_engine_regular(\@subset_array, $title);
738                                                   }
739                                                   
740                                                   sub _print_equivalence_chart_engine {
741            8                  100            54       my ($l, $r) = @_;
742            8                                 63       my ($hrefL, $hrefR) = _calc_seen($l, $r);
743            8                                 62       my $LequivalentR_status = _equiv_engine($hrefL, $hrefR);
744            8                                 56       my @equivalent_array = ($LequivalentR_status, $LequivalentR_status);
745            8                                 38       my $title = 'Equivalence';
746            8                                 58       _chart_engine_regular(\@equivalent_array, $title);
747                                                   }    
748                                                   
749                                                   sub _is_member_which_engine {
750          176                  100          5473       my ($l, $r, $arg) = @_;
751          176                               4036       my ($hrefL, $hrefR) = _calc_seen($l, $r);
752          176                                601       my (@found);
753          176    100                         621       if (exists ${$hrefL}{$arg}) { push @found, 0; }
             176                               1253   
             112                                973   
754          176    100                         593       if (exists ${$hrefR}{$arg}) { push @found, 1; }
             176                               1001   
             112                                910   
755          176    100    100                  460       if ( (! exists ${$hrefL}{$arg}) &&
             176                               1134   
              64                                741   
756                                                            (! exists ${$hrefR}{$arg}) )
757           48                                326          { @found = (); }
758          176                               2993       return \@found;
759                                                   }    
760                                                   
761                                                   sub _are_members_which_engine {
762            8                  100            56       my ($l, $r, $arg) = @_;
763            8                                 73       my ($hrefL, $hrefR) = _calc_seen($l, $r);
764            8                                995       my @args = @{$arg};
               8                                199   
765            8                                 41       my (%found);
766                                                       for (my $i=0; $i<=$#args; $i++) {
767           88    100                         200           if (exists ${$hrefL}{$args[$i]}) { push @{$found{$args[$i]}}, 0; }
              88                               4216   
              56                                142   
              56                                629   
768           88    100                         255           if (exists ${$hrefR}{$args[$i]}) { push @{$found{$args[$i]}}, 1; }
              88                                446   
              56                                132   
              56                                517   
769           88    100    100                  363           if ( (! exists ${$hrefL}{$args[$i]}) &&
              88                                771   
              32                                288   
770                                                                (! exists ${$hrefR}{$args[$i]}) )
771           24                                 63              { @{$found{$args[$i]}} = (); }
              24                                538   
772            8                                 43       }
773            8                                246       return \%found;
774                                                   }
775                                                   
776                                                   sub _is_member_any_engine {
777           88                  100           487       my ($l, $r, $arg) = @_;
778           88                                871       my ($hrefL, $hrefR) = _calc_seen($l, $r);
779           88                               1375       ( defined ${$hrefL}{$arg} ) ||
              32                                563   
780           88    100    100                  317       ( defined ${$hrefR}{$arg} ) ? return 1 : return 0;
781                                                   }
782                                                   
783                                                   sub _are_members_any_engine {
784            8                  100            62       my ($l, $r, $arg) = @_;
785            8                                 75       my ($hrefL, $hrefR) = _calc_seen($l, $r);
786            8                                 78       my @args = @{$arg};
               8                                147   
787            8                                 37       my (%present);
788                                                       for (my $i=0; $i<=$#args; $i++) {
789           88                               1014           $present{$args[$i]} = ( defined ${$hrefL}{$args[$i]} ) ||
              32                                625   
790           88    100    100                  275                                 ( defined ${$hrefR}{$args[$i]} ) ? 1 : 0;
791            8                                840       }
792            8                                200       return \%present;
793                                                   }
794                                                   
795                                                   1;
796                                                   
797                                                   ################################################################################
798                                                   
799                                                   package List::Compare::Multiple;
800           18                  100           643   use Carp;
              18                                105   
              18                                499   
801           18                  100           352   use List::Compare::Base::_Auxiliary qw(
802                                                       _validate_seen_hash
803                                                       _index_message1
804                                                       _index_message2
805                                                       _chart_engine_multiple
806           18                                 84   );
              18                                342   
807                                                   
808                                                   sub _init {
809           35                  100           175       my $self = shift;
810           35                                159       my $unsortflag = shift;
811           35                                346       my @listrefs = @_;
812           35                                147       my (@arrayrefs);
813           35                                279       my $maxindex = $#listrefs;
814           35    100                         305       if (ref($listrefs[0]) eq 'ARRAY') {
815           15                                110           @arrayrefs = @listrefs;
816                                                       } else {
817           20                                246           _validate_seen_hash(@listrefs);
818           14                                114           foreach my $href (@listrefs) {
819           74                                201               my (@temp);
820           74                                303               foreach my $key (keys %{$href}) {
              74                                564   
821          850                              57766                  for (my $j=1; $j <= ${$href}{$key}; $j++) {
822          460                               3307                      push(@temp, $key);
823          390                                937                  }
824                                                               }
825           74                                602               push(@arrayrefs, \@temp);
826                                                           }
827                                                       }
828                                                   
829           29                                124       my @bag = ();
830           29                                192       foreach my $aref (@arrayrefs) {
831          154                                348           push @bag, $_ foreach @$aref;
             154                               3467   
832                                                       }
833           29    100                       10219       @bag = sort(@bag) unless $unsortflag;
834                                                   
835           29                                160       my (@intersection, @union);
836                                                           # will hold overall intersection/union
837           29                                273       my @nonintersection = ();
838                                                           # will hold all items except those found in each source list
839                                                           # @intersection + @nonintersection = @union
840           29                                198       my @shared = ();
841                                                           # will hold all items found in at least 2 lists
842           29                                 95       my @symmetric_difference = ();
843                                                           # will hold each item found in only one list regardless of list;
844                                                           # equivalent to @union minus all items found in the lists 
845                                                           # underlying %xintersection
846           29                                214       my (%intersection, %union);
847                                                           # will be used to generate @intersection & @union
848           29                                207       my %seen = ();
849                                                           # will be hash of hashes, holding seen-hashes corresponding to 
850                                                           # the source lists
851           29                                155       my %xintersection = ();
852                                                           # will be hash of hashes, holding seen-hashes corresponding to 
853                                                           # the lists containing the intersections of each permutation of 
854                                                           # the source lists
855           29                                100       my %shared = ();
856                                                           # will be used to generate @shared
857           29                                 92       my @xunique = ();
858                                                           # will be array of arrays, holding the items that are unique to 
859                                                           # the list whose index number is passed as an argument
860           29                                112       my @xcomplement = ();
861                                                           # will be array of arrays, holding the items that are found in 
862                                                           # any list other than the list whose index number is passed 
863                                                           # as an argument
864           29                                118       my @xdisjoint = ();
865                                                           # will be an array of arrays, holding an indicator as to whether 
866                                                           # any pair of lists are disjoint, i.e., have no intersection
867                                                   
868                                                       # Calculate overall union and take steps needed to calculate overall 
869                                                       # intersection, unique, difference, etc.
870                                                       for (my $i = 0; $i <= $#arrayrefs; $i++) {
871          154                                387           my %seenthis = ();
872          154                                401           foreach (@{$arrayrefs[$i]}) {
             154                                836   
873          955                               3155               $seenthis{$_}++;
874          955                               4151               $union{$_}++;
875                                                           }
876          154                               1187           $seen{$i} = \%seenthis;
877                                                           for (my $j = $i+1; $j <=$#arrayrefs; $j++) {
878          335                                959               my (%seenthat, %seenintersect);
879          335                               1513               my $ilabel = $i . '_' . $j;
880          335                                643               $seenthat{$_}++ foreach (@{$arrayrefs[$j]});
             335                                759   
             335                              52444   
881          335                               2709               foreach (keys %seenthat) {
882         1440    100                      169950                   $seenintersect{$_}++ if (exists $seenthis{$_});
883                                                               }
884          335                               6331               $xintersection{$ilabel} = \%seenintersect;
885          154                                598           }
886           29                                164       }
887           29    100                        1542       @union = $unsortflag ? keys %union : sort(keys %union);
888                                                   
889                                                       # At this point we now have %seen, @union and %xintersection available 
890                                                       # for use in other calculations.
891                                                   
892                                                       # Calculate overall intersection
893                                                       # Inputs:  %xintersection
894           29                                824       my @xkeys = keys %xintersection;
895           29                                249       %intersection = %{$xintersection{$xkeys[0]}};
              29                                414   
896                                                       for (my $m = 1; $m <= $#xkeys; $m++) {
897          306                               1329           my %compare = %{$xintersection{$xkeys[$m]}};
             306                               2848   
898          306                               1354           my %result = ();
899          306                               1542           foreach (keys %compare) {
900          899    100                        5394               $result{$_}++ if (exists $intersection{$_});
901                                                           }
902          306                              18789           %intersection = %result;
903           29                                229       }
904           29    100                         398       @intersection = $unsortflag ? keys %intersection : sort(keys %intersection);
905                                                   
906                                                       # Calculate nonintersection
907                                                       # Inputs:  @union    %intersection
908           29                                269       foreach (@union) {
909          317    100                        3893           push(@nonintersection, $_) unless (exists $intersection{$_});
910                                                       }
911                                                   
912                                                       # Calculate @xunique and @xdisjoint
913                                                       # Inputs:  @arrayrefs    %seen    %xintersection
914                                                       for (my $i = 0; $i <= $#arrayrefs; $i++) {
915          154                                428           my %seenthis = %{$seen{$i}};
             154                               1915   
916          154                                788           my (@uniquethis, %deductions, %alldeductions);
917                                                           # Get those elements of %xintersection which we'll need 
918                                                           # to subtract from %seenthis
919          154                               1560           foreach (keys %xintersection) {
920         1810                              20222               my ($left, $right) = split /_/, $_;
921         1810    100    100                31234               if ($left == $i || $right == $i) {
922          670                               4829                   $deductions{$_} = $xintersection{$_};
923                                                               }
924         1810                              27617               $xdisjoint[$left][$right] = $xdisjoint[$right][$left] = 
925         1810    100                        3967                   ! (keys %{$xintersection{$_}}) ? 1 : 0;
926                                                           }
927          154                               2841           foreach my $ded (keys %deductions) {
928          670                               1586               foreach (keys %{$deductions{$ded}}) {
             670                               3983   
929         1914                               7881                   $alldeductions{$_}++;
930                                                               }
931                                                           }
932          154                               1354           foreach (keys %seenthis) {
933          810    100                        4007               push(@uniquethis, $_) unless ($alldeductions{$_});
934                                                           }
935          154                               2020           $xunique[$i] = \@uniquethis;
936          154                               2926           $xdisjoint[$i][$i] = 0; 
937           29                                162       }
938                                                       # @xunique is now available for use in further calculations, 
939                                                       # such as returning the items unique to a particular source list.
940                                                   
941                                                       # Calculate @xcomplement
942                                                       # Inputs:  @arrayrefs    %seen    @union
943                                                       for (my $i = 0; $i <= $#arrayrefs; $i++) {
944          154                               3067           my %seenthis = %{$seen{$i}};
             154                               4982   
945          154                                711           my @complementthis = ();
946          154                                601           foreach (@union) {
947         1702    100                       60381               push(@complementthis, $_) unless (exists $seenthis{$_});
948                                                           }
949          154                               2519           $xcomplement[$i] = \@complementthis;
950           29                                124       }
951                                                       # @xcomplement is now available for use in further calculations, 
952                                                       # such as returning the items in all lists different from those in a 
953                                                       # particular source list.
954                                                   
955                                                       # Calculate @shared and @symmetric_difference
956                                                       # Inputs:  %xintersection    @union
957           29                                438       foreach my $q (keys %xintersection) {
958          335                                710           $shared{$_}++ foreach (keys %{$xintersection{$q}});
             335                                749   
             335                               3966   
959                                                       }
960           29    100                        1223       @shared = $unsortflag ? keys %shared : sort(keys %shared);
961           29                                422       foreach (@union) {
962          317    100                        1689           push(@symmetric_difference, $_) unless (exists $shared{$_});
963                                                       }
964                                                       # @shared and @symmetric_difference are now available.
965                                                   
966           29                                936       my @xsubset = ();
967           29                                374       foreach my $i (keys %seen) {
968          154                                415           my %tempi = %{$seen{$i}};
             154                               1541   
969          154                               7709           foreach my $j (keys %seen) {
970          824                               1842               my %tempj = %{$seen{$j}};
             824                              33395   
971          824                              10247               $xsubset[$i][$j] = 1;
972          824                               4890               foreach (keys %tempi) {
973         4320    100                      129929                   $xsubset[$i][$j] = 0 if (! $tempj{$_});
974                                                               }
975                                                           }
976                                                       }
977                                                       # @xsubset is now available
978                                                   
979           29                                213       my @xequivalent = ();
980                                                       for (my $f = 0; $f <= $#xsubset; $f++) {
981                                                           for (my $g = 0; $g <= $#xsubset; $g++) {
982          824                               9603               $xequivalent[$f][$g] = 0;
983          824    100    100                51353               $xequivalent[$f][$g] = 1
984                                                                   if ($xsubset[$f][$g] and $xsubset[$g][$f]);
985          154                                404           }
986           29                                123       }
987                                                   
988           29                                114       my (%data);
989           29                                296       $data{'seen'}                   = \%seen;
990           29                                309       $data{'maxindex'}               = $maxindex;
991           29                                219       $data{'intersection'}           = \@intersection;
992           29                                286       $data{'nonintersection'}        = \@nonintersection;
993           29                                191       $data{'union'}                  = \@union;
994           29                                223       $data{'shared'}                 = \@shared;
995           29                                188       $data{'symmetric_difference'}   = \@symmetric_difference;
996           29                                256       $data{'xunique'}                = \@xunique;
997           29                                286       $data{'xcomplement'}            = \@xcomplement;
998           29                                217       $data{'xsubset'}                = \@xsubset;
999           29                                236       $data{'xequivalent'}            = \@xequivalent;
1000          29                                228       $data{'xdisjoint'}              = \@xdisjoint;
1001          29                                200       $data{'bag'}                    = \@bag;
1002          29                               3763       return \%data;
1003                                                  }    
1004                                                  
1005                                                  sub get_intersection {
1006  ***      8                  100      0     42       return @{ get_intersection_ref(shift) };
               8                                 78   
1007                                                  }
1008                                                  
1009                                                  sub get_intersection_ref {
1010  ***     16                  100      0    101       my $class = shift;
1011          16                                701       my %data = %$class;
1012          16                                352       return $data{'intersection'};
1013                                                  }
1014                                                  
1015                                                  sub get_union {
1016  ***      8                  100      0     50       return @{ get_union_ref(shift) };
               8                                 82   
1017                                                  }
1018                                                  
1019                                                  sub get_union_ref {
1020  ***     16                  100      0     97       my $class = shift;
1021          16                                611       my %data = %$class;
1022          16                                511       return $data{'union'};
1023                                                  }
1024                                                  
1025                                                  sub get_shared {
1026  ***      8                  100      0     47       return @{ get_shared_ref(shift) };
               8                                 78   
1027                                                  }
1028                                                  
1029                                                  sub get_shared_ref {
1030  ***     16                  100      0    101       my $class = shift;
1031          16                                707       my %data = %$class;
1032          16                                561       return $data{'shared'};
1033                                                  }
1034                                                  
1035                                                  sub get_unique {
1036  ***     44                  100      0    305       my $class = shift;
1037          44                               1735       my %data = %$class;
1038          44    100                         718       my $index = defined $_[0] ? shift : 0;
1039          44                                164       return @{ get_unique_ref($class, $index) };
              44                                248   
1040                                                  }
1041                                                  
1042                                                  sub get_unique_ref {
1043  ***     93                  100      0    776       my $class = shift;
1044          93                               3426       my %data = %$class;
1045          93    100                        1021       my $index = defined $_[0] ? shift : 0;
1046          93                               6672       _index_message1($index, \%data);
1047          92                                340       return ${$data{'xunique'}}[$index];
              92                               2963   
1048                                                  }
1049                                                  
1050                                                  sub get_unique_all {
1051  ***      8                  100      0     77       my $class = shift;
1052           8                                535       my %data = %$class;
1053           8                                152       return $data{'xunique'};
1054                                                  }
1055                                                  
1056                                                  sub get_Lonly {
1057  ***     28                  100      0  14895       my ($class, $index) = @_;
1058          28                                815       my $method = (caller(0))[3];
1059          28                               1242       $method =~ s/.*::(\w*)$/$1/;
1060          28                                557       carp "When comparing 3 or more lists, \&$method or its alias defaults to \n  ", 'get_unique()', ".  Though the results returned are valid, \n    please consider re-coding with that method: $!";
1061          28                                806       get_unique($class, $index);
1062                                                  }    
1063                                                  
1064                                                  sub get_Lonly_ref {
1065  ***     32                  100      0    246       my ($class, $index) = @_;
1066          32                               2345       my $method = (caller(0))[3];
1067          32                               7141       $method =~ s/.*::(\w*)$/$1/;
1068          32                                657       carp "When comparing 3 or more lists, \&$method or its alias defaults to \n  ", 'get_unique_ref()', ".  Though the results returned are valid, \n    please consider re-coding with that method: $!";
1069          32                               1171       get_unique_ref($class, $index);
1070                                                  }    
1071                                                  
1072                                                  *get_Aonly = \&get_Lonly;
1073                                                  *get_Aonly_ref = \&get_Lonly_ref;
1074                                                  
1075                                                  sub get_complement {
1076  ***     48                  100      0    392       my $class = shift;
1077          48                               2408       my %data = %$class;
1078          48    100                        1439       my $index = defined $_[0] ? shift : 0;
1079          48                                171       return @{ get_complement_ref($class, $index) };
              48                                284   
1080                                                  }
1081                                                  
1082                                                  sub get_complement_ref {
1083  ***     97                  100      0    446       my $class = shift;
1084          97                               7458       my %data = %$class;
1085          97    100                        1161       my $index = defined $_[0] ? shift : 0;
1086          97                               1023       _index_message1($index, \%data);
1087          96                                379       return ${$data{'xcomplement'}}[$index];
              96                               3016   
1088                                                  }
1089                                                  
1090                                                  sub get_complement_all {
1091  ***      8                  100      0     72       my $class = shift;
1092           8                                382       my %data = %$class;
1093           8                                139       return $data{'xcomplement'};
1094                                                  }
1095                                                  
1096                                                  sub get_Ronly {
1097  ***     32                  100      0    240       my ($class, $index) = @_;
1098          32                                681       my $method = (caller(0))[3];
1099          32                               1339       $method =~ s/.*::(\w*)$/$1/;
1100          32                                605       carp "When comparing 3 or more lists, \&$method or its alias defaults to \n  ", 'get_complement()', ".  Though the results returned are valid, \n    please consider re-coding with that method: $!";
1101          32                               1563       &get_complement($class, $index);
1102                                                  }    
1103                                                  
1104                                                  sub get_Ronly_ref {
1105  ***     32                  100      0    229       my ($class, $index) = @_;
1106          32                                707       my $method = (caller(0))[3];
1107          32                               1430       $method =~ s/.*::(\w*)$/$1/;
1108          32                                648       carp "When comparing 3 or more lists, \&$method or its alias defaults to \n  ", 'get_complement_ref()', ".  Though the results returned are valid, \n    please consider re-coding with that method: $!";
1109          32                                995       &get_complement_ref($class, $index);
1110                                                  }    
1111                                                  
1112                                                  *get_Bonly = \&get_Ronly;
1113                                                  *get_Bonly_ref = \&get_Ronly_ref;
1114                                                  
1115                                                  sub get_symmetric_difference {
1116  ***     32                  100      0    161       return @{ get_symmetric_difference_ref(shift) };
              32                                234   
1117                                                  }
1118                                                  
1119                                                  sub get_symmetric_difference_ref {
1120  ***     64                  100      0    364       my $class = shift;
1121          64                             131001       my %data = %$class;
1122          64                               1835       return $data{'symmetric_difference'};
1123                                                  }
1124                                                  
1125                                                  *get_symdiff  = \&get_symmetric_difference;
1126                                                  *get_symdiff_ref  = \&get_symmetric_difference_ref;
1127                                                  
1128                                                  sub get_LorRonly {
1129  ***     16                  100      0    114       my $class = shift;
1130          16                                427       my $method = (caller(0))[3];
1131          16                                848       $method =~ s/.*::(\w*)$/$1/;
1132          16                                338       carp "When comparing 3 or more lists, \&$method or its alias defaults to \n  ", 'get_symmetric_difference()', ".  Though the results returned are valid, \n    please consider re-coding with that method: $!";
1133          16                                497       get_symmetric_difference($class);
1134                                                  }    
1135                                                  
1136                                                  sub get_LorRonly_ref {
1137  ***     16                  100      0    115       my $class = shift;
1138          16                                397       my $method = (caller(0))[3];
1139          16                                758       $method =~ s/.*::(\w*)$/$1/;
1140          16                                326       carp "When comparing 3 or more lists, \&$method or its alias defaults to \n  ", 'get_symmetric_difference_ref()', ".  Though the results returned are valid, \n    please consider re-coding with that method: $!";
1141          16                                438       get_symmetric_difference_ref($class);
1142                                                  }    
1143                                                  
1144                                                  *get_AorBonly = \&get_LorRonly;
1145                                                  *get_AorBonly_ref = \&get_LorRonly_ref;
1146                                                  
1147                                                  sub get_nonintersection {
1148  ***      8                  100      0     42       return @{ get_nonintersection_ref(shift) };
               8                                 78   
1149                                                  }
1150                                                  
1151                                                  sub get_nonintersection_ref {
1152  ***     16                  100      0    113       my $class = shift;
1153          16                                981       my %data = %$class;
1154          16                                569       return $data{'nonintersection'};
1155                                                  }
1156                                                  
1157                                                  sub is_LsubsetR {
1158  ***     42                  100      0    299       my $class = shift;
1159          42                               3426       my %data = %$class;
1160          42                                656       my ($index_left, $index_right) = _index_message2(\%data, @_);
1161          40                                192       my @subset_array = @{$data{'xsubset'}};
              40                                439   
1162          40                                268       my $subset_status = $subset_array[$index_left][$index_right];
1163          40                                514       return $subset_status;
1164                                                  }
1165                                                  
1166                                                  *is_AsubsetB = \&is_LsubsetR;
1167                                                  
1168                                                  sub is_RsubsetL {
1169  ***     16                  100      0     99       my $class = shift;
1170          16                               4701       my %data = %$class;
1171          16                                631       my $method = (caller(0))[3];
1172          16                                763       $method =~ s/.*::(\w*)$/$1/;
1173          16                               4011       carp "When comparing 3 or more lists, \&$method or its alias is restricted to \n  asking if the list which is the 2nd argument to the constructor \n    is a subset of the list which is the 1st argument.\n      For greater flexibility, please re-code with \&is_LsubsetR: $!";
1174          16                                555       @_ = (1,0);
1175          16                                175       my ($index_left, $index_right) = _index_message2(\%data, @_);
1176          16                                 88       my @subset_array = @{$data{'xsubset'}};
              16                               9614   
1177          16                                122       my $subset_status = $subset_array[$index_left][$index_right];
1178          16                                506       return $subset_status;
1179                                                  }
1180                                                  
1181                                                  *is_BsubsetA = \&is_RsubsetL;
1182                                                  
1183                                                  sub is_LequivalentR {
1184  ***     26                  100      0    224       my $class = shift;
1185          26                               1250       my %data = %$class;
1186          26                                420       my ($index_left, $index_right) = _index_message2(\%data, @_);
1187          24                                128       my @equivalent_array = @{$data{'xequivalent'}};
              24                                250   
1188          24                                177       my $equivalent_status = $equivalent_array[$index_left][$index_right];
1189          24                                312       return $equivalent_status;
1190                                                  }
1191                                                  
1192                                                  *is_LeqvlntR = \&is_LequivalentR;
1193                                                  
1194                                                  sub is_LdisjointR {
1195  ***     29                  100      0    239       my $class = shift;
1196          29                               1303       my %data = %$class;
1197          29                              76889       my ($index_left, $index_right) = _index_message2(\%data, @_);
1198          27                                138       my @disjoint_array = @{$data{'xdisjoint'}};
              27                                449   
1199          27                                176       my $disjoint_status = $disjoint_array[$index_left][$index_right];
1200          27                                553       return $disjoint_status;
1201                                                  }
1202                                                  
1203                                                  sub is_member_which {
1204  ***     88                  100      0    443       return @{ is_member_which_ref(@_) };
              88                                572   
1205                                                  }    
1206                                                  
1207                                                  sub is_member_which_ref {
1208  ***    177                  100      0   2961       my $class = shift;
1209  ***    177    100     66                 4143       croak "Method call requires exactly 1 argument (no references):  $!"
1210                                                          unless (@_ == 1 and ref($_[0]) ne 'ARRAY');
1211         176                              21994       my %data = %$class;
1212         176                               1547       my %seen = %{$data{'seen'}};
             176                               3585   
1213         176                               4590       my ($arg, @found);
1214         176                                837       $arg = shift;
1215         176                               8170       foreach (sort keys %seen) {
1216         880    100                        8483           push @found, $_ if (exists $seen{$_}{$arg});
1217                                                      }
1218         176                               4600       return \@found;
1219                                                  }    
1220                                                  
1221                                                  sub are_members_which {
1222  ***      9                  100      0     76       my $class = shift;
1223  ***      9    100     66                 1781       croak "Method call requires exactly 1 argument which must be an anonymous array\n    holding the items to be tested:  $!"
1224                                                          unless (@_ == 1 and ref($_[0]) eq 'ARRAY');
1225           8                               1960       my %data = %$class;
1226           8                                107       my %seen = %{$data{'seen'}};
               8                                155   
1227           8                                117       my (@args, %found);
1228           8                                 33       @args = @{$_[0]};
               8                                426   
1229                                                      for (my $i=0; $i<=$#args; $i++) {
1230          88                                202           my (@not_found);
1231          88                               1003           foreach (sort keys %seen) {
1232         440                               3784               exists ${$seen{$_}}{$args[$i]}
             216                               1432   
1233         440    100                         880                   ? push @{$found{$args[$i]}}, $_
1234                                                                  : push @not_found, $_;
1235                                                          }
1236          88    100                        9268           $found{$args[$i]} = [] if (@not_found == keys %seen);
1237           8                                102       }
1238           8                                273       return \%found;
1239                                                  }    
1240                                                  
1241                                                  sub is_member_any {
1242  ***     89                  100      0    614       my $class = shift;
1243  ***     89    100     66                 1492       croak "Method call requires exactly 1 argument (no references):  $!"
1244                                                          unless (@_ == 1 and ref($_[0]) ne 'ARRAY');
1245          88                               3024       my %data = %$class;
1246          88                                682       my %seen = %{$data{'seen'}};
              88                               1386   
1247          88                                528       my ($arg, $k);
1248          88                                366       $arg = shift;
1249          88                                682       while ( $k = each %seen ) {
1250         176    100                        3047           return 1 if (defined $seen{$k}{$arg});
1251                                                      }
1252           8                                132       return 0;
1253                                                  }    
1254                                                  
1255                                                  sub are_members_any {
1256  ***      9                  100      0     66       my $class = shift;
1257  ***      9    100     66                  294       croak "Method call requires exactly 1 argument which must be an anonymous array\n    holding the items to be tested:  $!"
1258                                                          unless (@_ == 1 and ref($_[0]) eq 'ARRAY');
1259           8                                392       my %data = %$class;
1260           8                                 73       my %seen = %{$data{'seen'}};
               8                                182   
1261           8                                 60       my (@args, %present);
1262           8                                 33       @args = @{$_[0]};
               8                                187   
1263                                                      for (my $i=0; $i<=$#args; $i++) {
1264          88                                795           foreach (keys %seen) {
1265         440    100                       17295               unless (defined $present{$args[$i]}) {
1266         176    100                        1910                   $present{$args[$i]} = 1 if $seen{$_}{$args[$i]};
1267                                                              }
1268                                                          }
1269          88    100                        1148           $present{$args[$i]} = 0 if (! defined $present{$args[$i]});
1270           8                                159       }
1271           8                                253       return \%present;
1272                                                  }    
1273                                                  
1274                                                  sub print_subset_chart {
1275  ***      8                  100      0     68       my $class = shift;
1276           8                                340       my %data = %$class;
1277           8                                 76       my @subset_array = @{$data{'xsubset'}};
               8                                113   
1278           8                                 50       my $title = 'subset';
1279           8                                 93       _chart_engine_multiple(\@subset_array, $title);
1280                                                  }
1281                                                  
1282                                                  sub print_equivalence_chart {
1283  ***      8                  100      0     85       my $class = shift;
1284           8                                406       my %data = %$class;
1285           8                                 80       my @equivalent_array = @{$data{'xequivalent'}};
               8                                175   
1286           8                                 54       my $title = 'Equivalence';
1287           8                                 94       _chart_engine_multiple(\@equivalent_array, $title);
1288                                                  }
1289                                                  
1290                                                  sub get_bag {
1291  ***      8                  100      0     45       return @{ get_bag_ref(shift) };
               8                                 72   
1292                                                  }
1293                                                  
1294                                                  sub get_bag_ref {
1295  ***     16                  100      0    112       my $class = shift;
1296          16                                716       my %data = %$class;
1297          16                               1478       return $data{'bag'};
1298                                                  }
1299                                                  
1300                                                  sub get_version {
1301  ***      8                  100      0     79       return $List::Compare::VERSION;
1302                                                  }
1303                                                  
1304                                                  1;
1305                                                  
1306                                                  ################################################################################
1307                                                  
1308                                                  package List::Compare::Multiple::Accelerated;
1309          18                  100           678   use Carp;
              18                                111   
              18                                513   
1310          18                  100           354   use List::Compare::Base::_Auxiliary qw(
1311                                                      _argument_checker_0
1312                                                      _prepare_listrefs
1313                                                      _subset_subengine
1314                                                      _chart_engine_multiple
1315                                                      _equivalent_subengine
1316                                                      _index_message3
1317                                                      _index_message4
1318                                                      _prepare_listrefs 
1319                                                      _subset_engine_multaccel 
1320          18                                 74   );
              18                                359   
1321          18                  100           304   use List::Compare::Base::_Auxiliary qw(:calculate);
              18                                 73   
              18                                225   
1322          18                  100         14527   use List::Compare::Base::_Engine    qw(
1323                                                      _unique_all_engine
1324                                                      _complement_all_engine
1325          18                                143   );
              18                                781   
1326                                                  
1327                                                  sub _init {
1328          28                  100           156       my $self = shift;
1329          28                                138       my $unsortflag = shift;
1330          28                                337       my @listrefs = _argument_checker_0(@_);
1331          22                                118       my %data = ();
1332                                                      for (my $i=0; $i<=$#listrefs; $i++) {
1333         109                               1251           $data{$i} = $listrefs[$i]; 
1334          22                                128       }
1335          22    100                         239       $data{'unsort'} = $unsortflag ? 1 : 0;
1336          22                                261       return \%data;
1337                                                  }    
1338                                                  
1339                                                  sub get_union {
1340  ***      8                  100      0    230       return @{ get_union_ref(shift) };
               8                                 81   
1341                                                  }
1342                                                  
1343                                                  sub get_union_ref {
1344  ***     16                  100      0    125       my $class = shift;
1345          16                               8353       my %data = %$class;
1346          16                                153       my $unsortflag = $data{'unsort'};
1347          16                                212       my $aref = _prepare_listrefs(\%data);
1348                                                  
1349          16                                216       my $unionref = _calculate_union_only($aref);
1350          16    100                         121       my @union = $unsortflag ? keys %{$unionref} : sort(keys %{$unionref});
               8                                179   
               8                                253   
1351          16                                673       return \@union;
1352                                                  }
1353                                                  
1354                                                  sub get_intersection {
1355  ***      8                  100      0     88       return @{ get_intersection_ref(shift) };
               8                                 77   
1356                                                  }
1357                                                  
1358                                                  sub get_intersection_ref {
1359  ***     16                  100      0    100       my $class = shift;
1360          16                                554       my %data = %$class;
1361          16                                130       my $unsortflag = $data{'unsort'};
1362          16                                466       my $aref = _prepare_listrefs(\%data);
1363                                                  
1364                                                      # Calculate overall intersection
1365                                                      # Inputs:  %xintersection
1366          16                                170       my $xintersectionref = _calculate_xintersection_only($aref);
1367          16                                153       my $intersectionref = _calculate_hash_intersection($xintersectionref);
1368           8                                 84       my @intersection = 
1369          16    100                         129           $unsortflag ? keys %{$intersectionref} : sort(keys %{$intersectionref});
               8                                175   
1370          16                                903       return \@intersection;
1371                                                  }
1372                                                  
1373                                                  sub get_nonintersection {
1374  ***      8                  100      0     59       return @{ get_nonintersection_ref(shift) };
               8                                 86   
1375                                                  }
1376                                                  
1377                                                  sub get_nonintersection_ref {
1378  ***     16                  100      0    131       my $class = shift;
1379          16                                582       my %data = %$class;
1380          16                                142       my $unsortflag = $data{'unsort'};
1381          16                                216       my $aref = _prepare_listrefs(\%data);
1382                                                  
1383          16                                175       my ($unionref, $xintersectionref) = 
1384                                                          _calculate_union_xintersection_only($aref);
1385          16    100                         177       my @union = $unsortflag ? keys %{$unionref} : sort(keys %{$unionref});
               8                                344   
               8                                339   
1386          16                                260       my $intersectionref = _calculate_hash_intersection($xintersectionref);
1387                                                  
1388                                                      # Calculate nonintersection
1389                                                      # Inputs:  @union    %intersection
1390          16                                 79       my (@nonintersection);
1391          16                                 94       foreach (@union) {
1392         160    100                         372           push(@nonintersection, $_) unless exists ${$intersectionref}{$_};
             160                               5072   
1393                                                      }
1394          16                               1193       return \@nonintersection;
1395                                                  }
1396                                                  
1397                                                  sub get_shared {
1398  ***      8                  100      0     42       return @{ get_shared_ref(shift) };
               8                                 79   
1399                                                  }
1400                                                  
1401                                                  sub get_shared_ref {
1402  ***     16                  100      0    137       my $class = shift;
1403          16                                484       my %data = %$class;
1404          16                                212       my $unsortflag = $data{'unsort'};
1405          16                               3865       my $aref = _prepare_listrefs(\%data);
1406                                                  
1407                                                      # Calculate @shared
1408                                                      # Inputs:  %xintersection
1409          16                                157       my $xintersectionref = _calculate_xintersection_only($aref);
1410          16                                144       my $sharedref = _calculate_hash_shared($xintersectionref);
1411          16    100                         281       my @shared = $unsortflag ? keys %{$sharedref} : sort(keys %{$sharedref});
               8                                201   
               8                                302   
1412          16                               1093       return \@shared;
1413                                                  }
1414                                                  
1415                                                  sub get_symmetric_difference {
1416  ***     32                  100      0    177       return @{ get_symmetric_difference_ref(shift) };
              32                                301   
1417                                                  }
1418                                                  
1419                                                  sub get_symmetric_difference_ref {
1420  ***     64                  100      0    516       my $class = shift;
1421          64                               1892       my %data = %$class;
1422          64                               4126       my $unsortflag = $data{'unsort'};
1423          64                                964       my $aref = _prepare_listrefs(\%data);
1424                                                  
1425          64                                672       my ($unionref, $xintersectionref) = 
1426                                                          _calculate_union_xintersection_only($aref);
1427          64    100                         696       my @union = $unsortflag ? keys %{$unionref} : sort(keys %{$unionref});
              32                                864   
              32                               1428   
1428                                                  
1429          64                                874       my $sharedref = _calculate_hash_shared($xintersectionref);
1430          64                                248       my (@symmetric_difference);
1431          64                                307       foreach (@union) {
1432         640    100                        1396           push(@symmetric_difference, $_) unless exists ${$sharedref}{$_};
             640                              24274   
1433                                                      }
1434          64                               4740       return \@symmetric_difference;
1435                                                  }
1436                                                  
1437                                                  *get_symdiff = \&get_symmetric_difference;
1438                                                  *get_symdiff_ref = \&get_symmetric_difference_ref;
1439                                                  
1440                                                  sub get_LorRonly {
1441  ***     16                  100      0    137       my $class = shift;
1442          16                                542       my $method = (caller(0))[3];
1443          16                               1761       $method =~ s/.*::(\w*)$/$1/;
1444          16                                417       carp "When comparing 3 or more lists, \&$method or its alias defaults to \n  ", 'get_symmetric_difference()', ".  Though the results returned are valid, \n    please consider re-coding with that method: $!";
1445          16                                533       get_symmetric_difference($class);
1446                                                  }    
1447                                                  
1448                                                  sub get_LorRonly_ref {
1449  ***     16                  100      0    193       my $class = shift;
1450          16                                428       my $method = (caller(0))[3];
1451          16                               1034       $method =~ s/.*::(\w*)$/$1/;
1452          16                                644       carp "When comparing 3 or more lists, \&$method or its alias defaults to \n  ", 'get_symmetric_difference_ref()', ".  Though the results returned are valid, \n    please consider re-coding with that method: $!";
1453          16                                700       get_symmetric_difference_ref($class);
1454                                                  }    
1455                                                  
1456                                                  *get_AorBonly = \&get_LorRonly;
1457                                                  *get_AorBonly_ref = \&get_LorRonly_ref;
1458                                                  
1459                                                  sub get_unique {
1460  ***     44                  100      0    314       my $class = shift;
1461          44                               2238       my %data = %$class;
1462          44    100                         659       my $index = defined $_[0] ? shift : 0;
1463          44                                169       return @{ get_unique_ref($class, $index) };
              44                                264   
1464                                                  }
1465                                                  
1466                                                  sub get_unique_ref {
1467  ***     93                  100      0   4319       my $class = shift;
1468          93                               2055       my %data = %$class;
1469          93    100                         901       my $index = defined $_[0] ? shift : 0;
1470          93                               1240       my $aref = _prepare_listrefs(\%data);
1471          93                                462       _index_message3($index, $#{$aref});
              93                               4858   
1472                                                  
1473          92                               1099       my $unique_all_ref = _unique_all_engine($aref);
1474          92                                427       return ${$unique_all_ref}[$index];
              92                               2943   
1475                                                  }
1476                                                  
1477                                                  sub get_unique_all {
1478  ***      8                  100      0     73       my $class = shift;
1479           8                                260       my %data = %$class;
1480           8                                126       my $aref = _prepare_listrefs(\%data);
1481           8                                106       return _unique_all_engine($aref);
1482                                                  }
1483                                                  
1484                                                  sub get_Lonly {
1485  ***     28                  100      0    253       my ($class, $index) = @_;
1486          28                               1192       my $method = (caller(0))[3];
1487          28                               2397       $method =~ s/.*::(\w*)$/$1/;
1488          28                                783       carp "When comparing 3 or more lists, \&$method or its alias defaults to \n  ", 'get_unique()', ".  Though the results returned are valid, \n    please consider re-coding with that method: $!";
1489          28                                904       get_unique($class, $index);
1490                                                  }    
1491                                                  
1492                                                  sub get_Lonly_ref {
1493  ***     32                  100      0    254       my ($class, $index) = @_;
1494          32                                940       my $method = (caller(0))[3];
1495          32                               1744       $method =~ s/.*::(\w*)$/$1/;
1496          32                                892       carp "When comparing 3 or more lists, \&$method or its alias defaults to \n  ", 'get_unique_ref()', ".  Though the results returned are valid, \n    please consider re-coding with that method: $!";
1497          32                               1172       get_unique_ref($class, $index);
1498                                                  }    
1499                                                  
1500                                                  *get_Aonly = \&get_Lonly;
1501                                                  *get_Aonly_ref = \&get_Lonly_ref;
1502                                                  
1503                                                  sub get_complement {
1504  ***     48                  100      0    404       my $class = shift;
1505          48                               1398       my %data = %$class;
1506          48    100                         963       my $index = defined $_[0] ? shift : 0;
1507          48                                270       return @{ get_complement_ref($class, $index) };
              48                                315   
1508                                                  }
1509                                                  
1510                                                  sub get_complement_ref {
1511  ***     97                  100      0    596       my $class = shift;
1512          97                               2087       my %data = %$class;
1513          97    100                        1045       my $index = defined $_[0] ? shift : 0;
1514          97                                468       my $unsortflag = $data{'unsort'};
1515          97                               1673       my $aref = _prepare_listrefs(\%data);
1516          97                                474       _index_message3($index, $#{$aref});
              97                               1992   
1517                                                  
1518          96                               1198       my $complement_all_ref = _complement_all_engine($aref, $unsortflag );
1519          96                               3977       return ${$complement_all_ref}[$index];
              96                               6868   
1520                                                  }
1521                                                  
1522                                                  sub get_complement_all {
1523  ***      8                  100      0     77       my $class = shift;
1524           8                                281       my %data = %$class;
1525           8                                131       my $aref = _prepare_listrefs(\%data);
1526           8                                108       return _complement_all_engine($aref);
1527                                                  }
1528                                                  
1529                                                  sub get_Ronly {
1530  ***     32                  100      0    347       my ($class, $index) = @_;
1531          32                               1011       my $method = (caller(0))[3];
1532          32                               2644       $method =~ s/.*::(\w*)$/$1/;
1533          32                                733       carp "When comparing 3 or more lists, \&$method or its alias defaults to \n  ", 'get_complement()', ".  Though the results returned are valid, \n    please consider re-coding with that method: $!";
1534          32                                929       &get_complement($class, $index);
1535                                                  }    
1536                                                  
1537                                                  sub get_Ronly_ref {
1538  ***     32                  100      0    318       my ($class, $index) = @_;
1539          32                               1181       my $method = (caller(0))[3];
1540          32                               5380       $method =~ s/.*::(\w*)$/$1/;
1541          32                               1034       carp "When comparing 3 or more lists, \&$method or its alias defaults to \n  ", 'get_complement_ref()', ".  Though the results returned are valid, \n    please consider re-coding with that method: $!";
1542          32                               1159       &get_complement_ref($class, $index);
1543                                                  }    
1544                                                  
1545                                                  *get_Bonly = \&get_Ronly;
1546                                                  *get_Bonly_ref = \&get_Ronly_ref;
1547                                                  
1548                                                  sub is_LsubsetR {
1549  ***     42                  100      0    390       my $class = shift;
1550          42                               1383       my %data = %$class;
1551          42                                675       my $subset_status = _subset_engine_multaccel(\%data, @_);
1552          40                                791       return $subset_status;
1553                                                  }
1554                                                  
1555                                                  *is_AsubsetB = \&is_LsubsetR;
1556                                                  
1557                                                  sub is_RsubsetL {
1558  ***     16                  100      0    290       my $class = shift;
1559          16                               2330       my %data = %$class;
1560                                                  
1561          16                                617       my $method = (caller(0))[3];
1562          16                                902       $method =~ s/.*::(\w*)$/$1/;
1563          16                                487       carp "When comparing 3 or more lists, \&$method or its alias is restricted to \n  asking if the list which is the 2nd argument to the constructor \n    is a subset of the list which is the 1st argument.\n      For greater flexibility, please re-code with \&is_LsubsetR: $!";
1564          16                                686       @_ = (1,0);
1565                                                  
1566          16                                225       my $subset_status = _subset_engine_multaccel(\%data, @_);
1567          16                                546       return $subset_status;
1568                                                  }
1569                                                  
1570                                                  *is_BsubsetA = \&is_RsubsetL;
1571                                                  
1572                                                  sub is_LequivalentR {
1573  ***     26                  100      0    264       my $class = shift;
1574          26                                995       my %data = %$class;
1575          26                                435       my $aref = _prepare_listrefs(\%data);
1576          26                                135       my ($index_left, $index_right) = _index_message4($#{$aref}, @_);
              26                                430   
1577                                                  
1578          24                                250       my $xequivalentref = _equivalent_subengine($aref);
1579          24                                107       return ${$xequivalentref}[$index_left][$index_right];
              24                                605   
1580                                                  }
1581                                                  
1582                                                  *is_LeqvlntR = \&is_LequivalentR;
1583                                                  
1584                                                  sub is_LdisjointR {
1585  ***      3                  100      0     27       my $class = shift;
1586           3                                116       my %data = %$class;
1587           3                                 55       my $aref = _prepare_listrefs(\%data);
1588           3                                 16       my ($index_left, $index_right) = _index_message4($#{$aref}, @_);
               3                                 48   
1589                                                  
1590           3                                 16       my (@xdisjoint);
1591           3                                 27       my $xintersectionref = _calculate_xintersection_only($aref);
1592          21                                167       for (my $i = 0; $i <= $#{$aref}; $i++) {
1593          18                                 41           foreach (keys %{$xintersectionref}) {
              18                                198   
1594         270                               1270               my ($left, $right) = split /_/, $_;
1595         270                               3029               $xdisjoint[$left][$right] = $xdisjoint[$right][$left] = 
1596         270    100                         837                   ! scalar(keys %{${$xintersectionref}{$_}}) ? 1 : 0;
             270                                522   
1597                                                          }
1598          18                                184           $xdisjoint[$i][$i] = 0; 
1599           3                                 18       }
1600           3                                 18       my $disjoint_status = $xdisjoint[$index_left][$index_right];
1601           3                                183       return $disjoint_status;
1602                                                  }
1603                                                  
1604                                                  sub is_member_which {
1605  ***     88                  100      0    572       return @{ is_member_which_ref(@_) };
              88                                624   
1606                                                  }    
1607                                                  
1608                                                  sub is_member_which_ref {
1609  ***    177                  100      0   1272       my $class = shift;
1610  ***    177    100     66                 4526       croak "Method call requires exactly 1 argument (no references):  $!"
1611                                                          unless (@_ == 1 and ref($_[0]) ne 'ARRAY');
1612         176                                801       my %data = %{$class};
             176                              11794   
1613         176                              11188       my $aref = _prepare_listrefs(\%data);
1614         176                               1498       my $seenref = _calculate_seen_only($aref);
1615         176                                852       my ($arg, @found);
1616         176                               1257       $arg = shift;
1617         176                                591       foreach (sort keys %{$seenref}) {
             176                              21150   
1618         880    100                        2417           push @found, $_ if (exists ${$seenref}{$_}{$arg});
             880                              16799   
1619                                                      }
1620         176                              10997       return \@found;
1621                                                  }    
1622                                                  
1623                                                  sub are_members_which {
1624  ***      9                  100      0     73       my $class = shift;
1625                                                  #    croak "Method call needs at least one argument:  $!" unless (@_);
1626  ***      9    100     66                  418       croak "Method call requires exactly 1 argument which must be an anonymous array\n    holding the items to be tested:  $!"
1627                                                          unless (@_ == 1 and ref($_[0]) eq 'ARRAY');
1628           8                                 42       my %data = %{$class};
               8                                280   
1629           8                                114       my $aref = _prepare_listrefs(\%data);
1630           8                                 78       my $seenref = _calculate_seen_only($aref);
1631           8                                 48       my (@args, %found);
1632           8                                121       @args = @{$_[0]};
               8                                355   
1633                                                  #    @args = (@_ == 1 and ref($_[0]) eq 'ARRAY') 
1634                                                  #        ?  @{$_[0]}
1635                                                  #        :  @_;
1636                                                      for (my $i=0; $i<=$#args; $i++) {
1637          88                                269           my (@not_found);
1638          88                                272           foreach (sort keys %{$seenref}) {
              88                               4784   
1639         440                                909               exists ${${$seenref}{$_}}{$args[$i]}
             440                               7133   
             216                               1634   
1640         440    100                         904                   ? push @{$found{$args[$i]}}, $_
1641                                                                  : push @not_found, $_;
1642                                                          }
1643          88    100                         505           $found{$args[$i]} = [] if (@not_found == keys %{$seenref});
              88                               1633   
1644           8                                 98       }
1645           8                                344       return \%found;
1646                                                  }    
1647                                                  
1648                                                  sub is_member_any {
1649  ***     89                  100      0    794       my $class = shift;
1650  ***     89    100     66                 7659       croak "Method call requires exactly 1 argument (no references):  $!"
1651                                                          unless (@_ == 1 and ref($_[0]) ne 'ARRAY');
1652          88                               2233       my %data = %$class;
1653          88                               1242       my $aref = _prepare_listrefs(\%data);
1654          88                                772       my $seenref = _calculate_seen_only($aref);
1655          88                                523       my ($arg, $k);
1656          88                                650       $arg = shift;
1657          88                                315       while ( $k = each %{$seenref} ) {
             216                               2204   
1658         208    100                        1546           return 1 if (defined ${$seenref}{$k}{$arg});
             208                               2950   
1659                                                      }
1660           8                                281       return 0;
1661                                                  }    
1662                                                  
1663                                                  sub are_members_any {
1664  ***      9                  100      0     78       my $class = shift;
1665                                                  #    croak "Method call needs at least one argument:  $!" unless (@_);
1666  ***      9    100     66                  290       croak "Method call requires exactly 1 argument which must be an anonymous array\n    holding the items to be tested:  $!"
1667                                                          unless (@_ == 1 and ref($_[0]) eq 'ARRAY');
1668           8                                396       my %data = %$class;
1669           8                                120       my $aref = _prepare_listrefs(\%data);
1670           8                                 80       my $seenref = _calculate_seen_only($aref);
1671           8                                 50       my (@args, %present);
1672           8                                 30       @args = @{$_[0]};
               8                                292   
1673                                                  #    @args = (@_ == 1 and ref($_[0]) eq 'ARRAY') 
1674                                                  #        ?  @{$_[0]}
1675                                                  #        :  @_;
1676                                                      for (my $i=0; $i<=$#args; $i++) {
1677          88                                265           foreach (keys %{$seenref}) {
              88                                613   
1678         440    100                        3148               unless (defined $present{$args[$i]}) {
1679         208    100                         478                   $present{$args[$i]} = 1 if ${$seenref}{$_}{$args[$i]};
             208                               2419   
1680                                                              }
1681                                                          }
1682          88    100                        1193           $present{$args[$i]} = 0 if (! defined $present{$args[$i]});
1683           8                                 91       }
1684           8                                404       return \%present;
1685                                                  }    
1686                                                  
1687                                                  sub print_subset_chart {
1688  ***      8                  100      0    231       my $class = shift;
1689           8                                296       my %data = %$class;
1690           8                                138       my $aref = _prepare_listrefs(\%data);
1691           8                                 86       my $xsubsetref = _subset_subengine($aref);
1692           8                                 54       my $title = 'subset';
1693           8                                 90       _chart_engine_multiple($xsubsetref, $title);
1694                                                  }
1695                                                  
1696                                                  sub print_equivalence_chart {
1697  ***      8                  100      0     81       my $class = shift;
1698           8                               9782       my %data = %$class;
1699           8                                188       my $aref = _prepare_listrefs(\%data);
1700           8                                 87       my $xequivalentref = _equivalent_subengine($aref);
1701           8                                 49       my $title = 'Equivalence';
1702           8                                 77       _chart_engine_multiple($xequivalentref, $title);
1703                                                  }
1704                                                  
1705                                                  sub get_bag {
1706  ***      8                  100      0     46       return @{ get_bag_ref(shift) };
               8                                 81   
1707                                                  }
1708                                                  
1709                                                  sub get_bag_ref {
1710  ***     16                  100      0    138       my $class = shift;
1711          16                                532       my %data = %$class;
1712          16                                140       my $unsortflag = $data{'unsort'};
1713          16                                215       my $aref = _prepare_listrefs(\%data);
1714          16                                 78       my (@bag);
1715          16                                207       my @listrefs = @{$aref};
              16                                201   
1716          16    100                         238       if (ref($listrefs[0]) eq 'ARRAY') { 
1717           8                                 52           foreach my $lref (@listrefs) {
1718          40                                100               foreach my $el (@{$lref}) {
              40                                390   
1719         256                               1443                   push(@bag, $el);
1720                                                              }
1721                                                          }
1722                                                      } else {
1723           8                                 51           foreach my $lref (@listrefs) {
1724          40                                 98               foreach my $key (keys %{$lref}) {
              40                                408   
1725         472                               7170                   for (my $j=1; $j <= ${$lref}{$key}; $j++) {
1726         256                               1455                       push(@bag, $key);
1727         216                                484                   }
1728                                                              }
1729                                                          }
1730                                                      }
1731          16    100                         374       @bag = sort(@bag) unless $unsortflag;
1732          16                               1253       return \@bag;
1733                                                  }
1734                                                  
1735                                                  sub get_version {
1736  ***      8                  100      0     78       return $List::Compare::VERSION;
1737                                                  }
1738                                                  
1739                                                  1;
1740                                                  
1741                                                  
1742                                                  __END__


Branches
--------

line  err      %   true  false   branch
----- --- ------ ------ ------   ------
15           100    111    119   if (@_ == 1 and ref $_[0] eq 'HASH') { }
19           100      1    110   unless ${$argref;}{'lists'} and ref ${$argref;}{'lists'} eq 'ARRAY'
21           100     54     56   ${$argref;}{'unsorted'} ? :
22           100     64     46   ${$argref;}{'accelerated'} ? :
25           100     54     65   $args[0] eq '-u' || $args[0] eq '--unsorted' ? :
27           100     65     54   if $args[0] eq '-a' or $args[0] eq '--accelerated'
32           100    226      3   if (ref $args[0] eq 'ARRAY' or ref $args[0] eq 'HASH') { }
34           100     14    391   unless (ref $nextarg eq ref $args[0])
42           100     17    212   unless $argument_error_status
46           100     63    149   if (@args > 2) { }
             100    148      1   elsif (@args == 2) { }
47           100     28     35   if ($accelerated) { }
55           100     89     59   if ($accelerated) { }
67           100    108    103   $unsorted ? :
79           100     35     24   if (ref $refL eq 'HASH') { }
99           100     32     21   $unsortflag ? :
106          100    202     78   exists $seenR{$_} ? :
111          100     55    202   unless exists $intersection{$_}
116          100     11     42   if keys %LorRonly == 0
119          100     42    140   if (not exists $seenR{$_})
125          100     31    223   if (not exists $seenL{$_})
133          100     32     21   $unsortflag ? :
135          100     32     21   $unsortflag ? :
137          100     32     21   $unsortflag ? :
139          100     32     21   $unsortflag ? :
141          100     32     21   $unsortflag ? :
146          100     12     41   keys %intersection == 0 ? :
311          100      1    176   unless @_ == 1 and ref $_[0] ne 'ARRAY'
316          100    112     64   if (exists ${$data{'seenL'};}{$arg})
317          100    112     64   if (exists ${$data{'seenR'};}{$arg})
318          100     48    128   if (not exists ${$data{'seenL'};}{$arg} and not exists ${$data{'seenR'};}{$arg})
326          100      1      8   unless @_ == 1 and ref $_[0] eq 'ARRAY'
332          100     56     32   if (exists ${$data{'seenL'};}{$args[$i]})
333          100     56     32   if (exists ${$data{'seenR'};}{$args[$i]})
334          100     24     64   if (not exists ${$data{'seenL'};}{$args[$i]} and not exists ${$data{'seenR'};}{$args[$i]})
343          100      1     88   unless @_ == 1 and ref $_[0] ne 'ARRAY'
347          100     64     24   defined $data{'seenL'}{$arg} || defined $data{'seenR'}{$arg} ? :
353          100      1      8   unless @_ == 1 and ref $_[0] eq 'ARRAY'
359          100     64     24   defined $data{'seenL'}{$args[$i]} || defined $data{'seenR'}{$args[$i]} ? :
398          100     49     34   $unsortflag ? :
411          100      8     16   $data{'unsort'} ? :
423          100     12     20   $data{'unsort'} ? :
447          100     26     38   $data{'unsort'} ? :
469          100     26     38   $data{'unsort'} ? :
491          100     30     50   $data{'unsort'} ? :
561          100      1    176   unless @_ == 1 and ref $_[0] ne 'ARRAY'
569          100      1      8   unless @_ == 1 and ref $_[0] eq 'ARRAY'
579          100      1     88   unless @_ == 1 and ref $_[0] ne 'ARRAY'
587          100      1      8   unless @_ == 1 and ref $_[0] eq 'ARRAY'
602          100      8      8   if (ref $data{'L'} eq 'ARRAY') { }
604          100      4      4   $data{'unsort'} ? :
617          100      2      6   $data{'unsort'} ? :
631          100     96     48   if exists ${$hrefR;}{$_}
649          100     64    384   unless exists ${$hrefR;}{$_}
659          100     64    384   unless exists ${$hrefL;}{$_}
669          100     80    480   unless exists ${$hrefR;}{$_}
672          100     80    480   unless exists ${$hrefL;}{$_}
682          100     32    112   if (not exists ${$hrefR;}{$_})
695          100     16    112   if (not exists ${$hrefL;}{$_})
714          100    112     32   if exists ${$hrefR;}{$_}
716          100      4     24   keys %intersection == 0 ? :
724          100      8     32   if (not exists ${$hrefR;}{$_})
730          100      8     24   if (not exists ${$hrefL;}{$_})
753          100    112     64   if (exists ${$hrefL;}{$arg})
754          100    112     64   if (exists ${$hrefR;}{$arg})
755          100     48    128   if (not exists ${$hrefL;}{$arg} and not exists ${$hrefR;}{$arg})
767          100     56     32   if (exists ${$hrefL;}{$args[$i]})
768          100     56     32   if (exists ${$hrefR;}{$args[$i]})
769          100     24     64   if (not exists ${$hrefL;}{$args[$i]} and not exists ${$hrefR;}{$args[$i]})
780          100     64     24   defined ${$hrefL;}{$arg} || defined ${$hrefR;}{$arg} ? :
790          100     64     24   defined ${$hrefL;}{$args[$i]} || defined ${$hrefR;}{$args[$i]} ? :
814          100     15     20   if (ref $listrefs[0] eq 'ARRAY') { }
833          100     15     14   unless $unsortflag
882          100    957    483   if exists $seenthis{$_}
887          100     14     15   $unsortflag ? :
900          100    378    521   if exists $intersection{$_}
904          100     14     15   $unsortflag ? :
909          100    277     40   unless exists $intersection{$_}
921          100    670   1140   if ($left == $i or $right == $i)
925          100    270   1540   !keys(%{$xintersection{$_};}) ? :
933          100     85    725   unless $alldeductions{$_}
947          100    892    810   unless exists $seenthis{$_}
960          100     14     15   $unsortflag ? :
962          100     85    232   unless exists $shared{$_}
973          100   1596   2724   if not $tempj{$_}
983          100    212    612   if $xsubset[$f][$g] and $xsubset[$g][$f]
1038         100     20     24   defined $_[0] ? :
1045         100     69     24   defined $_[0] ? :
1078         100     24     24   defined $_[0] ? :
1085         100     73     24   defined $_[0] ? :
1209         100      1    176   unless @_ == 1 and ref $_[0] ne 'ARRAY'
1216         100    432    448   if exists $seen{$_}{$arg}
1223         100      1      8   unless @_ == 1 and ref $_[0] eq 'ARRAY'
1233         100    216    224   exists ${$seen{$_};}{$args[$i]} ? :
1236         100      8     80   if @not_found == keys %seen
1243         100      1     88   unless @_ == 1 and ref $_[0] ne 'ARRAY'
1250         100     80     96   if defined $seen{$k}{$arg}
1257         100      1      8   unless @_ == 1 and ref $_[0] eq 'ARRAY'
1265         100    176    264   unless (defined $present{$args[$i]})
1266         100     80     96   if $seen{$_}{$args[$i]}
1269         100      8     80   if not defined $present{$args[$i]}
1335         100     13      9   $unsortflag ? :
1350         100      8      8   $unsortflag ? :
1369         100      8      8   $unsortflag ? :
1385         100      8      8   $unsortflag ? :
1392         100    128     32   unless exists ${$intersectionref;}{$_}
1411         100      8      8   $unsortflag ? :
1427         100     32     32   $unsortflag ? :
1432         100    128    512   unless exists ${$sharedref;}{$_}
1462         100     20     24   defined $_[0] ? :
1469         100     69     24   defined $_[0] ? :
1506         100     24     24   defined $_[0] ? :
1513         100     73     24   defined $_[0] ? :
1596         100     90    180   !scalar(keys %{${$xintersectionref;}{$_};}) ? :
1610         100      1    176   unless @_ == 1 and ref $_[0] ne 'ARRAY'
1618         100    432    448   if exists ${$seenref;}{$_}{$arg}
1626         100      1      8   unless @_ == 1 and ref $_[0] eq 'ARRAY'
1640         100    216    224   exists ${${$seenref;}{$_};}{$args[$i]} ? :
1643         100      8     80   if @not_found == keys %{$seenref;}
1650         100      1     88   unless @_ == 1 and ref $_[0] ne 'ARRAY'
1658         100     80    128   if defined ${$seenref;}{$k}{$arg}
1666         100      1      8   unless @_ == 1 and ref $_[0] eq 'ARRAY'
1678         100    208    232   unless (defined $present{$args[$i]})
1679         100     80    128   if ${$seenref;}{$_}{$args[$i]}
1682         100      8     80   if not defined $present{$args[$i]}
1716         100      8      8   if (ref $listrefs[0] eq 'ARRAY') { }
1731         100      8      8   unless $unsortflag


Conditions
----------

and 3 conditions

line  err      %     !l  l&&!r   l&&r   expr
----- --- ------ ------ ------ ------   ----
15           100    118      1    111   @_ == 1 and ref $_[0] eq 'HASH'
19    ***     66      0      1    110   ${$argref;}{'lists'} and ref ${$argref;}{'lists'} eq 'ARRAY'
311   ***     66      1      0    176   @_ == 1 and ref $_[0] ne 'ARRAY'
318          100    112     16     48   not exists ${$data{'seenL'};}{$arg} and not exists ${$data{'seenR'};}{$arg}
326   ***     66      0      1      8   @_ == 1 and ref $_[0] eq 'ARRAY'
334          100     56      8     24   not exists ${$data{'seenL'};}{$args[$i]} and not exists ${$data{'seenR'};}{$args[$i]}
343   ***     66      1      0     88   @_ == 1 and ref $_[0] ne 'ARRAY'
353   ***     66      0      1      8   @_ == 1 and ref $_[0] eq 'ARRAY'
561   ***     66      1      0    176   @_ == 1 and ref $_[0] ne 'ARRAY'
569   ***     66      0      1      8   @_ == 1 and ref $_[0] eq 'ARRAY'
579   ***     66      1      0     88   @_ == 1 and ref $_[0] ne 'ARRAY'
587   ***     66      0      1      8   @_ == 1 and ref $_[0] eq 'ARRAY'
755          100    112     16     48   not exists ${$hrefL;}{$arg} and not exists ${$hrefR;}{$arg}
769          100     56      8     24   not exists ${$hrefL;}{$args[$i]} and not exists ${$hrefR;}{$args[$i]}
983          100    554     58    212   $xsubset[$f][$g] and $xsubset[$g][$f]
1209  ***     66      1      0    176   @_ == 1 and ref $_[0] ne 'ARRAY'
1223  ***     66      0      1      8   @_ == 1 and ref $_[0] eq 'ARRAY'
1243  ***     66      1      0     88   @_ == 1 and ref $_[0] ne 'ARRAY'
1257  ***     66      0      1      8   @_ == 1 and ref $_[0] eq 'ARRAY'
1610  ***     66      1      0    176   @_ == 1 and ref $_[0] ne 'ARRAY'
1626  ***     66      1      0      8   @_ == 1 and ref $_[0] eq 'ARRAY'
1650  ***     66      1      0     88   @_ == 1 and ref $_[0] ne 'ARRAY'
1666  ***     66      1      0      8   @_ == 1 and ref $_[0] eq 'ARRAY'

or 3 conditions

line  err      %      l  !l&&r !l&&!r   expr
----- --- ------ ------ ------ ------   ----
25           100     32     22     65   $args[0] eq '-u' || $args[0] eq '--unsorted'
27           100     45     20     54   $args[0] eq '-a' or $args[0] eq '--accelerated'
32           100    101    125      3   ref $args[0] eq 'ARRAY' or ref $args[0] eq 'HASH'
49    ***     33      0     28      0   ref $class || $class
52    ***     33      0     35      0   ref $class || $class
57    ***     33      0     89      0   ref $class || $class
59    ***     33      0     59      0   ref $class || $class
347          100     56      8     24   defined $data{'seenL'}{$arg} || defined $data{'seenR'}{$arg}
359          100     56      8     24   defined $data{'seenL'}{$args[$i]} || defined $data{'seenR'}{$args[$i]}
780          100     56      8     24   defined ${$hrefL;}{$arg} || defined ${$hrefR;}{$arg}
790          100     56      8     24   defined ${$hrefL;}{$args[$i]} || defined ${$hrefR;}{$args[$i]}
921          100    335    335   1140   $left == $i or $right == $i


Covered Subroutines
-------------------

Subroutine                      Location                     
------------------------------- -----------------------------
BEGIN                           blib/lib/List/Compare.pm:1309
BEGIN                           blib/lib/List/Compare.pm:1310
BEGIN                           blib/lib/List/Compare.pm:1321
BEGIN                           blib/lib/List/Compare.pm:1322
BEGIN                           blib/lib/List/Compare.pm:3   
BEGIN                           blib/lib/List/Compare.pm:384 
BEGIN                           blib/lib/List/Compare.pm:385 
BEGIN                           blib/lib/List/Compare.pm:5   
BEGIN                           blib/lib/List/Compare.pm:6   
BEGIN                           blib/lib/List/Compare.pm:800 
BEGIN                           blib/lib/List/Compare.pm:801 
_are_members_any_engine         blib/lib/List/Compare.pm:784 
_are_members_which_engine       blib/lib/List/Compare.pm:762 
_complement_engine              blib/lib/List/Compare.pm:655 
_init                           blib/lib/List/Compare.pm:1328
_init                           blib/lib/List/Compare.pm:394 
_init                           blib/lib/List/Compare.pm:76  
_init                           blib/lib/List/Compare.pm:809 
_intersection_engine            blib/lib/List/Compare.pm:627 
_is_LdisjointR_engine           blib/lib/List/Compare.pm:710 
_is_LequivalentR_engine         blib/lib/List/Compare.pm:704 
_is_LsubsetR_engine             blib/lib/List/Compare.pm:678 
_is_RsubsetL_engine             blib/lib/List/Compare.pm:691 
_is_member_any_engine           blib/lib/List/Compare.pm:777 
_is_member_which_engine         blib/lib/List/Compare.pm:750 
_print_equivalence_chart_engine blib/lib/List/Compare.pm:741 
_print_subset_chart_engine      blib/lib/List/Compare.pm:720 
_symmetric_difference_engine    blib/lib/List/Compare.pm:665 
_union_engine                   blib/lib/List/Compare.pm:637 
_unique_engine                  blib/lib/List/Compare.pm:645 
are_members_any                 blib/lib/List/Compare.pm:1256
are_members_any                 blib/lib/List/Compare.pm:1664
are_members_any                 blib/lib/List/Compare.pm:352 
are_members_any                 blib/lib/List/Compare.pm:586 
are_members_which               blib/lib/List/Compare.pm:1222
are_members_which               blib/lib/List/Compare.pm:1624
are_members_which               blib/lib/List/Compare.pm:325 
are_members_which               blib/lib/List/Compare.pm:568 
get_Lonly                       blib/lib/List/Compare.pm:1057
get_Lonly                       blib/lib/List/Compare.pm:1485
get_Lonly_ref                   blib/lib/List/Compare.pm:1065
get_Lonly_ref                   blib/lib/List/Compare.pm:1493
get_LorRonly                    blib/lib/List/Compare.pm:1129
get_LorRonly                    blib/lib/List/Compare.pm:1441
get_LorRonly_ref                blib/lib/List/Compare.pm:1137
get_LorRonly_ref                blib/lib/List/Compare.pm:1449
get_Ronly                       blib/lib/List/Compare.pm:1097
get_Ronly                       blib/lib/List/Compare.pm:1530
get_Ronly_ref                   blib/lib/List/Compare.pm:1105
get_Ronly_ref                   blib/lib/List/Compare.pm:1538
get_bag                         blib/lib/List/Compare.pm:1291
get_bag                         blib/lib/List/Compare.pm:1706
get_bag                         blib/lib/List/Compare.pm:366 
get_bag                         blib/lib/List/Compare.pm:596 
get_bag_ref                     blib/lib/List/Compare.pm:1295
get_bag_ref                     blib/lib/List/Compare.pm:1710
get_bag_ref                     blib/lib/List/Compare.pm:370 
get_bag_ref                     blib/lib/List/Compare.pm:600 
get_complement                  blib/lib/List/Compare.pm:1076
get_complement                  blib/lib/List/Compare.pm:1504
get_complement                  blib/lib/List/Compare.pm:207 
get_complement                  blib/lib/List/Compare.pm:461 
get_complement_all              blib/lib/List/Compare.pm:1091
get_complement_all              blib/lib/List/Compare.pm:1523
get_complement_all              blib/lib/List/Compare.pm:217 
get_complement_all              blib/lib/List/Compare.pm:473 
get_complement_ref              blib/lib/List/Compare.pm:1083
get_complement_ref              blib/lib/List/Compare.pm:1511
get_complement_ref              blib/lib/List/Compare.pm:211 
get_complement_ref              blib/lib/List/Compare.pm:465 
get_intersection                blib/lib/List/Compare.pm:1006
get_intersection                blib/lib/List/Compare.pm:1355
get_intersection                blib/lib/List/Compare.pm:152 
get_intersection                blib/lib/List/Compare.pm:403 
get_intersection_ref            blib/lib/List/Compare.pm:1010
get_intersection_ref            blib/lib/List/Compare.pm:1359
get_intersection_ref            blib/lib/List/Compare.pm:156 
get_intersection_ref            blib/lib/List/Compare.pm:407 
get_nonintersection             blib/lib/List/Compare.pm:1148
get_nonintersection             blib/lib/List/Compare.pm:1374
get_nonintersection             blib/lib/List/Compare.pm:245 
get_nonintersection             blib/lib/List/Compare.pm:502 
get_nonintersection_ref         blib/lib/List/Compare.pm:1152
get_nonintersection_ref         blib/lib/List/Compare.pm:1378
get_nonintersection_ref         blib/lib/List/Compare.pm:252 
get_nonintersection_ref         blib/lib/List/Compare.pm:506 
get_shared                      blib/lib/List/Compare.pm:1026
get_shared                      blib/lib/List/Compare.pm:1398
get_shared                      blib/lib/List/Compare.pm:172 
get_shared                      blib/lib/List/Compare.pm:427 
get_shared_ref                  blib/lib/List/Compare.pm:1030
get_shared_ref                  blib/lib/List/Compare.pm:1402
get_shared_ref                  blib/lib/List/Compare.pm:179 
get_shared_ref                  blib/lib/List/Compare.pm:431 
get_symmetric_difference        blib/lib/List/Compare.pm:1116
get_symmetric_difference        blib/lib/List/Compare.pm:1416
get_symmetric_difference        blib/lib/List/Compare.pm:228 
get_symmetric_difference        blib/lib/List/Compare.pm:483 
get_symmetric_difference_ref    blib/lib/List/Compare.pm:1120
get_symmetric_difference_ref    blib/lib/List/Compare.pm:1420
get_symmetric_difference_ref    blib/lib/List/Compare.pm:232 
get_symmetric_difference_ref    blib/lib/List/Compare.pm:487 
get_union                       blib/lib/List/Compare.pm:1016
get_union                       blib/lib/List/Compare.pm:1340
get_union                       blib/lib/List/Compare.pm:162 
get_union                       blib/lib/List/Compare.pm:415 
get_union_ref                   blib/lib/List/Compare.pm:1020
get_union_ref                   blib/lib/List/Compare.pm:1344
get_union_ref                   blib/lib/List/Compare.pm:166 
get_union_ref                   blib/lib/List/Compare.pm:419 
get_unique                      blib/lib/List/Compare.pm:1036
get_unique                      blib/lib/List/Compare.pm:1460
get_unique                      blib/lib/List/Compare.pm:186 
get_unique                      blib/lib/List/Compare.pm:439 
get_unique_all                  blib/lib/List/Compare.pm:1051
get_unique_all                  blib/lib/List/Compare.pm:1478
get_unique_all                  blib/lib/List/Compare.pm:196 
get_unique_all                  blib/lib/List/Compare.pm:451 
get_unique_ref                  blib/lib/List/Compare.pm:1043
get_unique_ref                  blib/lib/List/Compare.pm:1467
get_unique_ref                  blib/lib/List/Compare.pm:190 
get_unique_ref                  blib/lib/List/Compare.pm:443 
get_version                     blib/lib/List/Compare.pm:1301
get_version                     blib/lib/List/Compare.pm:1736
get_version                     blib/lib/List/Compare.pm:376 
get_version                     blib/lib/List/Compare.pm:623 
is_LdisjointR                   blib/lib/List/Compare.pm:1195
is_LdisjointR                   blib/lib/List/Compare.pm:1585
is_LdisjointR                   blib/lib/List/Compare.pm:283 
is_LdisjointR                   blib/lib/List/Compare.pm:538 
is_LequivalentR                 blib/lib/List/Compare.pm:1184
is_LequivalentR                 blib/lib/List/Compare.pm:1573
is_LequivalentR                 blib/lib/List/Compare.pm:275 
is_LequivalentR                 blib/lib/List/Compare.pm:530 
is_LsubsetR                     blib/lib/List/Compare.pm:1158
is_LsubsetR                     blib/lib/List/Compare.pm:1549
is_LsubsetR                     blib/lib/List/Compare.pm:259 
is_LsubsetR                     blib/lib/List/Compare.pm:514 
is_RsubsetL                     blib/lib/List/Compare.pm:1169
is_RsubsetL                     blib/lib/List/Compare.pm:1558
is_RsubsetL                     blib/lib/List/Compare.pm:267 
is_RsubsetL                     blib/lib/List/Compare.pm:522 
is_member_any                   blib/lib/List/Compare.pm:1242
is_member_any                   blib/lib/List/Compare.pm:1649
is_member_any                   blib/lib/List/Compare.pm:342 
is_member_any                   blib/lib/List/Compare.pm:578 
is_member_which                 blib/lib/List/Compare.pm:1204
is_member_which                 blib/lib/List/Compare.pm:1605
is_member_which                 blib/lib/List/Compare.pm:306 
is_member_which                 blib/lib/List/Compare.pm:556 
is_member_which_ref             blib/lib/List/Compare.pm:1208
is_member_which_ref             blib/lib/List/Compare.pm:1609
is_member_which_ref             blib/lib/List/Compare.pm:310 
is_member_which_ref             blib/lib/List/Compare.pm:560 
new                             blib/lib/List/Compare.pm:12  
print_equivalence_chart         blib/lib/List/Compare.pm:1283
print_equivalence_chart         blib/lib/List/Compare.pm:1697
print_equivalence_chart         blib/lib/List/Compare.pm:297 
print_equivalence_chart         blib/lib/List/Compare.pm:550 
print_subset_chart              blib/lib/List/Compare.pm:1275
print_subset_chart              blib/lib/List/Compare.pm:1688
print_subset_chart              blib/lib/List/Compare.pm:289 
print_subset_chart              blib/lib/List/Compare.pm:544 


blib/lib/List/Compare/Base/_Auxiliary.pm

line  err   stmt branch   cond    sub    pod   time   code
1                                                     package List::Compare::Base::_Auxiliary;
2                                                     $VERSION = 0.31;
3                                                     # As of:  08/15/2004
4             28                  100           516   use Carp;
              28                                114   
              28                                885   
5                                                     @ISA = qw(Exporter);
6                                                     @EXPORT_OK = qw|
7                                                         _validate_2_seenhashes
8                                                         _validate_seen_hash
9                                                         _validate_multiple_seenhashes
10                                                        _calculate_union_xintersection_only
11                                                        _calculate_seen_xintersection_only
12                                                        _calculate_seen_only
13                                                        _calculate_xintersection_only
14                                                        _calculate_union_only
15                                                        _calculate_union_seen_only
16                                                        _calculate_hash_intersection
17                                                        _calculate_hash_shared
18                                                        _subset_subengine
19                                                        _chart_engine_regular 
20                                                        _chart_engine_multiple
21                                                        _equivalent_subengine
22                                                        _index_message1
23                                                        _index_message2
24                                                        _index_message3
25                                                        _index_message4
26                                                        _prepare_listrefs 
27                                                        _subset_engine_multaccel 
28                                                        _calc_seen
29                                                        _calc_seen1
30                                                        _equiv_engine 
31                                                        _argument_checker_0 
32                                                        _argument_checker 
33                                                        _argument_checker_1 
34                                                        _argument_checker_2 
35                                                        _argument_checker_3 
36                                                        _argument_checker_3a 
37                                                        _argument_checker_4
38                                                        _alt_construct_tester 
39                                                        _alt_construct_tester_1 
40                                                        _alt_construct_tester_2 
41                                                        _alt_construct_tester_3 
42                                                        _alt_construct_tester_4 
43                                                        _alt_construct_tester_5 
44                                                    |;
45                                                    %EXPORT_TAGS = (
46                                                        calculate => [ qw(
47                                                            _calculate_union_xintersection_only
48                                                            _calculate_seen_xintersection_only
49                                                            _calculate_seen_only
50                                                            _calculate_xintersection_only
51                                                            _calculate_union_only
52                                                            _calculate_union_seen_only
53                                                            _calculate_hash_intersection
54                                                            _calculate_hash_shared
55                                                        ) ],
56                                                        checker => [ qw(
57                                                            _argument_checker_0 
58                                                            _argument_checker 
59                                                            _argument_checker_1 
60                                                            _argument_checker_2 
61                                                            _argument_checker_3 
62                                                            _argument_checker_3a 
63                                                            _argument_checker_4
64                                                        ) ],
65                                                        tester => [ qw(
66                                                            _alt_construct_tester 
67                                                            _alt_construct_tester_1 
68                                                            _alt_construct_tester_2 
69                                                            _alt_construct_tester_3 
70                                                            _alt_construct_tester_4 
71                                                            _alt_construct_tester_5 
72                                                        ) ],
73                                                    );
74            28                  100           581   use strict;
              28                                119   
              28                                367   
75                                                    
76                                                    sub _validate_2_seenhashes {
77            35                  100           305       my ($refL, $refR) = @_;
78            35                                147       my (%seenL, %seenR);
79            35                                127       my (%badentriesL, %badentriesR);
80            35                                692       foreach (keys %$refL) {
81    ***    174    100     66                  427           if (${$refL}{$_} =~ /^\d+$/ and ${$refL}{$_} > 0) {
             174                               1853   
             174                               1481   
82           170                                595               $seenL{$_} = ${$refL}{$_};
             170                               8225   
83                                                            } else {
84             4                                 17               $badentriesL{$_} = ${$refL}{$_};
               4                                 45   
85                                                            }
86                                                        } 
87            35                                606       foreach (keys %$refR) {
88           161    100    100                  444           if (${$refR}{$_} =~ /^\d+$/ and ${$refR}{$_} > 0) {
             161                               1359   
             159                               1280   
89           157                                364               $seenR{$_} = ${$refR}{$_};
             157                               1211   
90                                                            } else {
91             4                                 17               $badentriesR{$_} = ${$refR}{$_};
               4                                 99   
92                                                            }
93                                                        }
94            35    100    100                  857       if ( (keys %badentriesL) or (keys %badentriesR) ) {
95             6                                967           print "\nValues in a 'seen-hash' may only be positive integers.\n";
96             6                                468           print "  These elements have invalid values:\n\n";
97             6    100                          73           if (keys %badentriesL) {
98             4                                311               print "  First hash in arguments:\n\n";
99                                                                print "     Key:  $_\tValue:  $badentriesL{$_}\n" 
100            4                                 16                   foreach (sort keys %badentriesL);
               4                                312   
101                                                           } 
102            6    100                          61           if (keys %badentriesR) {
103            4                                283               print "  Second hash in arguments:\n\n";
104                                                               print "     Key:  $_\tValue:  $badentriesR{$_}\n" 
105            4                                 13                   foreach (sort keys %badentriesR);
               4                                298   
106                                                           }
107            6                                116           croak "Correct invalid values before proceeding:  $!";
108                                                       }
109           29                                614       return (\%seenL, \%seenR);
110                                                   }
111                                                   
112                                                   sub _validate_seen_hash {
113          503    100           100          4878       if (@_ > 2) {
114          258                               4000           _validate_multiple_seenhashes( [@_] );
115                                                       } else { 
116          245                               1228           my ($l, $r) = @_;
117          245                               1035           my (%badentriesL, %badentriesR);
118          245                               8911           foreach (keys %$l) {
119            4                                 63               $badentriesL{$_} = ${$l}{$_} 
            1592                              21367   
120   ***   1592    100     66                 4054                   unless (${$l}{$_} =~ /^\d+$/ and ${$l}{$_} > 0);
            1592                             223569   
121                                                           } 
122          245                               7058           foreach (keys %$r) {
123            4                                 52               $badentriesR{$_} = ${$r}{$_} 
            1569                              45525   
124         1569    100    100                 3965                   unless (${$r}{$_} =~ /^\d+$/ and ${$r}{$_} > 0);
            1567                              18772   
125                                                           }
126          245    100    100                44355           if ( (keys %badentriesL) or (keys %badentriesR) ) {
127            6                               2222               print "\nValues in a 'seen-hash' may only be numeric.\n";
128            6                               1097               print "  These elements have invalid values:\n\n";
129            6    100                         141               if (keys %badentriesL) {
130            4                                687                   print "  First hash in arguments:\n\n";
131                                                                   print "     Key:  $_\tValue:  $badentriesL{$_}\n" 
132            4                                 22                       foreach (sort keys %badentriesL);
               4                                514   
133                                                               } 
134            6    100                         118               if (keys %badentriesR) {
135            4                                550                   print "  Second hash in arguments:\n\n";
136                                                                   print "     Key:  $_\tValue:  $badentriesR{$_}\n" 
137            4                                 18                       foreach (sort keys %badentriesR);
               4                                619   
138                                                               }
139            6                                142               croak "Correct invalid values before proceeding:  $!";
140                                                           }
141                                                       }
142                                                   }
143                                                   
144                                                   sub _validate_multiple_seenhashes {
145          258                  100         17908       my $hashrefsref = shift;
146          258                                922       my @hashrefs = @{$hashrefsref};
             258                              45692   
147          258                               6828       my (%badentries, $badentriesflag);
148                                                       for (my $i = 0; $i <= $#hashrefs; $i++) {
149         1276                              65164           my %seenhash = %{$hashrefs[$i]};
            1276                              21520   
150         1276                              12042           foreach (keys %seenhash) {
151         6804    100    100               218192               unless ($seenhash{$_} =~ /^\d+$/ and $seenhash{$_} > 0) {
152           24                                238                   $badentries{$i}{$_} = $seenhash{$_};
153           24                                514                   $badentriesflag++;
154                                                               }
155                                                           }
156          258                               1135       }
157          258    100                        4060       if ($badentriesflag) {
158           12                               8726           print "\nValues in a 'seen-hash' may only be positive integers.\n";
159           12                               1512           print "  These elements have invalid values:\n\n";
160           12                               4269           foreach (sort keys %badentries) {
161           24                               2230               print "    Hash $_:\n";
162           24                                117               my %pairs = %{$badentries{$_}};
              24                                441   
163           24                                216               foreach my $val (sort keys %pairs) {
164           24                               2014                   print "        Bad key-value pair:  $val\t$pairs{$val}\n";
165                                                               }
166                                                           }
167           12                               3108           croak "Correct invalid values before proceeding:  $!";
168                                                       }
169                                                   }
170                                                   
171                                                   sub _list_builder {
172        10467                  100         58786       my ($aref, $x) = @_;
173        10467    100                       98950       if (ref(${$aref}[$x]) eq 'HASH') {
           10467                              82709   
174         7474                              24586           return keys %{${$aref}[$x]};
            7474                              30156   
            7474                             245996   
175                                                       } else {
176         2993                               7346           return      @{${$aref}[$x]};
            2993                              14065   
            2993                             184998   
177                                                       }
178                                                   }
179                                                   
180                                                   sub _calculate_union_xintersection_only {
181          200                  100          1081       my $aref = shift;
182          200                                905       my (%union, %xintersection);
183         1020                              13741       for (my $i = 0; $i <= $#{$aref}; $i++) {
184          820                               2038           my %seenthis = ();
185          820                               3371           foreach my $h ( _list_builder($aref, $i) ) {
186         4820                              43459               $seenthis{$h}++;
187         4820                              60390               $union{$h}++;
188                                                           }
189         2280                              29007           for (my $j = $i+1; $j <=$#{$aref}; $j++) {
190         1460                               3206               my %seenthat = ();
191         1460                               3988               my %seenintersect = ();
192         1460                              13332               my $ilabel = $i . '_' . $j;
193         1460                               6636               $seenthat{$_}++ foreach ( _list_builder($aref, $j) );
            1460                               9686   
194         1460                              32556               foreach my $k (keys %seenthat) {
195         6720    100                       70881                   $seenintersect{$k}++ if (exists $seenthis{$k});
196                                                               }
197         1460                              31579               $xintersection{$ilabel} = \%seenintersect;
198          820                               7400           }
199          200                                869       }
200          200                               9912       return (\%union, \%xintersection);
201                                                   }
202                                                   
203                                                   sub _calculate_seen_xintersection_only {
204          179                  100           991       my $aref = shift;
205          179                                820       my (%xintersection, %seen);
206          990                               8746       for (my $i = 0; $i <= $#{$aref}; $i++) {
207          811                               8976           my %seenthis = ();
208          811                               9132           foreach my $h ( _list_builder($aref, $i) ) {
209         4747                              20974               $seenthis{$h}++;
210                                                           }
211          811                               9274           $seen{$i} = \%seenthis;
212         2349                              42644           for (my $j = $i+1; $j <=$#{$aref}; $j++) {
213         1538                               9604               my (%seenthat, %seenintersect);
214         1538                               6852               my $ilabel = $i . '_' . $j;
215         1538                               3722               $seenthat{$_}++ foreach ( _list_builder($aref, $j) );
            1538                              14040   
216         1538                              15966               foreach (keys %seenthat) {
217         6991    100                      153110                   $seenintersect{$_}++ if (exists $seenthis{$_});
218                                                               }
219         1538                             161275               $xintersection{$ilabel} = \%seenintersect;
220          811                               3548           }
221          179                                748       }
222          179                               2620       return (\%seen, \%xintersection);
223                                                   }
224                                                   
225                                                   sub _calculate_seen_only {
226          754                  100          7025       my $aref = shift;
227          754                               2480       my (%seen);
228         3960                              50082       for (my $i = 0; $i <= $#{$aref}; $i++) {
229         3206                              11767           my %seenthis = ();
230         3206                              22613           foreach my $h ( _list_builder($aref, $i) ) {
231        18726                             192002               $seenthis{$h}++;
232                                                           }
233         3206                              54456           $seen{$i} = \%seenthis;
234          754                               3282       }
235          754                               7123       return \%seen;
236                                                   }
237                                                   
238                                                   sub _calculate_xintersection_only {
239          142                  100           914       my $aref = shift;
240          142                                541       my (%xintersection);
241          711                              19401       for (my $i = 0; $i <= $#{$aref}; $i++) {
242          569                               1809           my %seenthis = ();
243          569                               2566           foreach my $h ( _list_builder($aref, $i) ) {
244         3246                              45904               $seenthis{$h}++;
245                                                           }
246         1596                             176220           for (my $j = $i+1; $j <=$#{$aref}; $j++) {
247         1027                               3067               my (%seenthat, %seenintersect);
248         1027                               4759               my $ilabel = $i . '_' . $j;
249         1027                               2263               $seenthat{$_}++ foreach ( _list_builder($aref, $j) );
            1027                               3791   
250         1027                              34316               foreach (keys %seenthat) {
251         4611    100                       36193                   $seenintersect{$_}++ if (exists $seenthis{$_});
252                                                               }
253         1027                              20315               $xintersection{$ilabel} = \%seenintersect;
254          569                               4566           }
255          142                                581       }
256          142                               1639       return \%xintersection;
257                                                   }
258                                                   
259                                                   sub _calculate_union_only {
260           56                  100           256       my $aref = shift;
261           56                                201       my (%union);
262          276                              11310       for (my $i = 0; $i <= $#{$aref}; $i++) {
263          220                                995           foreach my $h ( _list_builder($aref, $i) ) {
264         1292                              24226               $union{$h}++;
265                                                           }
266           56                                244       }
267           56                                645       return \%union;
268                                                   }
269                                                   
270                                                   sub _calculate_union_seen_only {
271          180                  100          1583       my $aref = shift;
272          180                                844       my (%union, %seen);
273          996                              18912       for (my $i = 0; $i <= $#{$aref}; $i++) {
274          816                               2074           my %seenthis = ();
275          816                               7975           foreach my $h ( _list_builder($aref, $i) ) {
276         4784                              25677               $seenthis{$h}++;
277         4784                              18478               $union{$h}++;
278                                                           }
279          816                              18919           $seen{$i} = \%seenthis;
280          180                                818       }
281          180                              47206       return (\%union, \%seen);
282                                                   }
283                                                   
284                                                   sub _calculate_hash_intersection {
285          115                  100           637       my $xintersectionref = shift;
286          115                                476       my @xkeys = keys %{$xintersectionref};
             115                               2041   
287          115                                966       my %intersection = %{${$xintersectionref}{$xkeys[0]}};
             115                                402   
             115                               1785   
288                                                       for (my $m = 1; $m <= $#xkeys; $m++) {
289          675                               1562           my %compare = %{${$xintersectionref}{$xkeys[$m]}};
             675                               1465   
             675                              17457   
290          675                               6261           my %result = ();
291          675                               4005           foreach (keys %compare) {
292         2325    100                       20286               $result{$_}++ if (exists $intersection{$_});
293                                                           }
294          675                             114557           %intersection = %result;
295          115                               4084       }
296          115                               1698       return \%intersection;
297                                                   }
298                                                   
299                                                   sub _calculate_hash_shared {
300          200                  100          1274       my $xintersectionref = shift;
301          200                               1293       my (%shared);
302          200                               6568       foreach my $q (keys %{$xintersectionref}) {
             200                               2226   
303         1460                               5329           $shared{$_}++ foreach (keys %{${$xintersectionref}{$q}});
            1460                               3603   
            1460                               3196   
            1460                              72801   
304                                                       }
305          200                               2545       return \%shared;
306                                                   }
307                                                   
308                                                   sub _subset_subengine {
309          194                  100           967       my $aref = shift;
310          194                                608       my (@xsubset);
311          194                               8619       my $seenref = _calculate_seen_only($aref);
312          194                                692       my %seen = %{$seenref};
             194                               2635   
313          194                               7340       foreach my $i (keys %seen) {
314          826                               2227           my %tempi = %{$seen{$i}};
             826                              15735   
315          826                               9618           foreach my $j (keys %seen) {
316         3842                              52716               my %tempj = %{$seen{$j}};
            3842                              59534   
317         3842                              47898               $xsubset[$i][$j] = 1;
318         3842                              59287               foreach my $k (keys %tempi) {
319        20798    100                      195912                   $xsubset[$i][$j] = 0 if (! $tempj{$k});
320                                                               }
321                                                           }
322                                                       }
323          194                              10132       return \@xsubset;
324                                                   }
325                                                   
326                                                   sub _chart_engine_regular {
327           32                  100           134       my $aref = shift;
328           32                                172       my @sub_or_eqv = @$aref;
329           32                                143       my $title = shift;
330           32                                130       my ($v, $w, $t);
331           32                               2753       print "\n";
332           32                               1731       print $title, ' Relationships', "\n\n";
333           32                               1432       print '   Right:    0    1', "\n\n";
334           32                               2178       print 'Left:  0:    1    ', $sub_or_eqv[0], "\n\n";
335           32                             104346       print '       1:    ', $sub_or_eqv[1], '    1', "\n\n";
336                                                   }
337                                                   
338                                                   sub _chart_engine_multiple {
339           48                  100           254       my $aref = shift;
340           48                                341       my @sub_or_eqv = @$aref;
341           48                                245       my $title = shift;
342           48                               7410       my ($v, $w, $t);
343           48                              16998       print "\n";
344           48                              10967       print $title, ' Relationships', "\n\n";
345           48                               1330       print '   Right:';
346                                                       for ($v = 0; $v <= $#sub_or_eqv; $v++) {
347          216                               7063           print '    ', $v;
348           48                                279       }
349           48                               4923       print "\n\n";
350           48                               1103       print 'Left:  0:';
351           48                                222       my @firstrow = @{$sub_or_eqv[0]};
              48                                693   
352                                                       for ($t = 0; $t <= $#firstrow; $t++) {
353          216                              11772           print '    ', $firstrow[$t];
354           48                                239       }
355           48                               4779       print "\n\n";
356                                                       for ($w = 1; $w <= $#sub_or_eqv; $w++) {
357          168                                812           my $length_left = length($w);
358          168                                638           my $x = '';
359          168                               4434           print ' ' x (8 - $length_left), $w, ':';
360          168                                533           my @row = @{$sub_or_eqv[$w]};
             168                               1448   
361                                                           for ($x = 0; $x <= $#row; $x++) {
362          816                              41218               print '    ', $row[$x];
363          168                                571           }
364          168                              26231           print "\n\n";
365           48                                252       }
366           48                               1908       1; # force return true value
367                                                   }
368                                                   
369                                                   sub _equivalent_subengine {
370           80                  100           392       my $aref = shift;
371           80                                547       my $xsubsetref = _subset_subengine($aref);
372           80                                342       my @xsubset = @{$xsubsetref};
              80                                580   
373           80                                290       my (@xequivalent);
374                                                       for (my $f = 0; $f <= $#xsubset; $f++) {
375                                                           for (my $g = 0; $g <= $#xsubset; $g++) {
376         1412                               5422               $xequivalent[$f][$g] = 0;
377         1412    100    100                19224               $xequivalent[$f][$g] = 1
378                                                                   if ($xsubset[$f][$g] and $xsubset[$g][$f]);
379          316                                877           }
380           80                                318       }
381           80                               1787       return \@xequivalent;
382                                                   }
383                                                   
384                                                   sub _index_message1 {
385          190                  100          1061       my ($index, $dataref) = @_;
386          190                               3712       my $method = (caller(1))[3];
387          188                               6611       croak "Argument to method $method must be the array index of the target list \n  in list of arrays passed as arguments to the constructor: $!"
388                                                           unless (
389                                                                   $index =~ /^\d+$/ 
390                                                              and  0 <= $index 
391   ***    190    100     66                 6000              and  $index <= ${$dataref}{'maxindex'}
      ***                   66                        
392                                                           );
393                                                   }
394                                                   
395                                                   sub _index_message2 {
396          113                  100           528       my $dataref = shift;
397          113                                451       my ($index_left, $index_right);
398          113                               3137       my $method = (caller(1))[3];
399          113    100    100                 2366       croak "Method $method requires 2 arguments: $!"
400                                                           unless (@_ == 0 || @_ == 2);
401          109    100                         864       if (@_ == 0) {
402           17                                 77           $index_left = 0;
403           17                                 95           $index_right = 1;
404                                                       } else {
405           92                                563           ($index_left, $index_right) = @_;
406           92                                672           foreach ($index_left, $index_right) {
407          182                               2202               croak "Each argument to method $method must be a valid array index for the target list \n  in list of arrays passed as arguments to the constructor: $!"
408                                                                   unless (
409                                                                           $_ =~ /^\d+$/ 
410                                                                      and  0 <= $_ 
411   ***    182    100     33                 3362                      and  $_ <= ${$dataref}{'maxindex'}
      ***                   66                        
412                                                                   );
413                                                           }
414                                                       }
415          107                               1423       return ($index_left, $index_right);
416                                                   }
417                                                   
418                                                   sub _index_message3 {
419          190                  100          1970       my ($index, $maxindex) = @_;
420          190                               5235       my $method = (caller(1))[3];
421   ***    190    100     33                19405       croak "Argument to method $method must be the array index of the target list \n  in list of arrays passed as arguments to the constructor: $!"
      ***                   66                        
422                                                           unless (
423                                                                   $index =~ /^\d+$/ 
424                                                              and  0 <= $index 
425                                                              and  $index <= $maxindex
426                                                           );
427                                                   }
428                                                   
429                                                   sub _index_message4 {
430           87                  100           846       my $maxindex = shift;
431           87                                396       my ($index_left, $index_right);
432           87                               2683       my $method = (caller(1))[3];
433           87    100    100                 2045       croak "Method $method requires 2 arguments: $!"
434                                                           unless (@_ == 0 || @_ == 2);
435           85    100                         636       if (@_ == 0) {
436            9                               1740           $index_left = 0;
437            9                                 80           $index_right = 1;
438                                                       } else {
439           76                                512           ($index_left, $index_right) = @_;
440           76                                556           foreach ($index_left, $index_right) {
441   ***    150    100     33                10048               croak "Each argument to method $method must be a valid array index for the target list \n  in list of arrays passed as arguments to the constructor: $!"
      ***                   66                        
442                                                                   unless (
443                                                                           $_ =~ /^\d+$/ 
444                                                                      and  0 <= $_ 
445                                                                      and  $_ <= $maxindex
446                                                                   );
447                                                           }
448                                                       }
449           83                                884       return ($index_left, $index_right);
450                                                   }
451                                                   
452                                                   sub _prepare_listrefs {
453          733                  100          3961       my $dataref = shift;
454          733                               3590       delete ${$dataref}{'unsort'};
             733                              36236   
455          733                               3220       my (@listrefs);
456          733                               3059       foreach my $lref (sort {$a <=> $b} keys %{$dataref}) {
            5873                              55098   
             733                               6352   
457         3668                              57681           push(@listrefs, ${$dataref}{$lref});
            3668                              26803   
458                                                       };
459          733                              19000       return \@listrefs;
460                                                   }
461                                                   
462                                                   sub _subset_engine_multaccel {
463           58                  100           250       my $dataref = shift;
464           58                                812       my $aref = _prepare_listrefs($dataref);
465           58                                449       my ($index_left, $index_right) = _index_message4($#{$aref}, @_);
              58                               6757   
466                                                   
467           56                                885       my $xsubsetref = _subset_subengine($aref);
468           56                                299       return ${$xsubsetref}[$index_left][$index_right];
              56                               1113   
469                                                   }
470                                                   
471                                                   sub _calc_seen {
472          700                  100          4084       my ($refL, $refR) = @_;
473   ***    700    100     66                29774       if (ref($refL) eq 'ARRAY' and ref($refR) eq 'ARRAY') {
      ***            50     33                        
474          353                               2363           my (%seenL, %seenR);
475          353                               2189           foreach (@$refL) { $seenL{$_}++ }
            2705                              19244   
476          353                               2080           foreach (@$refR) { $seenR{$_}++ }
            2659                              30443   
477          353                               4599           return (\%seenL, \%seenR); 
478                                                       } elsif (ref($refL) eq 'HASH' and ref($refR) eq 'HASH') {
479          347                               6455           return ($refL, $refR);
480                                                       } else {
481   ***      0                                  0           croak "Improper mixing of arguments; accelerated calculation not possible:  $!";
482                                                       }
483                                                   }
484                                                   
485                                                   sub _equiv_engine {
486           56                  100           278       my ($hrefL, $hrefR) = @_;
487           56                                245       my (%intersection, %Lonly, %Ronly, %LorRonly);
488           56                                214       my $LequivalentR_status = 0;
489                                                       
490           56                                200       foreach (keys %{$hrefL}) {
              56                                809   
491          312    100                        1781           exists ${$hrefR}{$_} ? $intersection{$_}++ : $Lonly{$_}++;
             312                               2157   
492                                                       }
493                                                   
494           56                                353       foreach (keys %{$hrefR}) {
              56                                952   
495          296    100                        1443           $Ronly{$_}++ unless (exists $intersection{$_});
496                                                       }
497                                                   
498           56                                293       $LorRonly{$_}++ foreach ( (keys %Lonly), (keys %Ronly) );
              56                                493   
499           56    100                         751       $LequivalentR_status = 1 if ( (keys %LorRonly) == 0);
500           56                               1268       return $LequivalentR_status;
501                                                   }
502                                                   
503                                                   sub _argument_checker_0 {
504          960                  100          8811       my @args = @_;
505          960                              15203       my $first_ref = ref($args[0]);
506   ***    960     50     66                16756       die "Improper argument: $!" 
507                                                           unless ($first_ref eq 'ARRAY' or $first_ref eq 'HASH');
508          960                              23356       my @temp = @args[1..$#args];
509          960                               4199       my ($testing);
510          960                               3898       my $condition = 1;
511          960                              14799       while (defined ($testing = shift(@temp)) ) {
512         2378    100                       58799           unless (ref($testing) eq $first_ref) {
513            2                                  8               $condition = 0;
514            2                                 22               last;
515                                                           }
516                                                       }
517          960    100                       12591       croak "Arguments must be either all array references or all hash references: $!"
518                                                           unless $condition;
519          958    100                       50386       _validate_seen_hash(@args) if $first_ref eq 'HASH';
520          946                              16626       return (@args);
521                                                   }
522                                                   
523                                                   sub _argument_checker {
524          845                  100          4395       my $argref = shift;
525          845                               3225       my @args = _argument_checker_0(@{$argref});
             845                               6388   
526          841                              54210       return (@args);
527                                                   }
528                                                   
529                                                   sub _argument_checker_1 {
530          270                  100          1326       my $argref = shift;
531          270                                818       my @args = @{$argref};
             270                               1520   
532          270    100                        5570       croak "Subroutine call requires 2 references as arguments:  $!"
533                                                           unless @args == 2;
534          266                               1716       return (_argument_checker($args[0]), ${$args[1]}[0]);
             264                               3831   
535                                                   }
536                                                   
537                                                   sub _argument_checker_2 {
538           18                  100           114       my $argref = shift;
539           18                                127       my @args = @$argref;
540           18    100                         300       croak "Subroutine call requires 2 references as arguments:  $!"
541                                                           unless @args == 2;
542           16                                139       return (_argument_checker($args[0]), $args[1]);
543                                                   }
544                                                   
545                                                   # _argument_checker_3 is currently set-up to handle either 1 or 2 arguments
546                                                   # in get_unique and get_complement
547                                                   # The first argument is an arrayref holding refs to lists ('unsorted' has been 
548                                                   # stripped off).
549                                                   # The second argument is an arrayref holding a single item (index number of 
550                                                   # item being tested)
551                                                   sub _argument_checker_3 {
552          125                  100           767       my $argref = shift;
553          125                                455       my @args = @{$argref};
             125                                804   
554          125    100                        1195       if (@args == 1) {
                    100                               
555           80                                657           return (_argument_checker($args[0]), 0);
556                                                       } elsif (@args == 2) {
557           43                                349           return (_argument_checker($args[0]), ${$args[1]}[0]);
              43                                684   
558                                                       } else {
559   ***      2     50     33                   81           croak "Subroutine call requires 1 or 2 references as arguments:  $!"
560                                                               unless (@args == 1 or @args == 2);
561                                                       }
562                                                   }
563                                                   
564                                                   sub _argument_checker_3a {
565           36                  100           221       my $argref = shift;
566           36                                139       my @args = @{$argref};
              36                                236   
567           36    100                         274       if (@args == 1) {
568           34                                286           return [ _argument_checker($args[0]) ];
569                                                       } else {
570            2                                 43           croak "Subroutine call requires exactly 1 reference as argument:  $!";
571                                                       }
572                                                   }
573                                                   
574                                                   sub _argument_checker_4 {
575          116                  100           701       my $argref = shift;
576          116                                371       my @args = @{$argref};
             116                               2647   
577          116    100                         970       if (@args == 1) {
                    100                               
578           73                                528           return (_argument_checker($args[0]), [0,1]);
579                                                       } elsif (@args == 2) {
580           40    100                         145           if (@{$args[1]} == 2) {
              40                                315   
581           38                               1172               my $last_index = $#{$args[0]};
              38                                621   
582           38                                160               foreach my $i (@{$args[1]}) {
              38                                324   
583   ***     73    100     66                 2160   		croak "No element in index position $i in list of list references passed as first argument to function: $!"
584                                                                       unless ($i =~ /^\d+$/ and $i <= $last_index);
585                                                               }
586           33                                339               return (_argument_checker($args[0]), $args[1]);
587                                                           } else {
588            2                                 46               croak "Must provide index positions corresponding to two lists: $!";
589                                                           }
590                                                       } else {
591   ***      3     50     33                  124           croak "Subroutine call requires 1 or 2 references as arguments: $!"
592                                                               unless (@args == 1 or @args == 2);
593                                                       }
594                                                   }
595                                                   
596                                                   sub _calc_seen1 {
597          768                  100          5433       my @listrefs = @_;
598                                                       # _calc_seen1() is applied after _argument_checker(), which checks to make
599                                                       # sure that the references in its output are either all arrayrefs 
600                                                       # or all seenhashrefs
601                                                       # hence, _calc_seen1 only needs to determine whether it's dealing with 
602                                                       # arrayrefs or seenhashrefs, then, if arrayrefs, calculate seenhashes
603          768    100                        8901       if (ref($listrefs[0]) eq 'ARRAY') {
      ***            50                               
604          384                              37577           my (@seenrefs);
605          384                               4173           foreach my $aref (@listrefs) {
606         1386                               3679               my (%seenthis);
607         1386                               3648               foreach my $j (@{$aref}) {
            1386                               8408   
608         9334                             108019                   $seenthis{$j}++;
609                                                               }
610         1386                              12089               push(@seenrefs, \%seenthis);
611                                                           }
612          384                               5536           return \@seenrefs;
613                                                       } elsif (ref($listrefs[0]) eq 'HASH') {
614          384                              12675           return \@listrefs;
615                                                       } else {
616   ***      0                                  0           croak "Indeterminate case in _calc_seen1: $!";
617                                                       }
618                                                   }
619                                                   
620                                                   # _alt_construct_tester prepares for _argument_checker in 
621                                                   # get_union get_intersection get_symmetric_difference get_shared get_nonintersection
622                                                   sub _alt_construct_tester {
623          286                  100          2526       my @args = @_;
624          286                               1314       my ($argref, $unsorted);
625          286    100    100                12213       if (@args == 1 and (ref($args[0]) eq 'HASH')) {
626          115                                686          my $hashref = shift;
627          115                               1115          die "Need to define 'lists' key properly: $!"
628          114                               1456              unless ( ${$hashref}{'lists'}
629          115    100    100                  411                   and (ref(${$hashref}{'lists'}) eq 'ARRAY') );
630          113                                541          $argref = ${$hashref}{'lists'};
             113                                683   
631          113    100                         394          $unsorted = ${$hashref}{'unsorted'} ? 1 : '';
             113                                970   
632                                                       } else {
633          171    100    100                 5186           $unsorted = shift(@args) 
634                                                               if ($args[0] eq '-u' or $args[0] eq '--unsorted');
635          171                               1652           $argref = shift(@args); 
636                                                       }
637          284                               2935       return ($argref, $unsorted);
638                                                   }
639                                                   
640                                                   # _alt_construct_tester_1 prepares for _argument_checker_1 in
641                                                   # is_member_which is_member_which_ref is_member_any
642                                                   sub _alt_construct_tester_1 {
643          279                  100          3279       my @args = @_;
644          279                                928       my ($argref);
645          279    100    100                11167       if (@args == 1 and (ref($args[0]) eq 'HASH')) {
646          141                                505           my (@returns);
647          141                                553           my $hashref = $args[0];
648          141                               1186           die "Need to define 'lists' key properly: $!"
649          138                               3018              unless ( ${$hashref}{'lists'}
650          141    100    100                  389                   and (ref(${$hashref}{'lists'}) eq 'ARRAY') );
651          135                                775           die "Need to define 'item' key properly: $!"
652          135    100                         628              unless ${$hashref}{'item'};
653          132                               1285           @returns = ( ${$hashref}{'lists'}, [${$hashref}{'item'}] );
             132                                570   
             132                               1467   
654          132                                903           $argref = \@returns;
655                                                       } else {
656          138                                790           $argref = \@args; 
657                                                       }
658          270                               2062       return $argref;
659                                                   }
660                                                   
661                                                   # _alt_construct_tester_2 prepares for _argument_checker_2 in
662                                                   # are_members_which are_members_any
663                                                   sub _alt_construct_tester_2 {
664           24                  100           269       my @args = @_;
665           24                                 95       my ($argref);
666   ***     24    100     66                  618       if (@args == 1 and (ref($args[0]) eq 'HASH')) {
667           14                                 52           my (@returns);
668           14                                 51           my $hashref = $args[0];
669           14                                224           die "Need to define 'lists' key properly: $!"
670           12                                309              unless ( ${$hashref}{'lists'}
671           14    100    100                   53                   and (ref(${$hashref}{'lists'}) eq 'ARRAY') );
672           10                                 95           die "Need to define 'items' key properly: $!"
673            8                                113              unless ( ${$hashref}{'items'}
674   ***     10    100     66                   46                   and (ref(${$hashref}{'items'}) eq 'ARRAY') );
675            8                                207           @returns = defined ${$hashref}{'items'}
               8                                 43   
676            8                                103                           ? (${$hashref}{'lists'}, ${$hashref}{'items'})
      ***      0                                  0   
677   ***      8     50                          34                           : (${$hashref}{'lists'});
678            8                                 67           $argref = \@returns;
679                                                       } else {
680           10                                 68           $argref = \@args; 
681                                                       }
682           18                                155       return $argref;
683                                                   }
684                                                   
685                                                   # _alt_construct_tester_3 prepares for _argument_checker_3 in
686                                                   # get_unique get_complement 
687                                                   sub _alt_construct_tester_3 {
688          163                  100          2493       my @args = @_;
689          163                               1109       my ($argref, $unsorted);
690          163    100    100                 3563       if (@args == 1 and (ref($args[0]) eq 'HASH')) {
691           67                                250           my (@returns);
692           67                                289           my $hashref = $args[0];
693           67                                674           die "Need to define 'lists' key properly: $!"
694           66                               1159              unless ( ${$hashref}{'lists'}
695           67    100    100                  245                   and (ref(${$hashref}{'lists'}) eq 'ARRAY') );
696           65                                497           @returns = defined ${$hashref}{'item'}
              17                                150   
697           17                                424                           ? (${$hashref}{'lists'}, [${$hashref}{'item'}])
              48                                377   
698           65    100                         282                           : (${$hashref}{'lists'});
699           65                                333           $argref = \@returns;
700           65    100                         237           $unsorted = ${$hashref}{'unsorted'} ? 1 : '';
              65                                608   
701                                                       } else {
702           96    100    100                 3297           $unsorted = shift(@args) if ($args[0] eq '-u' or $args[0] eq '--unsorted');
703           96                                721           $argref = \@args; 
704                                                       }
705          161                               3112       return ($argref, $unsorted);
706                                                   }
707                                                   
708                                                   # _alt_construct_tester_4 prepares for _argument_checker_4 in
709                                                   # is_LsubsetR is_RsubsetL is_LequivalentR is_LdisjointR
710                                                   sub _alt_construct_tester_4 {
711          118                  100          1124       my @args = @_;
712          118                                396       my ($argref);
713          118    100    100                 2904       if (@args == 1 and (ref($args[0]) eq 'HASH')) {
714           54                                159           my (@returns);
715           54                                179           my $hashref = $args[0];
716           54                                477           die "Need to define 'lists' key properly: $!"
717           53                                582              unless ( ${$hashref}{'lists'}
718           54    100    100                  161                   and (ref(${$hashref}{'lists'}) eq 'ARRAY') );
719           52                                338           @returns = defined ${$hashref}{'pair'}
              16                                 80   
720           16                                149                           ? (${$hashref}{'lists'}, ${$hashref}{'pair'})
              36                                369   
721           52    100                         209                           : (${$hashref}{'lists'});
722           52                                456           $argref = \@returns;
723                                                       } else {
724           64                                647           $argref = \@args; 
725                                                       }
726          116                                969       return $argref;
727                                                   }
728                                                   
729                                                   # _alt_construct_tester_5 prepares for _argument_checker in
730                                                   # print_subset_chart print_equivalence_chart
731                                                   sub _alt_construct_tester_5 {
732           20                  100           187       my @args = @_;
733           20                                 82       my ($argref);
734           20    100                         220       if (@args == 1) {
735           18    100                         228           if (ref($args[0]) eq 'HASH') {
736           10                                 57              my $hashref = shift;
737           10                                115              die "Need to define 'lists' key properly: $!"
738            9                                253                  unless ( ${$hashref}{'lists'}
739           10    100    100                   36                       and (ref(${$hashref}{'lists'}) eq 'ARRAY') );
740            8                                 38              $argref = ${$hashref}{'lists'};
               8                                 56   
741                                                           } else {
742            8                                 64              $argref = shift(@args); 
743                                                           }
744                                                       } else {
745            2                                 45           croak "Subroutine call requires exactly 1 reference as argument:  $!";
746                                                       }
747           16                                140       return $argref;
748                                                   }
749                                                   
750                                                   1;
751                                                   
752                                                   __END__


Branches
--------

line  err      %   true  false   branch
----- --- ------ ------ ------   ------
81           100    170      4   if (${$refL;}{$_} =~ /^\d+$/ and ${$refL;}{$_} > 0) { }
88           100    157      4   if (${$refR;}{$_} =~ /^\d+$/ and ${$refR;}{$_} > 0) { }
94           100      6     29   if (keys %badentriesL or keys %badentriesR)
97           100      4      2   if (keys %badentriesL)
102          100      4      2   if (keys %badentriesR)
113          100    258    245   if (@_ > 2) { }
120          100      4   1588   unless ${$l;}{$_} =~ /^\d+$/ and ${$l;}{$_} > 0
124          100      4   1565   unless ${$r;}{$_} =~ /^\d+$/ and ${$r;}{$_} > 0
126          100      6    239   if (keys %badentriesL or keys %badentriesR)
129          100      4      2   if (keys %badentriesL)
134          100      4      2   if (keys %badentriesR)
151          100     24   6780   unless ($seenhash{$_} =~ /^\d+$/ and $seenhash{$_} > 0)
157          100     12    246   if ($badentriesflag)
173          100   7474   2993   if (ref ${$aref;}[$x] eq 'HASH') { }
195          100   4980   1740   if exists $seenthis{$k}
217          100   5151   1840   if exists $seenthis{$_}
251          100   3250   1361   if exists $seenthis{$_}
292          100   1350    975   if exists $intersection{$_}
319          100   6196  14602   if not $tempj{$k}
377          100    436    976   if $xsubset[$f][$g] and $xsubset[$g][$f]
391          100      2    188   unless $index =~ /^\d+$/ and 0 <= $index and $index <= ${$dataref;}{'maxindex'}
399          100      4    109   unless @_ == 0 or @_ == 2
401          100     17     92   if (@_ == 0) { }
411          100      2    180   unless $_ =~ /^\d+$/ and 0 <= $_ and $_ <= ${$dataref;}{'maxindex'}
421          100      2    188   unless $index =~ /^\d+$/ and 0 <= $index and $index <= $maxindex
433          100      2     85   unless @_ == 0 or @_ == 2
435          100      9     76   if (@_ == 0) { }
441          100      2    148   unless $_ =~ /^\d+$/ and 0 <= $_ and $_ <= $maxindex
473          100    353    347   if (ref $refL eq 'ARRAY' and ref $refR eq 'ARRAY') { }
      ***     50    347      0   elsif (ref $refL eq 'HASH' and ref $refR eq 'HASH') { }
491          100    272     40   exists ${$hrefR;}{$_} ? :
495          100     24    272   unless exists $intersection{$_}
499          100     16     40   if keys %LorRonly == 0
506   ***     50      0    960   unless $first_ref eq 'ARRAY' or $first_ref eq 'HASH'
512          100      2   2376   unless (ref $testing eq $first_ref)
517          100      2    958   unless $condition
519          100    483    475   if $first_ref eq 'HASH'
532          100      4    266   unless @args == 2
540          100      2     16   unless @args == 2
554          100     80     45   if (@args == 1) { }
             100     43      2   elsif (@args == 2) { }
559   ***     50      2      0   unless @args == 1 or @args == 2
567          100     34      2   if (@args == 1) { }
577          100     73     43   if (@args == 1) { }
             100     40      3   elsif (@args == 2) { }
580          100     38      2   if (@{$args[1];} == 2) { }
583          100      5     68   unless $i =~ /^\d+$/ and $i <= $last_index
591   ***     50      3      0   unless @args == 1 or @args == 2
603          100    384    384   if (ref $listrefs[0] eq 'ARRAY') { }
      ***     50    384      0   elsif (ref $listrefs[0] eq 'HASH') { }
625          100    115    171   if (@args == 1 and ref $args[0] eq 'HASH') { }
629          100      2    113   unless ${$hashref;}{'lists'} and ref ${$hashref;}{'lists'} eq 'ARRAY'
631          100     57     56   ${$hashref;}{'unsorted'} ? :
633          100    114     57   if $args[0] eq '-u' or $args[0] eq '--unsorted'
645          100    141    138   if (@args == 1 and ref $args[0] eq 'HASH') { }
650          100      6    135   unless ${$hashref;}{'lists'} and ref ${$hashref;}{'lists'} eq 'ARRAY'
652          100      3    132   unless ${$hashref;}{'item'}
666          100     14     10   if (@args == 1 and ref $args[0] eq 'HASH') { }
671          100      4     10   unless ${$hashref;}{'lists'} and ref ${$hashref;}{'lists'} eq 'ARRAY'
674          100      2      8   unless ${$hashref;}{'items'} and ref ${$hashref;}{'items'} eq 'ARRAY'
677   ***     50      8      0   defined ${$hashref;}{'items'} ? :
690          100     67     96   if (@args == 1 and ref $args[0] eq 'HASH') { }
695          100      2     65   unless ${$hashref;}{'lists'} and ref ${$hashref;}{'lists'} eq 'ARRAY'
698          100     17     48   defined ${$hashref;}{'item'} ? :
700          100     33     32   ${$hashref;}{'unsorted'} ? :
702          100     58     38   if $args[0] eq '-u' or $args[0] eq '--unsorted'
713          100     54     64   if (@args == 1 and ref $args[0] eq 'HASH') { }
718          100      2     52   unless ${$hashref;}{'lists'} and ref ${$hashref;}{'lists'} eq 'ARRAY'
721          100     16     36   defined ${$hashref;}{'pair'} ? :
734          100     18      2   if (@args == 1) { }
735          100     10      8   if (ref $args[0] eq 'HASH') { }
739          100      2      8   unless ${$hashref;}{'lists'} and ref ${$hashref;}{'lists'} eq 'ARRAY'


Conditions
----------

and 3 conditions

line  err      %     !l  l&&!r   l&&r   expr
----- --- ------ ------ ------ ------   ----
81    ***     66      0      4    170   ${$refL;}{$_} =~ /^\d+$/ and ${$refL;}{$_} > 0
88           100      2      2    157   ${$refR;}{$_} =~ /^\d+$/ and ${$refR;}{$_} > 0
120   ***     66      0      4   1588   ${$l;}{$_} =~ /^\d+$/ and ${$l;}{$_} > 0
124          100      2      2   1565   ${$r;}{$_} =~ /^\d+$/ and ${$r;}{$_} > 0
151          100      8     16   6780   $seenhash{$_} =~ /^\d+$/ and $seenhash{$_} > 0
377          100    864    112    436   $xsubset[$f][$g] and $xsubset[$g][$f]
391   ***     66      2      0    188   $index =~ /^\d+$/ and 0 <= $index
      ***     66      2      0    188   $index =~ /^\d+$/ and 0 <= $index and $index <= ${$dataref;}{'maxindex'}
411   ***     33      0      0    182   $_ =~ /^\d+$/ and 0 <= $_
      ***     66      0      2    180   $_ =~ /^\d+$/ and 0 <= $_ and $_ <= ${$dataref;}{'maxindex'}
421   ***     33      0      0    190   $index =~ /^\d+$/ and 0 <= $index
      ***     66      0      2    188   $index =~ /^\d+$/ and 0 <= $index and $index <= $maxindex
441   ***     33      0      0    150   $_ =~ /^\d+$/ and 0 <= $_
      ***     66      0      2    148   $_ =~ /^\d+$/ and 0 <= $_ and $_ <= $maxindex
473   ***     66    347      0    353   ref $refL eq 'ARRAY' and ref $refR eq 'ARRAY'
      ***     33      0      0    347   ref $refL eq 'HASH' and ref $refR eq 'HASH'
583   ***     66      0      5     68   $i =~ /^\d+$/ and $i <= $last_index
625          100    114     57    115   @args == 1 and ref $args[0] eq 'HASH'
629          100      1      1    113   ${$hashref;}{'lists'} and ref ${$hashref;}{'lists'} eq 'ARRAY'
645          100    136      2    141   @args == 1 and ref $args[0] eq 'HASH'
650          100      3      3    135   ${$hashref;}{'lists'} and ref ${$hashref;}{'lists'} eq 'ARRAY'
666   ***     66     10      0     14   @args == 1 and ref $args[0] eq 'HASH'
671          100      2      2     10   ${$hashref;}{'lists'} and ref ${$hashref;}{'lists'} eq 'ARRAY'
674   ***     66      2      0      8   ${$hashref;}{'items'} and ref ${$hashref;}{'items'} eq 'ARRAY'
690          100     70     26     67   @args == 1 and ref $args[0] eq 'HASH'
695          100      1      1     65   ${$hashref;}{'lists'} and ref ${$hashref;}{'lists'} eq 'ARRAY'
713          100     27     37     54   @args == 1 and ref $args[0] eq 'HASH'
718          100      1      1     52   ${$hashref;}{'lists'} and ref ${$hashref;}{'lists'} eq 'ARRAY'
739          100      1      1      8   ${$hashref;}{'lists'} and ref ${$hashref;}{'lists'} eq 'ARRAY'

or 3 conditions

line  err      %      l  !l&&r !l&&!r   expr
----- --- ------ ------ ------ ------   ----
94           100      4      2     29   keys %badentriesL or keys %badentriesR
126          100      4      2    239   keys %badentriesL or keys %badentriesR
399          100     17     92      4   @_ == 0 or @_ == 2
433          100      9     76      2   @_ == 0 or @_ == 2
506   ***     66    477    483      0   $first_ref eq 'ARRAY' or $first_ref eq 'HASH'
559   ***     33      0      0      2   @args == 1 or @args == 2
591   ***     33      0      0      3   @args == 1 or @args == 2
633          100     56     58     57   $args[0] eq '-u' or $args[0] eq '--unsorted'
702          100     32     26     38   $args[0] eq '-u' or $args[0] eq '--unsorted'


Covered Subroutines
-------------------

Subroutine                          Location                                    
----------------------------------- --------------------------------------------
BEGIN                               blib/lib/List/Compare/Base/_Auxiliary.pm:4  
BEGIN                               blib/lib/List/Compare/Base/_Auxiliary.pm:74 
_alt_construct_tester               blib/lib/List/Compare/Base/_Auxiliary.pm:623
_alt_construct_tester_1             blib/lib/List/Compare/Base/_Auxiliary.pm:643
_alt_construct_tester_2             blib/lib/List/Compare/Base/_Auxiliary.pm:664
_alt_construct_tester_3             blib/lib/List/Compare/Base/_Auxiliary.pm:688
_alt_construct_tester_4             blib/lib/List/Compare/Base/_Auxiliary.pm:711
_alt_construct_tester_5             blib/lib/List/Compare/Base/_Auxiliary.pm:732
_argument_checker                   blib/lib/List/Compare/Base/_Auxiliary.pm:524
_argument_checker_0                 blib/lib/List/Compare/Base/_Auxiliary.pm:504
_argument_checker_1                 blib/lib/List/Compare/Base/_Auxiliary.pm:530
_argument_checker_2                 blib/lib/List/Compare/Base/_Auxiliary.pm:538
_argument_checker_3                 blib/lib/List/Compare/Base/_Auxiliary.pm:552
_argument_checker_3a                blib/lib/List/Compare/Base/_Auxiliary.pm:565
_argument_checker_4                 blib/lib/List/Compare/Base/_Auxiliary.pm:575
_calc_seen                          blib/lib/List/Compare/Base/_Auxiliary.pm:472
_calc_seen1                         blib/lib/List/Compare/Base/_Auxiliary.pm:597
_calculate_hash_intersection        blib/lib/List/Compare/Base/_Auxiliary.pm:285
_calculate_hash_shared              blib/lib/List/Compare/Base/_Auxiliary.pm:300
_calculate_seen_only                blib/lib/List/Compare/Base/_Auxiliary.pm:226
_calculate_seen_xintersection_only  blib/lib/List/Compare/Base/_Auxiliary.pm:204
_calculate_union_only               blib/lib/List/Compare/Base/_Auxiliary.pm:260
_calculate_union_seen_only          blib/lib/List/Compare/Base/_Auxiliary.pm:271
_calculate_union_xintersection_only blib/lib/List/Compare/Base/_Auxiliary.pm:181
_calculate_xintersection_only       blib/lib/List/Compare/Base/_Auxiliary.pm:239
_chart_engine_multiple              blib/lib/List/Compare/Base/_Auxiliary.pm:339
_chart_engine_regular               blib/lib/List/Compare/Base/_Auxiliary.pm:327
_equiv_engine                       blib/lib/List/Compare/Base/_Auxiliary.pm:486
_equivalent_subengine               blib/lib/List/Compare/Base/_Auxiliary.pm:370
_index_message1                     blib/lib/List/Compare/Base/_Auxiliary.pm:385
_index_message2                     blib/lib/List/Compare/Base/_Auxiliary.pm:396
_index_message3                     blib/lib/List/Compare/Base/_Auxiliary.pm:419
_index_message4                     blib/lib/List/Compare/Base/_Auxiliary.pm:430
_list_builder                       blib/lib/List/Compare/Base/_Auxiliary.pm:172
_prepare_listrefs                   blib/lib/List/Compare/Base/_Auxiliary.pm:453
_subset_engine_multaccel            blib/lib/List/Compare/Base/_Auxiliary.pm:463
_subset_subengine                   blib/lib/List/Compare/Base/_Auxiliary.pm:309
_validate_2_seenhashes              blib/lib/List/Compare/Base/_Auxiliary.pm:77 
_validate_multiple_seenhashes       blib/lib/List/Compare/Base/_Auxiliary.pm:145
_validate_seen_hash                 blib/lib/List/Compare/Base/_Auxiliary.pm:113


blib/lib/List/Compare/Base/_Engine.pm

line  err   stmt branch   cond    sub    pod   time   code
1                                                     package List::Compare::Base::_Engine;
2                                                     $VERSION = 0.31;
3                                                     # Holds subroutines used within 
4                                                     # List::Compare::Base::Accelerated and List::Compare::Functional
5                                                     # As of 08/15/2004
6             28                  100           567   use Carp;
              28                                126   
              28                               1142   
7             28                  100           590   use List::Compare::Base::_Auxiliary qw(
8                                                         _equiv_engine 
9                                                         _calculate_seen_xintersection_only
10                                                        _calculate_union_seen_only
11            28                                164   );
              28                                446   
12                                                    @ISA = qw(Exporter);
13                                                    @EXPORT_OK = qw|
14                                                        _unique_all_engine
15                                                        _complement_all_engine
16                                                    |;
17            28                  100           459   use strict;
              28                                114   
              28                                306   
18                                                    
19                                                    sub _unique_all_engine {
20           116                  100           611       my $aref = shift;
21           116                               1093       my ($seenref, $xintersectionref) = 
22                                                            _calculate_seen_xintersection_only($aref);
23           116                                515       my %seen = %{$seenref};
             116                               1811   
24           116                                637       my %xintersection = %{$xintersectionref};
             116                               2312   
25                                                    
26                                                        # Calculate @xunique
27                                                        # Inputs:  $aref    %seen    %xintersection
28           116                                767       my (@xunique);
29           672                               5877       for (my $i = 0; $i <= $#{$aref}; $i++) {
30           556                               1456           my %seenthis = %{$seen{$i}};
             556                               6829   
31           556                               2995           my (@uniquethis, %deductions, %alldeductions);
32                                                            # Get those elements of %xintersection which we'll need 
33                                                            # to subtract from %seenthis
34           556                               8837           foreach (keys %xintersection) {
35          5416                              43051               my ($left, $right) = split /_/, $_;
36          5416    100    100                66259               if ($left == $i || $right == $i) {
37          2176                              33504                   $deductions{$_} = $xintersection{$_};
38                                                                }
39                                                            }
40           556                             141044           foreach my $ded (keys %deductions) {
41          2176                               5838               foreach (keys %{$deductions{$ded}}) {
            2176                              14113   
42          7224                              34128                   $alldeductions{$_}++;
43                                                                }
44                                                            }
45           556                               5103           foreach (keys %seenthis) {
46          3028    100                       14112               push(@uniquethis, $_) unless ($alldeductions{$_});
47                                                            }
48           556                              13018           $xunique[$i] = \@uniquethis;
49           116                                513       }
50           116                               7624       return \@xunique;
51                                                    }
52                                                    
53                                                    sub _complement_all_engine {
54           120                  100           728       my ($aref, $unsortflag) = @_;
55           120                               1045       my ($unionref, $seenref) = _calculate_union_seen_only($aref);
56           120                                820       my %seen = %{$seenref};
             120                               2106   
57           120    100                        1276       my @union = $unsortflag ? keys %{$unionref} : sort(keys %{$unionref});
              56                               1392   
              64                               2316   
58                                                    
59                                                        # Calculate @xcomplement
60                                                        # Inputs:  $aref @union %seen
61           120                                836       my (@xcomplement);
62           696                               5835       for (my $i = 0; $i <= $#{$aref}; $i++) {
63           576                               2058           my %seenthis = %{$seen{$i}};
             576                               7267   
64           576                               3323           my @complementthis = ();
65           576                               5838           foreach (@union) {
66          5728    100                       55425               push(@complementthis, $_) unless (exists $seenthis{$_});
67                                                            }
68           576                               5823           $xcomplement[$i] = \@complementthis;
69           120                                541       }
70           120                               6399       return \@xcomplement;
71                                                    }
72                                                    
73                                                    1;
74                                                    
75                                                    
76                                                    __END__


Branches
--------

line  err      %   true  false   branch
----- --- ------ ------ ------   ------
36           100   2176   3240   if ($left == $i or $right == $i)
46           100    232   2796   unless $alldeductions{$_}
57           100     56     64   $unsortflag ? :
66           100   2592   3136   unless exists $seenthis{$_}


Conditions
----------

or 3 conditions

line  err      %      l  !l&&r !l&&!r   expr
----- --- ------ ------ ------ ------   ----
36           100   1088   1088   3240   $left == $i or $right == $i


Covered Subroutines
-------------------

Subroutine             Location                                
---------------------- ----------------------------------------
BEGIN                  blib/lib/List/Compare/Base/_Engine.pm:17
BEGIN                  blib/lib/List/Compare/Base/_Engine.pm:6 
BEGIN                  blib/lib/List/Compare/Base/_Engine.pm:7 
_complement_all_engine blib/lib/List/Compare/Base/_Engine.pm:54
_unique_all_engine     blib/lib/List/Compare/Base/_Engine.pm:20


blib/lib/List/Compare/Functional.pm

line  err   stmt branch   cond    sub    pod   time   code
1                                                     package List::Compare::Functional;
2                                                     $VERSION = 0.31;   # August 15, 2004 
3                                                     @ISA = qw(Exporter);
4                                                     @EXPORT_OK = qw|
5                                                         get_intersection
6                                                         get_intersection_ref
7                                                         get_union
8                                                         get_union_ref
9                                                         get_unique
10                                                        get_unique_ref
11                                                        get_unique_all
12                                                        get_complement
13                                                        get_complement_ref
14                                                        get_complement_all
15                                                        get_symmetric_difference
16                                                        get_symmetric_difference_ref
17                                                        is_LsubsetR
18                                                        is_RsubsetL
19                                                        is_LequivalentR
20                                                        is_LdisjointR
21                                                        is_member_which
22                                                        is_member_which_ref
23                                                        are_members_which
24                                                        is_member_any
25                                                        are_members_any
26                                                        print_subset_chart
27                                                        print_equivalence_chart
28                                                        get_shared
29                                                        get_shared_ref
30                                                        get_nonintersection
31                                                        get_nonintersection_ref
32                                                        get_symdiff
33                                                        get_symdiff_ref
34                                                        is_LeqvlntR
35                                                        get_bag
36                                                        get_bag_ref
37                                                        get_version
38                                                    |;
39                                                    %EXPORT_TAGS = (
40                                                        main => [ qw(
41                                                            get_intersection
42                                                            get_union
43                                                            get_unique
44                                                            get_complement
45                                                            get_symmetric_difference
46                                                            is_LsubsetR
47                                                        ) ],
48                                                        mainrefs => [ qw(
49                                                            get_intersection_ref
50                                                            get_union_ref
51                                                            get_unique_ref
52                                                            get_complement_ref
53                                                            get_symmetric_difference_ref
54                                                        ) ],
55                                                        originals => [ qw(
56                                                            get_intersection
57                                                            get_intersection_ref
58                                                            get_union
59                                                            get_union_ref
60                                                            get_unique
61                                                            get_unique_ref
62                                                            get_unique_all
63                                                            get_complement
64                                                            get_complement_ref
65                                                            get_complement_all
66                                                            get_symmetric_difference
67                                                            get_symmetric_difference_ref
68                                                            get_shared
69                                                            get_shared_ref
70                                                            get_nonintersection
71                                                            get_nonintersection_ref
72                                                            is_LsubsetR
73                                                            is_RsubsetL
74                                                            is_LequivalentR
75                                                            is_LdisjointR
76                                                            is_member_which
77                                                            is_member_which_ref
78                                                            are_members_which
79                                                            is_member_any
80                                                            are_members_any
81                                                            print_subset_chart
82                                                            print_equivalence_chart
83                                                            get_bag
84                                                            get_bag_ref
85                                                            get_version
86                                                        ) ],
87                                                        aliases => [ qw(
88                                                            get_symdiff
89                                                            get_symdiff_ref
90                                                            is_LeqvlntR
91                                                        ) ],
92                                                    );
93            10                  100           206   use strict;
              10                                 69   
              10                                174   
94            10                  100           148   use Carp;
              10                                 41   
              10                                268   
95            10                  100          8804   use List::Compare::Base::_Auxiliary qw(
96                                                        _subset_subengine
97                                                        _chart_engine_multiple
98                                                        _equivalent_subengine
99                                                        _calc_seen1
100           10                                 64   );
              10                                517   
101           10                  100           413   use List::Compare::Base::_Auxiliary qw(:calculate :checker :tester);
              10                                 46   
              10                                150   
102           10                  100          9736   use List::Compare::Base::_Engine qw( 
103                                                       _unique_all_engine 
104                                                       _complement_all_engine
105           10                                 84   );
              10                                322   
106                                                   
107                                                   
108                                                   sub get_union {
109   ***     20                  100      0    117       return @{ get_union_ref(@_) };
              20                                163   
110                                                   }
111                                                   
112                                                   sub get_union_ref {
113   ***     40                  100      0    502       my ($argref, $unsorted) = _alt_construct_tester(@_);
114           16                                143       $unsorted  
115                                                           ? return          _union_engine(_argument_checker($argref))
116           40    100                         471           : return [ sort @{_union_engine(_argument_checker($argref))} ];
117                                                   }
118                                                   
119                                                   sub _union_engine {
120           40                  100           347       my $seenrefsref = _calc_seen1(@_);
121           40                                358       my $unionhashref = _calculate_union_only($seenrefsref);
122           40                                172       return [ keys %{$unionhashref} ];
              40                               2812   
123                                                   }
124                                                   
125                                                   sub get_intersection {
126   ***     25                  100      0    169       return @{ get_intersection_ref(@_) };
              25                                196   
127                                                   }
128                                                   
129                                                   sub get_intersection_ref {
130   ***     45                  100      0    569       my ($argref, $unsorted) = _alt_construct_tester(@_);
131           16                                150       $unsorted  
132                                                           ? return          _intersection_engine(_argument_checker($argref))
133           43    100                         512           : return [ sort @{_intersection_engine(_argument_checker($argref))} ];
134                                                   }
135                                                   
136                                                   sub _intersection_engine {
137           43                  100           411       my $seenrefsref = _calc_seen1(@_);
138           43                                537       my $xintersectionref = _calculate_xintersection_only($seenrefsref);
139           43                                400       my $intersectionref = _calculate_hash_intersection($xintersectionref);
140           43                                254       return [ keys %{$intersectionref} ];
              43                               2725   
141                                                   }
142                                                   
143                                                   sub get_unique {
144   ***     35                  100      0    510       return @{ get_unique_ref(@_) };
              35                                327   
145                                                   }
146                                                   
147                                                   sub get_unique_ref {
148   ***     66                  100      0   1001       my ($argref, $unsorted) = _alt_construct_tester_3(@_);
149           25                                225       $unsorted
150                                                           ? return          _unique_engine(_argument_checker_3($argref))
151           64    100                         829           : return [ sort @{_unique_engine(_argument_checker_3($argref))} ];
152                                                   }
153                                                   
154                                                   sub get_unique_all {
155   ***     18                  100      0    260       my ($argref, $unsorted) = _alt_construct_tester_3(@_);
156                                                       # currently it doesn't appear that &_unique_all_engine can make use of
157                                                       # $unsorted
158           18                                179       return _unique_all_engine(_argument_checker_3a($argref));
159                                                   }
160                                                   
161                                                   sub _unique_engine {
162           63                  100           335       my $tested = pop(@_);
163           63                                581       my $seenrefsref = _calc_seen1(@_);
164           63                                583       my ($seenref, $xintersectionref) = 
165                                                           _calculate_seen_xintersection_only($seenrefsref);
166           63                                305       my %seen = %{$seenref};
              63                               1210   
167           63                                361       my %xintersection = %{$xintersectionref};
              63                               8245   
168                                                   
169                                                       # Calculate %xunique
170           63                                384       my (%xunique);
171          318                               3102       for (my $i = 0; $i <= $#{$seenrefsref}; $i++) {
172          255                                694           my %seenthis = %{$seen{$i}};
             255                               3626   
173          255                               1676           my (@uniquethis, %deductions, %alldeductions);
174                                                           # Get those elements of %xintersection which we'll need 
175                                                           # to subtract from %seenthis
176          255                               3304           foreach (keys %xintersection) {
177         2190                              17422               my ($left, $right) = split /_/, $_;
178         2190    100    100                64935               if ($left == $i || $right == $i) {
179          900                              17456                   $deductions{$_} = $xintersection{$_};
180                                                               }
181                                                           }
182          255                               2557           foreach my $ded (keys %deductions) {
183          900                               1931               foreach (keys %{$deductions{$ded}}) {
             900                               9423   
184         3078                              27808                   $alldeductions{$_}++;
185                                                               }
186                                                           }
187          255                               2375           foreach (keys %seenthis) {
188         1441    100                        6518               push(@uniquethis, $_) unless ($alldeductions{$_});
189                                                           }
190          255                               4719           $xunique{$i} = \@uniquethis;
191           63                                261       }
192           63                                274       return [ @{$xunique{$tested}} ];
              63                               4811   
193                                                   }
194                                                   
195                                                   sub get_complement {
196   ***     30                  100      0    172       return @{ get_complement_ref(@_) };
              30                                245   
197                                                   }
198                                                   
199                                                   sub get_complement_ref {
200   ***     61                  100      0    857       my ($argref, $unsorted) = _alt_construct_tester_3(@_);
201           25                                220       $unsorted
202                                                           ? return          _complement_engine(_argument_checker_3($argref))
203           61    100                        1739           : return [ sort @{_complement_engine(_argument_checker_3($argref))} ];
204                                                   }
205                                                   
206                                                   sub get_complement_all {
207   ***     18                  100      0    273       my ($argref, $unsorted) = _alt_construct_tester_3(@_);
208           18                                167       return _complement_all_engine(_argument_checker_3a($argref), $unsorted);
209                                                   }
210                                                   
211                                                   sub _complement_engine {
212           60                  100           338       my $tested = pop(@_);
213           60                                525       my $seenrefsref = _calc_seen1(@_);
214           60                                722       my ($unionref, $seenref) = _calculate_union_seen_only($seenrefsref);
215           60                                286       my %seen = %{$seenref};
              60                                736   
216           60                                491       my @union = keys %{$unionref};
              60                               1477   
217                                                   
218                                                       # Calculate %xcomplement
219                                                       # Inputs:  $seenrefsref @union %seen
220           60                                383       my (%xcomplement);
221          300                               6379       for (my $i = 0; $i <= $#{$seenrefsref}; $i++) {
222          240                                597           my %seenthis = %{$seen{$i}};
             240                               3238   
223          240                               1028           my @complementthis = ();
224          240                               1035           foreach (@union) {
225         2320    100                       14505               push(@complementthis, $_) unless (exists $seenthis{$_});
226                                                           }
227          240                               3747           $xcomplement{$i} = \@complementthis;
228           60                                245       }
229           60                                234       return [ @{$xcomplement{$tested}} ];
              60                               5942   
230                                                   }
231                                                   
232                                                   sub get_symmetric_difference {
233   ***     40                  100      0    214       return @{ get_symmetric_difference_ref(@_) };
              40                                395   
234                                                   }
235                                                   
236                                                   sub get_symmetric_difference_ref {
237   ***     80                  100      0  47932       my ($argref, $unsorted) = _alt_construct_tester(@_);
238           32                                277       $unsorted  
239                                                           ? return          _symmetric_difference_engine(_argument_checker($argref))
240           80    100                        1042           : return [ sort @{_symmetric_difference_engine(_argument_checker($argref))} ];
241                                                   }
242                                                   
243                                                   sub _symmetric_difference_engine {
244           80                  100           737       my $seenrefsref = _calc_seen1(@_);
245           80                                789       my ($unionref, $xintersectionref) = 
246                                                           _calculate_union_xintersection_only($seenrefsref);
247           80                                335       my @union = keys %{$unionref};
              80                               1776   
248                                                   
249           80                               1160       my $sharedref = _calculate_hash_shared($xintersectionref);
250           80                                344       my (@symmetric_difference);
251           80                                371       foreach (@union) {
252          720    100                        1538           push(@symmetric_difference, $_) unless exists ${$sharedref}{$_};
             720                               4759   
253                                                       }
254           80                              29177       return \@symmetric_difference;
255                                                   }
256                                                   
257                                                   *get_symdiff  = \&get_symmetric_difference;
258                                                   *get_symdiff_ref  = \&get_symmetric_difference_ref;
259                                                   
260                                                   sub get_shared {
261   ***     20                  100      0    107       return @{ get_shared_ref(@_) };
              20                                164   
262                                                   }
263                                                   
264                                                   sub get_shared_ref {
265   ***     40                  100      0    636       my ($argref, $unsorted) = _alt_construct_tester(@_);
266           16                                154       $unsorted  
267                                                           ? return          _shared_engine(_argument_checker($argref))
268           40    100                         450           : return [ sort @{_shared_engine(_argument_checker($argref))} ];
269                                                   }
270                                                   
271                                                   sub _shared_engine {
272           40                  100           354       my $seenrefsref = _calc_seen1(@_);
273                                                       # Calculate @shared
274                                                       # Inputs:  %xintersection
275           40                                447       my $xintersectionref = _calculate_xintersection_only($seenrefsref);
276           40                                367       my $sharedref = _calculate_hash_shared($xintersectionref);
277           40                                163       my @shared = keys %{$sharedref};
              40                                624   
278           40                               8061       return \@shared;
279                                                   }
280                                                   
281                                                   sub get_nonintersection {
282   ***     20                  100      0    107       return @{ get_nonintersection_ref(@_) };
              20                                160   
283                                                   }
284                                                   
285                                                   sub get_nonintersection_ref {
286   ***     40                  100      0    730       my ($argref, $unsorted) = _alt_construct_tester(@_);
287           16                                301       $unsorted  
288                                                           ? return          _nonintersection_engine(_argument_checker($argref))
289           40    100                         583           : return [ sort @{_nonintersection_engine(_argument_checker($argref))} ];
290                                                   }
291                                                   
292                                                   sub _nonintersection_engine {
293           40                  100           410       my $seenrefsref = _calc_seen1(@_);
294           40                                357       my ($unionref, $xintersectionref) = 
295                                                           _calculate_union_xintersection_only($seenrefsref);
296           40                                190       my @union = keys %{$unionref};
              40                                855   
297           40                                480       my $intersectionref = _calculate_hash_intersection($xintersectionref);
298                                                       # Calculate nonintersection
299                                                       # Inputs:  @union    %intersection
300           40                                159       my (@nonintersection);
301           40                                266       foreach (@union) {
302          360    100                         793           push(@nonintersection, $_) unless exists ${$intersectionref}{$_};
             360                               3310   
303                                                       }
304           40                               2614       return \@nonintersection;
305                                                   }
306                                                   
307                                                   sub is_LsubsetR {
308   ***     28                  100      0  13310       my $argref = _alt_construct_tester_4(@_);
309           26                                229       return _is_LsubsetR_engine(_argument_checker_4($argref));
310                                                   }
311                                                   
312                                                   sub _is_LsubsetR_engine {
313           22                  100           120       my $testedref = pop(@_);
314           22                                165       my $xsubsetref = _subset_engine(@_);
315           22                                108       return ${$xsubsetref}[${$testedref}[0]][${$testedref}[1]];
              22                                 97   
              22                                131   
              22                                259   
316                                                   }
317                                                   
318                                                   sub is_RsubsetL {
319   ***     20                  100      0    233       my $argref = _alt_construct_tester_4(@_);
320           20                                168       return _is_RsubsetL_engine(_argument_checker_4($argref));
321                                                   }
322                                                   
323                                                   sub _is_RsubsetL_engine {
324           20                  100           112       my $testedref = pop(@_);
325           20                                133       my $xsubsetref = _subset_engine(@_);
326           20                                 88       return ${$xsubsetref}[${$testedref}[1]][${$testedref}[0]];
              20                                 94   
              20                                114   
              20                                204   
327                                                   }
328                                                   
329                                                   sub _subset_engine {
330           42                  100          3993       my $seenrefsref = _calc_seen1(@_);
331           42                                338       my $xsubsetref = _subset_subengine($seenrefsref);
332           42                               2323       return $xsubsetref;
333                                                   }
334                                                   
335                                                   sub is_LequivalentR {
336   ***     44                  100      0    559       my $argref = _alt_construct_tester_4(@_);
337           44                                364       return _is_LequivalentR_engine(_argument_checker_4($argref));
338                                                   }
339                                                   
340                                                   *is_LeqvlntR = \&is_LequivalentR;
341                                                   
342                                                   sub _is_LequivalentR_engine {
343           40                  100           234       my $testedref = pop(@_);
344           40                                298       my $seenrefsref = _calc_seen1(@_);
345           40                                309       my $xequivalentref = _equivalent_subengine($seenrefsref);
346           40                                153       return ${$xequivalentref}[${$testedref}[1]][${$testedref}[0]];
              40                                281   
              40                                264   
              40                                700   
347                                                   }
348                                                   
349                                                   sub is_LdisjointR {
350   ***     26                  100      0    334       my $argref = _alt_construct_tester_4(@_);
351           26                                228       return _is_LdisjointR_engine(_argument_checker_4($argref));
352                                                   }
353                                                   
354                                                   sub _is_LdisjointR_engine {
355           24                  100           141       my $testedref = pop(@_);
356           24                                198       my $seenrefsref = _calc_seen1(@_);
357           24                                201       my $xintersectionref = _calculate_xintersection_only($seenrefsref);
358           24                                107       my (@xdisjoint);
359          144                               1170       for (my $i = 0; $i <= @{$seenrefsref}; $i++) {
360          120                                288           foreach (keys %{$xintersectionref}) {
             120                               1171   
361         1296                               6278               my ($left, $right) = split /_/, $_;
362         1296                              11562               $xdisjoint[$left][$right] = $xdisjoint[$right][$left] = 
363         1296    100                        8343                   ! scalar(keys %{${$xintersectionref}{$_}}) ? 1 : 0;
            1296                               2537   
364                                                           }
365          120                               1511           $xdisjoint[$i][$i] = 0; 
366           24                                107       }
367           24                                 94       my $disjoint_status = $xdisjoint[${$testedref}[1]][${$testedref}[0]];
              24                                143   
              24                                115   
368           24                               1135       return $disjoint_status;
369                                                   }
370                                                   
371                                                   sub print_subset_chart {
372   ***     11                  100      0    151       my $argref = _alt_construct_tester_5(@_);
373            8                                 76       _print_subset_chart_engine(_argument_checker($argref));
374                                                   }
375                                                   
376                                                   sub _print_subset_chart_engine {
377            8                  100            78       my $seenrefsref = _calc_seen1(@_);
378            8                                143       my $xsubsetref = _subset_subengine($seenrefsref);
379            8                                 53       my $title = 'Subset';
380            8                                101       _chart_engine_multiple($xsubsetref, $title);
381                                                   }
382                                                   
383                                                   sub print_equivalence_chart {
384   ***      9                  100      0    111       my $argref = _alt_construct_tester_5(@_);
385            8                                145       _print_equivalence_chart_engine(_argument_checker($argref));
386                                                   }
387                                                   
388                                                   sub _print_equivalence_chart_engine {
389            8                  100            85       my $seenrefsref = _calc_seen1(@_);
390            8                                 77       my $xequivalentref = _equivalent_subengine($seenrefsref);
391            8                                 54       my $title = 'Subset';
392            8                                 78       _chart_engine_multiple($xequivalentref, $title);
393                                                   }    
394                                                   
395                                                   sub is_member_which {
396   ***     91                  100      0    439       return @{ is_member_which_ref(@_) };
              91                                611   
397                                                   }    
398                                                   
399                                                   sub is_member_which_ref {
400   ***    185                  100      0   2098       my $argref = _alt_construct_tester_1(@_);
401          179                               1515       return _is_member_which_engine(_argument_checker_1($argref));
402                                                   }    
403                                                   
404                                                   sub _is_member_which_engine {
405          176                  100           802       my $arg = pop(@_);
406          176                               1292       my $seenrefsref = _calc_seen1(@_);
407          176                               7428       my $seenref = _calculate_seen_only($seenrefsref);
408          176                                605       my (@found);
409          176                                630       foreach (sort keys %{$seenref}) {
             176                               4440   
410          616    100                        1771           push @found, $_ if (exists ${$seenref}{$_}{$arg});
             616                               6388   
411                                                       }
412          176                              12481       return \@found;
413                                                   }
414                                                   
415                                                   sub is_member_any {
416   ***     94                  100      0   1208       my $argref = _alt_construct_tester_1(@_);
417           91                                713       return _is_member_any_engine(_argument_checker_1($argref));
418                                                   }    
419                                                   
420                                                   sub _is_member_any_engine {
421           88                  100           447       my $tested = pop(@_);
422           88                                663       my $seenrefsref = _calc_seen1(@_);
423           88                                686       my $seenref = _calculate_seen_only($seenrefsref);
424           88                                310       my ($k);
425           88                                356       while ( $k = each %{$seenref} ) {
             180                               1978   
426          164    100                         569           return 1 if (defined ${$seenref}{$k}{$tested});
             164                              11013   
427                                                       }
428           16                                481       return 0;
429                                                   }
430                                                   
431                                                   sub are_members_which {
432   ***     12                  100      0    177       my $argref = _alt_construct_tester_2(@_);
433            9                                 99       return _are_members_which_engine(_argument_checker_2($argref));
434                                                   }
435                                                   
436                                                   sub _are_members_which_engine {
437            8                  100            63       my $testedref = pop(@_);
438            8                                 46       my @tested = @{$testedref};
               8                                218   
439            8                                 86       my $seenrefsref = _calc_seen1(@_);
440            8                                 82       my $seenref = _calculate_seen_only($seenrefsref);
441            8                                 46       my (%found);
442                                                       for (my $i=0; $i<=$#tested; $i++) {
443           88                                211           my (@not_found);
444           88                                212           foreach (sort keys %{$seenref}) {
              88                                883   
445          308                                605               exists ${${$seenref}{$_}}{$tested[$i]}
             308                               2369   
             164                               1390   
446          308    100                         629                   ? push @{$found{$tested[$i]}}, $_
447                                                                   : push @not_found, $_;
448                                                           }
449           88    100                         417           $found{$tested[$i]} = [] if (@not_found == keys %{$seenref});
              88                               7172   
450            8                                 45       }
451            8                                378       return \%found;
452                                                   }
453                                                   
454                                                   sub are_members_any {
455   ***     12                  100      0    168       my $argref = _alt_construct_tester_2(@_);
456            9                                242       return _are_members_any_engine(_argument_checker_2($argref));
457                                                   }    
458                                                   
459                                                   sub _are_members_any_engine {
460            8                  100            60       my $testedref = pop(@_);
461            8                                 42       my @tested = @{$testedref};
               8                                129   
462            8                                 75       my $seenrefsref = _calc_seen1(@_);
463            8                                 67       my $seenref = _calculate_seen_only($seenrefsref);
464            8                                 45       my (%present);
465                                                       for (my $i=0; $i<=$#tested; $i++) {
466           88                                314           foreach (keys %{$seenref}) {
              88                                536   
467          308    100                        1351               unless (defined $present{$tested[$i]}) {
468          164    100                         343                   $present{$tested[$i]} = 1 if ${$seenref}{$_}{$tested[$i]};
             164                               2008   
469                                                               }
470                                                           }
471           88    100                        1367           $present{$tested[$i]} = 0 if (! defined $present{$tested[$i]});
472            8                                 45       }
473            8                                315       return \%present;
474                                                   }
475                                                   
476                                                   sub get_bag {
477   ***     20                  100      0    123       return @{ get_bag_ref(@_) };
              20                                176   
478                                                   }
479                                                   
480                                                   sub get_bag_ref {
481   ***     41                  100      0    531       my ($argref, $unsorted) = _alt_construct_tester(@_);
482           17                                172       $unsorted  
483                                                           ? return          _bag_engine(_argument_checker($argref))
484           41    100                        2482           : return [ sort @{_bag_engine(_argument_checker($argref))} ];
485                                                   }
486                                                   
487                                                   sub _bag_engine {
488           41                  100           296       my @listrefs = @_;
489           41                                153       my (@bag);
490           41    100                         506       if (ref($listrefs[0]) eq 'ARRAY') { 
      ***            50                               
491           21                                164           foreach my $lref (@listrefs) {
492           75                                177               foreach my $el (@{$lref}) {
              75                                315   
493          512                               2712                   push(@bag, $el);
494                                                               }
495                                                           }
496                                                       } elsif (ref($listrefs[0]) eq 'HASH') {
497           20                                121           foreach my $lref (@listrefs) {
498           70                                251               foreach my $key (keys %{$lref}) {
              70                                550   
499          890                              46623                   for (my $j=1; $j <= ${$lref}{$key}; $j++) {
500          480                               2799                       push(@bag, $key);
501          410                               1107                   }
502                                                               }
503                                                           }
504                                                       } else {
505   ***      0                                  0           croak "Indeterminate case in _bag_engine: $!";
506                                                       }
507           41                               3388       return \@bag;
508                                                   }
509                                                   
510                                                   sub get_version {
511   ***      8                  100      0     91       return $List::Compare::Functional::VERSION;
512                                                   }
513                                                   
514                                                   1;
515                                                   
516                                                   __END__


Branches
--------

line  err      %   true  false   branch
----- --- ------ ------ ------   ------
116          100     24     16   $unsorted ? :
133          100     27     16   $unsorted ? :
151          100     39     25   $unsorted ? :
178          100    900   1290   if ($left == $i or $right == $i)
188          100    126   1315   unless $alldeductions{$_}
203          100     36     25   $unsorted ? :
225          100    960   1360   unless exists $seenthis{$_}
240          100     48     32   $unsorted ? :
252          100    160    560   unless exists ${$sharedref;}{$_}
268          100     24     16   $unsorted ? :
289          100     24     16   $unsorted ? :
302          100    200    160   unless exists ${$intersectionref;}{$_}
363          100    432    864   !scalar(keys %{${$xintersectionref;}{$_};}) ? :
410          100    328    288   if exists ${$seenref;}{$_}{$arg}
426          100     72     92   if defined ${$seenref;}{$k}{$tested}
446          100    164    144   exists ${${$seenref;}{$_};}{$tested[$i]} ? :
449          100     16     72   if @not_found == keys %{$seenref;}
467          100    164    144   unless (defined $present{$tested[$i]})
468          100     72     92   if ${$seenref;}{$_}{$tested[$i]}
471          100     16     72   if not defined $present{$tested[$i]}
484          100     24     17   $unsorted ? :
490          100     21     20   if (ref $listrefs[0] eq 'ARRAY') { }
      ***     50     20      0   elsif (ref $listrefs[0] eq 'HASH') { }


Conditions
----------

or 3 conditions

line  err      %      l  !l&&r !l&&!r   expr
----- --- ------ ------ ------ ------   ----
178          100    450    450   1290   $left == $i or $right == $i


Covered Subroutines
-------------------

Subroutine                      Location                               
------------------------------- ---------------------------------------
BEGIN                           blib/lib/List/Compare/Functional.pm:101
BEGIN                           blib/lib/List/Compare/Functional.pm:102
BEGIN                           blib/lib/List/Compare/Functional.pm:93 
BEGIN                           blib/lib/List/Compare/Functional.pm:94 
BEGIN                           blib/lib/List/Compare/Functional.pm:95 
_are_members_any_engine         blib/lib/List/Compare/Functional.pm:460
_are_members_which_engine       blib/lib/List/Compare/Functional.pm:437
_bag_engine                     blib/lib/List/Compare/Functional.pm:488
_complement_engine              blib/lib/List/Compare/Functional.pm:212
_intersection_engine            blib/lib/List/Compare/Functional.pm:137
_is_LdisjointR_engine           blib/lib/List/Compare/Functional.pm:355
_is_LequivalentR_engine         blib/lib/List/Compare/Functional.pm:343
_is_LsubsetR_engine             blib/lib/List/Compare/Functional.pm:313
_is_RsubsetL_engine             blib/lib/List/Compare/Functional.pm:324
_is_member_any_engine           blib/lib/List/Compare/Functional.pm:421
_is_member_which_engine         blib/lib/List/Compare/Functional.pm:405
_nonintersection_engine         blib/lib/List/Compare/Functional.pm:293
_print_equivalence_chart_engine blib/lib/List/Compare/Functional.pm:389
_print_subset_chart_engine      blib/lib/List/Compare/Functional.pm:377
_shared_engine                  blib/lib/List/Compare/Functional.pm:272
_subset_engine                  blib/lib/List/Compare/Functional.pm:330
_symmetric_difference_engine    blib/lib/List/Compare/Functional.pm:244
_union_engine                   blib/lib/List/Compare/Functional.pm:120
_unique_engine                  blib/lib/List/Compare/Functional.pm:162
are_members_any                 blib/lib/List/Compare/Functional.pm:455
are_members_which               blib/lib/List/Compare/Functional.pm:432
get_bag                         blib/lib/List/Compare/Functional.pm:477
get_bag_ref                     blib/lib/List/Compare/Functional.pm:481
get_complement                  blib/lib/List/Compare/Functional.pm:196
get_complement_all              blib/lib/List/Compare/Functional.pm:207
get_complement_ref              blib/lib/List/Compare/Functional.pm:200
get_intersection                blib/lib/List/Compare/Functional.pm:126
get_intersection_ref            blib/lib/List/Compare/Functional.pm:130
get_nonintersection             blib/lib/List/Compare/Functional.pm:282
get_nonintersection_ref         blib/lib/List/Compare/Functional.pm:286
get_shared                      blib/lib/List/Compare/Functional.pm:261
get_shared_ref                  blib/lib/List/Compare/Functional.pm:265
get_symmetric_difference        blib/lib/List/Compare/Functional.pm:233
get_symmetric_difference_ref    blib/lib/List/Compare/Functional.pm:237
get_union                       blib/lib/List/Compare/Functional.pm:109
get_union_ref                   blib/lib/List/Compare/Functional.pm:113
get_unique                      blib/lib/List/Compare/Functional.pm:144
get_unique_all                  blib/lib/List/Compare/Functional.pm:155
get_unique_ref                  blib/lib/List/Compare/Functional.pm:148
get_version                     blib/lib/List/Compare/Functional.pm:511
is_LdisjointR                   blib/lib/List/Compare/Functional.pm:350
is_LequivalentR                 blib/lib/List/Compare/Functional.pm:336
is_LsubsetR                     blib/lib/List/Compare/Functional.pm:308
is_RsubsetL                     blib/lib/List/Compare/Functional.pm:319
is_member_any                   blib/lib/List/Compare/Functional.pm:416
is_member_which                 blib/lib/List/Compare/Functional.pm:396
is_member_which_ref             blib/lib/List/Compare/Functional.pm:400
print_equivalence_chart         blib/lib/List/Compare/Functional.pm:384
print_subset_chart              blib/lib/List/Compare/Functional.pm:372


